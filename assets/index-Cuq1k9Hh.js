(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dd(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Ht={},lr=[],Vn=()=>{},$x=()=>!1,wc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),fd=n=>n.startsWith("onUpdate:"),Ge=Object.assign,pd=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},zx=Object.prototype.hasOwnProperty,Bt=(n,t)=>zx.call(n,t),gt=Array.isArray,cr=n=>ua(n)==="[object Map]",xc=n=>ua(n)==="[object Set]",Xp=n=>ua(n)==="[object Date]",It=n=>typeof n=="function",de=n=>typeof n=="string",Hn=n=>typeof n=="symbol",Yt=n=>n!==null&&typeof n=="object",ky=n=>(Yt(n)||It(n))&&It(n.then)&&It(n.catch),Dy=Object.prototype.toString,ua=n=>Dy.call(n),jx=n=>ua(n).slice(8,-1),My=n=>ua(n)==="[object Object]",gd=n=>de(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,xo=dd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tc=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},Hx=/-(\w)/g,mn=Tc(n=>n.replace(Hx,(t,e)=>e?e.toUpperCase():"")),Wx=/\B([A-Z])/g,ji=Tc(n=>n.replace(Wx,"-$1").toLowerCase()),Ec=Tc(n=>n.charAt(0).toUpperCase()+n.slice(1)),ku=Tc(n=>n?`on${Ec(n)}`:""),js=(n,t)=>!Object.is(n,t),ml=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},gh=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Vl=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Qp;const Ic=()=>Qp||(Qp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function md(n){if(gt(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],i=de(s)?Yx(s):md(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(de(n)||Yt(n))return n}const qx=/;(?![^(]*\))/g,Gx=/:([^]+)/,Kx=/\/\*[^]*?\*\//g;function Yx(n){const t={};return n.replace(Kx,"").split(qx).forEach(e=>{if(e){const s=e.split(Gx);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function G(n){let t="";if(de(n))t=n;else if(gt(n))for(let e=0;e<n.length;e++){const s=G(n[e]);s&&(t+=s+" ")}else if(Yt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const Xx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qx=dd(Xx);function Oy(n){return!!n||n===""}function Jx(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=Sc(n[s],t[s]);return e}function Sc(n,t){if(n===t)return!0;let e=Xp(n),s=Xp(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=Hn(n),s=Hn(t),e||s)return n===t;if(e=gt(n),s=gt(t),e||s)return e&&s?Jx(n,t):!1;if(e=Yt(n),s=Yt(t),e||s){if(!e||!s)return!1;const i=Object.keys(n).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Sc(n[o],t[o]))return!1}}return String(n)===String(t)}function Zx(n,t){return n.findIndex(e=>Sc(e,t))}const Ly=n=>!!(n&&n.__v_isRef===!0),bt=n=>de(n)?n:n==null?"":gt(n)||Yt(n)&&(n.toString===Dy||!It(n.toString))?Ly(n)?bt(n.value):JSON.stringify(n,Vy,2):String(n),Vy=(n,t)=>Ly(t)?Vy(n,t.value):cr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,i],r)=>(e[Du(s,r)+" =>"]=i,e),{})}:xc(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Du(e))}:Hn(t)?Du(t):Yt(t)&&!gt(t)&&!My(t)?String(t):t,Du=(n,t="")=>{var e;return Hn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ye;class tT{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ye,!t&&Ye&&(this.index=(Ye.scopes||(Ye.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Ye;try{return Ye=this,t()}finally{Ye=e}}}on(){++this._on===1&&(this.prevScope=Ye,Ye=this)}off(){this._on>0&&--this._on===0&&(Ye=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function eT(){return Ye}let Gt;const Mu=new WeakSet;class Ny{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ye&&Ye.active&&Ye.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mu.has(this)&&(Mu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||By(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jp(this),Uy(this);const t=Gt,e=Tn;Gt=this,Tn=!0;try{return this.fn()}finally{$y(this),Gt=t,Tn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)bd(t);this.deps=this.depsTail=void 0,Jp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mh(this)&&this.run()}get dirty(){return mh(this)}}let Fy=0,To,Eo;function By(n,t=!1){if(n.flags|=8,t){n.next=Eo,Eo=n;return}n.next=To,To=n}function _d(){Fy++}function yd(){if(--Fy>0)return;if(Eo){let t=Eo;for(Eo=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;To;){let t=To;for(To=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function Uy(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function $y(n){let t,e=n.depsTail,s=e;for(;s;){const i=s.prevDep;s.version===-1?(s===e&&(e=i),bd(s),nT(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=t,n.depsTail=e}function mh(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(zy(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function zy(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===$o)||(n.globalVersion=$o,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!mh(n))))return;n.flags|=2;const t=n.dep,e=Gt,s=Tn;Gt=n,Tn=!0;try{Uy(n);const i=n.fn(n._value);(t.version===0||js(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{Gt=e,Tn=s,$y(n),n.flags&=-3}}function bd(n,t=!1){const{dep:e,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)bd(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function nT(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Tn=!0;const jy=[];function fs(){jy.push(Tn),Tn=!1}function ps(){const n=jy.pop();Tn=n===void 0?!0:n}function Jp(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Gt;Gt=void 0;try{t()}finally{Gt=e}}}let $o=0;class sT{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Gt||!Tn||Gt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Gt)e=this.activeLink=new sT(Gt,this),Gt.deps?(e.prevDep=Gt.depsTail,Gt.depsTail.nextDep=e,Gt.depsTail=e):Gt.deps=Gt.depsTail=e,Hy(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Gt.depsTail,e.nextDep=void 0,Gt.depsTail.nextDep=e,Gt.depsTail=e,Gt.deps===e&&(Gt.deps=s)}return e}trigger(t){this.version++,$o++,this.notify(t)}notify(t){_d();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{yd()}}}function Hy(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Hy(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const _h=new WeakMap,Pi=Symbol(""),yh=Symbol(""),zo=Symbol("");function Le(n,t,e){if(Tn&&Gt){let s=_h.get(n);s||_h.set(n,s=new Map);let i=s.get(e);i||(s.set(e,i=new vd),i.map=s,i.key=e),i.track()}}function rs(n,t,e,s,i,r){const o=_h.get(n);if(!o){$o++;return}const a=l=>{l&&l.trigger()};if(_d(),t==="clear")o.forEach(a);else{const l=gt(n),c=l&&gd(e);if(l&&e==="length"){const h=Number(s);o.forEach((d,f)=>{(f==="length"||f===zo||!Hn(f)&&f>=h)&&a(d)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(zo)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Pi)),cr(n)&&a(o.get(yh)));break;case"delete":l||(a(o.get(Pi)),cr(n)&&a(o.get(yh)));break;case"set":cr(n)&&a(o.get(Pi));break}}yd()}function Zi(n){const t=Ft(n);return t===n?t:(Le(t,"iterate",zo),pn(n)?t:t.map(Ie))}function Ac(n){return Le(n=Ft(n),"iterate",zo),n}const iT={__proto__:null,[Symbol.iterator](){return Ou(this,Symbol.iterator,Ie)},concat(...n){return Zi(this).concat(...n.map(t=>gt(t)?Zi(t):t))},entries(){return Ou(this,"entries",n=>(n[1]=Ie(n[1]),n))},every(n,t){return Zn(this,"every",n,t,void 0,arguments)},filter(n,t){return Zn(this,"filter",n,t,e=>e.map(Ie),arguments)},find(n,t){return Zn(this,"find",n,t,Ie,arguments)},findIndex(n,t){return Zn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Zn(this,"findLast",n,t,Ie,arguments)},findLastIndex(n,t){return Zn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Zn(this,"forEach",n,t,void 0,arguments)},includes(...n){return Lu(this,"includes",n)},indexOf(...n){return Lu(this,"indexOf",n)},join(n){return Zi(this).join(n)},lastIndexOf(...n){return Lu(this,"lastIndexOf",n)},map(n,t){return Zn(this,"map",n,t,void 0,arguments)},pop(){return no(this,"pop")},push(...n){return no(this,"push",n)},reduce(n,...t){return Zp(this,"reduce",n,t)},reduceRight(n,...t){return Zp(this,"reduceRight",n,t)},shift(){return no(this,"shift")},some(n,t){return Zn(this,"some",n,t,void 0,arguments)},splice(...n){return no(this,"splice",n)},toReversed(){return Zi(this).toReversed()},toSorted(n){return Zi(this).toSorted(n)},toSpliced(...n){return Zi(this).toSpliced(...n)},unshift(...n){return no(this,"unshift",n)},values(){return Ou(this,"values",Ie)}};function Ou(n,t,e){const s=Ac(n),i=s[t]();return s!==n&&!pn(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=e(r.value)),r}),i}const rT=Array.prototype;function Zn(n,t,e,s,i,r){const o=Ac(n),a=o!==n&&!pn(n),l=o[t];if(l!==rT[t]){const d=l.apply(n,r);return a?Ie(d):d}let c=e;o!==n&&(a?c=function(d,f){return e.call(this,Ie(d),f,n)}:e.length>2&&(c=function(d,f){return e.call(this,d,f,n)}));const h=l.call(o,c,s);return a&&i?i(h):h}function Zp(n,t,e,s){const i=Ac(n);let r=e;return i!==n&&(pn(n)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,n)}):r=function(o,a,l){return e.call(this,o,Ie(a),l,n)}),i[t](r,...s)}function Lu(n,t,e){const s=Ft(n);Le(s,"iterate",zo);const i=s[t](...e);return(i===-1||i===!1)&&Ed(e[0])?(e[0]=Ft(e[0]),s[t](...e)):i}function no(n,t,e=[]){fs(),_d();const s=Ft(n)[t].apply(n,e);return yd(),ps(),s}const oT=dd("__proto__,__v_isRef,__isVue"),Wy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Hn));function aT(n){Hn(n)||(n=String(n));const t=Ft(this);return Le(t,"has",n),t.hasOwnProperty(n)}class qy{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(i?r?_T:Xy:r?Yy:Ky).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=gt(t);if(!i){let l;if(o&&(l=iT[e]))return l;if(e==="hasOwnProperty")return aT}const a=Reflect.get(t,e,Ue(t)?t:s);return(Hn(e)?Wy.has(e):oT(e))||(i||Le(t,"get",e),r)?a:Ue(a)?o&&gd(e)?a:a.value:Yt(a)?i?Qy(a):xd(a):a}}class Gy extends qy{constructor(t=!1){super(!1,t)}set(t,e,s,i){let r=t[e];if(!this._isShallow){const l=Js(r);if(!pn(s)&&!Js(s)&&(r=Ft(r),s=Ft(s)),!gt(t)&&Ue(r)&&!Ue(s))return l?!1:(r.value=s,!0)}const o=gt(t)&&gd(e)?Number(e)<t.length:Bt(t,e),a=Reflect.set(t,e,s,Ue(t)?t:i);return t===Ft(i)&&(o?js(s,r)&&rs(t,"set",e,s):rs(t,"add",e,s)),a}deleteProperty(t,e){const s=Bt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&rs(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return(!Hn(e)||!Wy.has(e))&&Le(t,"has",e),s}ownKeys(t){return Le(t,"iterate",gt(t)?"length":Pi),Reflect.ownKeys(t)}}class lT extends qy{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const cT=new Gy,uT=new lT,hT=new Gy(!0);const bh=n=>n,Ga=n=>Reflect.getPrototypeOf(n);function dT(n,t,e){return function(...s){const i=this.__v_raw,r=Ft(i),o=cr(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...s),h=e?bh:t?Nl:Ie;return!t&&Le(r,"iterate",l?yh:Pi),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Ka(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function fT(n,t){const e={get(i){const r=this.__v_raw,o=Ft(r),a=Ft(i);n||(js(i,a)&&Le(o,"get",i),Le(o,"get",a));const{has:l}=Ga(o),c=t?bh:n?Nl:Ie;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&Le(Ft(i),"iterate",Pi),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Ft(r),a=Ft(i);return n||(js(i,a)&&Le(o,"has",i),Le(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Ft(a),c=t?bh:n?Nl:Ie;return!n&&Le(l,"iterate",Pi),a.forEach((h,d)=>i.call(r,c(h),c(d),o))}};return Ge(e,n?{add:Ka("add"),set:Ka("set"),delete:Ka("delete"),clear:Ka("clear")}:{add(i){!t&&!pn(i)&&!Js(i)&&(i=Ft(i));const r=Ft(this);return Ga(r).has.call(r,i)||(r.add(i),rs(r,"add",i,i)),this},set(i,r){!t&&!pn(r)&&!Js(r)&&(r=Ft(r));const o=Ft(this),{has:a,get:l}=Ga(o);let c=a.call(o,i);c||(i=Ft(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,r),c?js(r,h)&&rs(o,"set",i,r):rs(o,"add",i,r),this},delete(i){const r=Ft(this),{has:o,get:a}=Ga(r);let l=o.call(r,i);l||(i=Ft(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&rs(r,"delete",i,void 0),c},clear(){const i=Ft(this),r=i.size!==0,o=i.clear();return r&&rs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=dT(i,n,t)}),e}function wd(n,t){const e=fT(n,t);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(Bt(e,i)&&i in s?e:s,i,r)}const pT={get:wd(!1,!1)},gT={get:wd(!1,!0)},mT={get:wd(!0,!1)};const Ky=new WeakMap,Yy=new WeakMap,Xy=new WeakMap,_T=new WeakMap;function yT(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bT(n){return n.__v_skip||!Object.isExtensible(n)?0:yT(jx(n))}function xd(n){return Js(n)?n:Td(n,!1,cT,pT,Ky)}function vT(n){return Td(n,!1,hT,gT,Yy)}function Qy(n){return Td(n,!0,uT,mT,Xy)}function Td(n,t,e,s,i){if(!Yt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=bT(n);if(r===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,r===2?s:e);return i.set(n,a),a}function ur(n){return Js(n)?ur(n.__v_raw):!!(n&&n.__v_isReactive)}function Js(n){return!!(n&&n.__v_isReadonly)}function pn(n){return!!(n&&n.__v_isShallow)}function Ed(n){return n?!!n.__v_raw:!1}function Ft(n){const t=n&&n.__v_raw;return t?Ft(t):n}function wT(n){return!Bt(n,"__v_skip")&&Object.isExtensible(n)&&gh(n,"__v_skip",!0),n}const Ie=n=>Yt(n)?xd(n):n,Nl=n=>Yt(n)?Qy(n):n;function Ue(n){return n?n.__v_isRef===!0:!1}function At(n){return xT(n,!1)}function xT(n,t){return Ue(n)?n:new TT(n,t)}class TT{constructor(t,e){this.dep=new vd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Ft(t),this._value=e?t:Ie(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||pn(t)||Js(t);t=s?t:Ft(t),js(t,e)&&(this._rawValue=t,this._value=s?t:Ie(t),this.dep.trigger())}}function Ut(n){return Ue(n)?n.value:n}const ET={get:(n,t,e)=>t==="__v_raw"?n:Ut(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const i=n[t];return Ue(i)&&!Ue(e)?(i.value=e,!0):Reflect.set(n,t,e,s)}};function Jy(n){return ur(n)?n:new Proxy(n,ET)}class IT{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new vd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Gt!==this)return By(this,!0),!0}get value(){const t=this.dep.track();return zy(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ST(n,t,e=!1){let s,i;return It(n)?s=n:(s=n.get,i=n.set),new IT(s,i,e)}const Ya={},Fl=new WeakMap;let Ti;function AT(n,t=!1,e=Ti){if(e){let s=Fl.get(e);s||Fl.set(e,s=[]),s.push(n)}}function CT(n,t,e=Ht){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=e,c=k=>i?k:pn(k)||i===!1||i===0?os(k,1):os(k);let h,d,f,g,_=!1,b=!1;if(Ue(n)?(d=()=>n.value,_=pn(n)):ur(n)?(d=()=>c(n),_=!0):gt(n)?(b=!0,_=n.some(k=>ur(k)||pn(k)),d=()=>n.map(k=>{if(Ue(k))return k.value;if(ur(k))return c(k);if(It(k))return l?l(k,2):k()})):It(n)?t?d=l?()=>l(n,2):n:d=()=>{if(f){fs();try{f()}finally{ps()}}const k=Ti;Ti=h;try{return l?l(n,3,[g]):n(g)}finally{Ti=k}}:d=Vn,t&&i){const k=d,D=i===!0?1/0:i;d=()=>os(k(),D)}const v=eT(),A=()=>{h.stop(),v&&v.active&&pd(v.effects,h)};if(r&&t){const k=t;t=(...D)=>{k(...D),A()}}let C=b?new Array(n.length).fill(Ya):Ya;const M=k=>{if(!(!(h.flags&1)||!h.dirty&&!k))if(t){const D=h.run();if(i||_||(b?D.some((N,w)=>js(N,C[w])):js(D,C))){f&&f();const N=Ti;Ti=h;try{const w=[D,C===Ya?void 0:b&&C[0]===Ya?[]:C,g];C=D,l?l(t,3,w):t(...w)}finally{Ti=N}}}else h.run()};return a&&a(M),h=new Ny(d),h.scheduler=o?()=>o(M,!1):M,g=k=>AT(k,!1,h),f=h.onStop=()=>{const k=Fl.get(h);if(k){if(l)l(k,4);else for(const D of k)D();Fl.delete(h)}},t?s?M(!0):C=h.run():o?o(M.bind(null,!0),!0):h.run(),A.pause=h.pause.bind(h),A.resume=h.resume.bind(h),A.stop=A,A}function os(n,t=1/0,e){if(t<=0||!Yt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,Ue(n))os(n.value,t,e);else if(gt(n))for(let s=0;s<n.length;s++)os(n[s],t,e);else if(xc(n)||cr(n))n.forEach(s=>{os(s,t,e)});else if(My(n)){for(const s in n)os(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&os(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ha(n,t,e,s){try{return s?n(...s):n()}catch(i){Cc(i,t,e)}}function Wn(n,t,e,s){if(It(n)){const i=ha(n,t,e,s);return i&&ky(i)&&i.catch(r=>{Cc(r,t,e)}),i}if(gt(n)){const i=[];for(let r=0;r<n.length;r++)i.push(Wn(n[r],t,e,s));return i}}function Cc(n,t,e,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ht;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](n,l,c)===!1)return}a=a.parent}if(r){fs(),ha(r,null,10,[n,l,c]),ps();return}}PT(n,e,i,s,o)}function PT(n,t,e,s=!0,i=!1){if(i)throw n;console.error(n)}const We=[];let Pn=-1;const hr=[];let Ds=null,sr=0;const Zy=Promise.resolve();let Bl=null;function tb(n){const t=Bl||Zy;return n?t.then(this?n.bind(this):n):t}function RT(n){let t=Pn+1,e=We.length;for(;t<e;){const s=t+e>>>1,i=We[s],r=jo(i);r<n||r===n&&i.flags&2?t=s+1:e=s}return t}function Id(n){if(!(n.flags&1)){const t=jo(n),e=We[We.length-1];!e||!(n.flags&2)&&t>=jo(e)?We.push(n):We.splice(RT(t),0,n),n.flags|=1,eb()}}function eb(){Bl||(Bl=Zy.then(sb))}function kT(n){gt(n)?hr.push(...n):Ds&&n.id===-1?Ds.splice(sr+1,0,n):n.flags&1||(hr.push(n),n.flags|=1),eb()}function tg(n,t,e=Pn+1){for(;e<We.length;e++){const s=We[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;We.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function nb(n){if(hr.length){const t=[...new Set(hr)].sort((e,s)=>jo(e)-jo(s));if(hr.length=0,Ds){Ds.push(...t);return}for(Ds=t,sr=0;sr<Ds.length;sr++){const e=Ds[sr];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ds=null,sr=0}}const jo=n=>n.id==null?n.flags&2?-1:1/0:n.id;function sb(n){try{for(Pn=0;Pn<We.length;Pn++){const t=We[Pn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ha(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Pn<We.length;Pn++){const t=We[Pn];t&&(t.flags&=-2)}Pn=-1,We.length=0,nb(),Bl=null,(We.length||hr.length)&&sb()}}let rn=null,ib=null;function Ul(n){const t=rn;return rn=n,ib=n&&n.type.__scopeId||null,t}function DT(n,t=rn,e){if(!t||n._n)return n;const s=(...i)=>{s._d&&ug(-1);const r=Ul(t);let o;try{o=n(...i)}finally{Ul(r),s._d&&ug(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function uo(n,t){if(rn===null)return n;const e=Oc(rn),s=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=Ht]=t[i];r&&(It(r)&&(r={mounted:r,updated:r}),r.deep&&os(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function _i(n,t,e,s){const i=n.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(fs(),Wn(l,e,8,[n.el,a,n,t]),ps())}}const MT=Symbol("_vte"),OT=n=>n.__isTeleport;function Sd(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Sd(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function rb(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Io(n,t,e,s,i=!1){if(gt(n)){n.forEach((_,b)=>Io(_,t&&(gt(t)?t[b]:t),e,s,i));return}if(So(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Io(n,t,e,s.component.subTree);return}const r=s.shapeFlag&4?Oc(s.component):s.el,o=i?null:r,{i:a,r:l}=n,c=t&&t.r,h=a.refs===Ht?a.refs={}:a.refs,d=a.setupState,f=Ft(d),g=d===Ht?()=>!1:_=>Bt(f,_);if(c!=null&&c!==l&&(de(c)?(h[c]=null,g(c)&&(d[c]=null)):Ue(c)&&(c.value=null)),It(l))ha(l,a,12,[o,h]);else{const _=de(l),b=Ue(l);if(_||b){const v=()=>{if(n.f){const A=_?g(l)?d[l]:h[l]:l.value;i?gt(A)&&pd(A,r):gt(A)?A.includes(r)||A.push(r):_?(h[l]=[r],g(l)&&(d[l]=h[l])):(l.value=[r],n.k&&(h[n.k]=l.value))}else _?(h[l]=o,g(l)&&(d[l]=o)):b&&(l.value=o,n.k&&(h[n.k]=o))};o?(v.id=-1,en(v,e)):v()}}}Ic().requestIdleCallback;Ic().cancelIdleCallback;const So=n=>!!n.type.__asyncLoader,ob=n=>n.type.__isKeepAlive;function LT(n,t){ab(n,"a",t)}function VT(n,t){ab(n,"da",t)}function ab(n,t,e=Ne){const s=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Pc(t,s,e),e){let i=e.parent;for(;i&&i.parent;)ob(i.parent.vnode)&&NT(s,t,e,i),i=i.parent}}function NT(n,t,e,s){const i=Pc(t,n,s,!0);Rc(()=>{pd(s[t],i)},e)}function Pc(n,t,e=Ne,s=!1){if(e){const i=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{fs();const a=da(e),l=Wn(t,e,n,o);return a(),ps(),l});return s?i.unshift(r):i.push(r),r}}const ws=n=>(t,e=Ne)=>{(!Wo||n==="sp")&&Pc(n,(...s)=>t(...s),e)},FT=ws("bm"),Rr=ws("m"),BT=ws("bu"),UT=ws("u"),$T=ws("bum"),Rc=ws("um"),zT=ws("sp"),jT=ws("rtg"),HT=ws("rtc");function WT(n,t=Ne){Pc("ec",n,t)}const qT="components";function GT(n,t){return YT(qT,n,!0,t)||n}const KT=Symbol.for("v-ndc");function YT(n,t,e=!0,s=!1){const i=rn||Ne;if(i){const r=i.type;{const a=NE(r,!1);if(a&&(a===t||a===mn(t)||a===Ec(mn(t))))return r}const o=eg(i[n]||r[n],t)||eg(i.appContext[n],t);return!o&&s?r:o}}function eg(n,t){return n&&(n[t]||n[mn(t)]||n[Ec(mn(t))])}function kc(n,t,e,s){let i;const r=e,o=gt(n);if(o||de(n)){const a=o&&ur(n);let l=!1,c=!1;a&&(l=!pn(n),c=Js(n),n=Ac(n)),i=new Array(n.length);for(let h=0,d=n.length;h<d;h++)i[h]=t(l?c?Nl(Ie(n[h])):Ie(n[h]):n[h],h,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,r)}else if(Yt(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=t(n[h],h,l,r)}}else i=[];return i}const vh=n=>n?Ab(n)?Oc(n):vh(n.parent):null,Ao=Ge(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>vh(n.parent),$root:n=>vh(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>cb(n),$forceUpdate:n=>n.f||(n.f=()=>{Id(n.update)}),$nextTick:n=>n.n||(n.n=tb.bind(n.proxy)),$watch:n=>_E.bind(n)}),Vu=(n,t)=>n!==Ht&&!n.__isScriptSetup&&Bt(n,t),XT={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(Vu(s,t))return o[t]=1,s[t];if(i!==Ht&&Bt(i,t))return o[t]=2,i[t];if((c=n.propsOptions[0])&&Bt(c,t))return o[t]=3,r[t];if(e!==Ht&&Bt(e,t))return o[t]=4,e[t];wh&&(o[t]=0)}}const h=Ao[t];let d,f;if(h)return t==="$attrs"&&Le(n.attrs,"get",""),h(n);if((d=a.__cssModules)&&(d=d[t]))return d;if(e!==Ht&&Bt(e,t))return o[t]=4,e[t];if(f=l.config.globalProperties,Bt(f,t))return f[t]},set({_:n},t,e){const{data:s,setupState:i,ctx:r}=n;return Vu(i,t)?(i[t]=e,!0):s!==Ht&&Bt(s,t)?(s[t]=e,!0):Bt(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!e[o]||n!==Ht&&Bt(n,o)||Vu(t,o)||(a=r[0])&&Bt(a,o)||Bt(s,o)||Bt(Ao,o)||Bt(i.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:Bt(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function ng(n){return gt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let wh=!0;function QT(n){const t=cb(n),e=n.proxy,s=n.ctx;wh=!1,t.beforeCreate&&sg(t.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:d,mounted:f,beforeUpdate:g,updated:_,activated:b,deactivated:v,beforeDestroy:A,beforeUnmount:C,destroyed:M,unmounted:k,render:D,renderTracked:N,renderTriggered:w,errorCaptured:y,serverPrefetch:x,expose:E,inheritAttrs:I,components:P,directives:S,filters:rt}=t;if(c&&JT(c,s,null),o)for(const ot in o){const H=o[ot];It(H)&&(s[ot]=H.bind(e))}if(i){const ot=i.call(e,e);Yt(ot)&&(n.data=xd(ot))}if(wh=!0,r)for(const ot in r){const H=r[ot],J=It(H)?H.bind(e,e):It(H.get)?H.get.bind(e,e):Vn,Y=!It(H)&&It(H.set)?H.set.bind(e):Vn,ht=Ln({get:J,set:Y});Object.defineProperty(s,ot,{enumerable:!0,configurable:!0,get:()=>ht.value,set:St=>ht.value=St})}if(a)for(const ot in a)lb(a[ot],s,e,ot);if(l){const ot=It(l)?l.call(e):l;Reflect.ownKeys(ot).forEach(H=>{iE(H,ot[H])})}h&&sg(h,n,"c");function dt(ot,H){gt(H)?H.forEach(J=>ot(J.bind(e))):H&&ot(H.bind(e))}if(dt(FT,d),dt(Rr,f),dt(BT,g),dt(UT,_),dt(LT,b),dt(VT,v),dt(WT,y),dt(HT,N),dt(jT,w),dt($T,C),dt(Rc,k),dt(zT,x),gt(E))if(E.length){const ot=n.exposed||(n.exposed={});E.forEach(H=>{Object.defineProperty(ot,H,{get:()=>e[H],set:J=>e[H]=J,enumerable:!0})})}else n.exposed||(n.exposed={});D&&n.render===Vn&&(n.render=D),I!=null&&(n.inheritAttrs=I),P&&(n.components=P),S&&(n.directives=S),x&&rb(n)}function JT(n,t,e=Vn){gt(n)&&(n=xh(n));for(const s in n){const i=n[s];let r;Yt(i)?"default"in i?r=_l(i.from||s,i.default,!0):r=_l(i.from||s):r=_l(i),Ue(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function sg(n,t,e){Wn(gt(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function lb(n,t,e,s){let i=s.includes(".")?xb(e,s):()=>e[s];if(de(n)){const r=t[n];It(r)&&Co(i,r)}else if(It(n))Co(i,n.bind(e));else if(Yt(n))if(gt(n))n.forEach(r=>lb(r,t,e,s));else{const r=It(n.handler)?n.handler.bind(e):t[n.handler];It(r)&&Co(i,r,n)}}function cb(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!e&&!s?l=t:(l={},i.length&&i.forEach(c=>$l(l,c,o,!0)),$l(l,t,o)),Yt(t)&&r.set(t,l),l}function $l(n,t,e,s=!1){const{mixins:i,extends:r}=t;r&&$l(n,r,e,!0),i&&i.forEach(o=>$l(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=ZT[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const ZT={data:ig,props:rg,emits:rg,methods:ho,computed:ho,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:ho,directives:ho,watch:eE,provide:ig,inject:tE};function ig(n,t){return t?n?function(){return Ge(It(n)?n.call(this,this):n,It(t)?t.call(this,this):t)}:t:n}function tE(n,t){return ho(xh(n),xh(t))}function xh(n){if(gt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function He(n,t){return n?[...new Set([].concat(n,t))]:t}function ho(n,t){return n?Ge(Object.create(null),n,t):t}function rg(n,t){return n?gt(n)&&gt(t)?[...new Set([...n,...t])]:Ge(Object.create(null),ng(n),ng(t??{})):t}function eE(n,t){if(!n)return t;if(!t)return n;const e=Ge(Object.create(null),n);for(const s in t)e[s]=He(n[s],t[s]);return e}function ub(){return{app:null,config:{isNativeTag:$x,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nE=0;function sE(n,t){return function(s,i=null){It(s)||(s=Ge({},s)),i!=null&&!Yt(i)&&(i=null);const r=ub(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:nE++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:UE,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&It(h.install)?(o.add(h),h.install(c,...d)):It(h)&&(o.add(h),h(c,...d))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,d){return d?(r.components[h]=d,c):r.components[h]},directive(h,d){return d?(r.directives[h]=d,c):r.directives[h]},mount(h,d,f){if(!l){const g=c._ceVNode||Fe(s,i);return g.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(g,h,f),l=!0,c._container=h,h.__vue_app__=c,Oc(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Wn(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(h,d){return r.provides[h]=d,c},runWithContext(h){const d=dr;dr=c;try{return h()}finally{dr=d}}};return c}}let dr=null;function iE(n,t){if(Ne){let e=Ne.provides;const s=Ne.parent&&Ne.parent.provides;s===e&&(e=Ne.provides=Object.create(s)),e[n]=t}}function _l(n,t,e=!1){const s=DE();if(s||dr){let i=dr?dr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&It(t)?t.call(s&&s.proxy):t}}const hb={},db=()=>Object.create(hb),fb=n=>Object.getPrototypeOf(n)===hb;function rE(n,t,e,s=!1){const i={},r=db();n.propsDefaults=Object.create(null),pb(n,t,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=s?i:vT(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function oE(n,t,e,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,a=Ft(i),[l]=n.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(Dc(n.emitsOptions,f))continue;const g=t[f];if(l)if(Bt(r,f))g!==r[f]&&(r[f]=g,c=!0);else{const _=mn(f);i[_]=Th(l,a,_,g,n,!1)}else g!==r[f]&&(r[f]=g,c=!0)}}}else{pb(n,t,i,r)&&(c=!0);let h;for(const d in a)(!t||!Bt(t,d)&&((h=ji(d))===d||!Bt(t,h)))&&(l?e&&(e[d]!==void 0||e[h]!==void 0)&&(i[d]=Th(l,a,d,void 0,n,!0)):delete i[d]);if(r!==a)for(const d in r)(!t||!Bt(t,d))&&(delete r[d],c=!0)}c&&rs(n.attrs,"set","")}function pb(n,t,e,s){const[i,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(xo(l))continue;const c=t[l];let h;i&&Bt(i,h=mn(l))?!r||!r.includes(h)?e[h]=c:(a||(a={}))[h]=c:Dc(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Ft(e),c=a||Ht;for(let h=0;h<r.length;h++){const d=r[h];e[d]=Th(i,l,d,c[d],n,!Bt(c,d))}}return o}function Th(n,t,e,s,i,r){const o=n[e];if(o!=null){const a=Bt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&It(l)){const{propsDefaults:c}=i;if(e in c)s=c[e];else{const h=da(i);s=c[e]=l.call(null,t),h()}}else s=l;i.ce&&i.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===ji(e))&&(s=!0))}return s}const aE=new WeakMap;function gb(n,t,e=!1){const s=e?aE:t.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},a=[];let l=!1;if(!It(n)){const h=d=>{l=!0;const[f,g]=gb(d,t,!0);Ge(o,f),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!r&&!l)return Yt(n)&&s.set(n,lr),lr;if(gt(r))for(let h=0;h<r.length;h++){const d=mn(r[h]);og(d)&&(o[d]=Ht)}else if(r)for(const h in r){const d=mn(h);if(og(d)){const f=r[h],g=o[d]=gt(f)||It(f)?{type:f}:Ge({},f),_=g.type;let b=!1,v=!0;if(gt(_))for(let A=0;A<_.length;++A){const C=_[A],M=It(C)&&C.name;if(M==="Boolean"){b=!0;break}else M==="String"&&(v=!1)}else b=It(_)&&_.name==="Boolean";g[0]=b,g[1]=v,(b||Bt(g,"default"))&&a.push(d)}}const c=[o,a];return Yt(n)&&s.set(n,c),c}function og(n){return n[0]!=="$"&&!xo(n)}const Ad=n=>n==="_"||n==="__"||n==="_ctx"||n==="$stable",Cd=n=>gt(n)?n.map(Dn):[Dn(n)],lE=(n,t,e)=>{if(t._n)return t;const s=DT((...i)=>Cd(t(...i)),e);return s._c=!1,s},mb=(n,t,e)=>{const s=n._ctx;for(const i in n){if(Ad(i))continue;const r=n[i];if(It(r))t[i]=lE(i,r,s);else if(r!=null){const o=Cd(r);t[i]=()=>o}}},_b=(n,t)=>{const e=Cd(t);n.slots.default=()=>e},yb=(n,t,e)=>{for(const s in t)(e||!Ad(s))&&(n[s]=t[s])},cE=(n,t,e)=>{const s=n.slots=db();if(n.vnode.shapeFlag&32){const i=t.__;i&&gh(s,"__",i,!0);const r=t._;r?(yb(s,t,e),e&&gh(s,"_",r,!0)):mb(t,s)}else t&&_b(n,t)},uE=(n,t,e)=>{const{vnode:s,slots:i}=n;let r=!0,o=Ht;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:yb(i,t,e):(r=!t.$stable,mb(t,i)),o=t}else t&&(_b(n,t),o={default:1});if(r)for(const a in i)!Ad(a)&&o[a]==null&&delete i[a]},en=EE;function hE(n){return dE(n)}function dE(n,t){const e=Ic();e.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:d,nextSibling:f,setScopeId:g=Vn,insertStaticContent:_}=n,b=(R,O,B,W=null,z=null,j=null,tt=void 0,X=null,K=!!O.dynamicChildren)=>{if(R===O)return;R&&!so(R,O)&&(W=Xn(R),St(R,z,j,!0),R=null),O.patchFlag===-2&&(K=!1,O.dynamicChildren=null);const{type:q,ref:lt,shapeFlag:Z}=O;switch(q){case Mc:v(R,O,B,W);break;case Zs:A(R,O,B,W);break;case yl:R==null&&C(O,B,W,tt);break;case sn:P(R,O,B,W,z,j,tt,X,K);break;default:Z&1?D(R,O,B,W,z,j,tt,X,K):Z&6?S(R,O,B,W,z,j,tt,X,K):(Z&64||Z&128)&&q.process(R,O,B,W,z,j,tt,X,K,Sn)}lt!=null&&z?Io(lt,R&&R.ref,j,O||R,!O):lt==null&&R&&R.ref!=null&&Io(R.ref,null,j,R,!0)},v=(R,O,B,W)=>{if(R==null)s(O.el=a(O.children),B,W);else{const z=O.el=R.el;O.children!==R.children&&c(z,O.children)}},A=(R,O,B,W)=>{R==null?s(O.el=l(O.children||""),B,W):O.el=R.el},C=(R,O,B,W)=>{[R.el,R.anchor]=_(R.children,O,B,W,R.el,R.anchor)},M=({el:R,anchor:O},B,W)=>{let z;for(;R&&R!==O;)z=f(R),s(R,B,W),R=z;s(O,B,W)},k=({el:R,anchor:O})=>{let B;for(;R&&R!==O;)B=f(R),i(R),R=B;i(O)},D=(R,O,B,W,z,j,tt,X,K)=>{O.type==="svg"?tt="svg":O.type==="math"&&(tt="mathml"),R==null?N(O,B,W,z,j,tt,X,K):x(R,O,z,j,tt,X,K)},N=(R,O,B,W,z,j,tt,X)=>{let K,q;const{props:lt,shapeFlag:Z,transition:at,dirs:mt}=R;if(K=R.el=o(R.type,j,lt&&lt.is,lt),Z&8?h(K,R.children):Z&16&&y(R.children,K,null,W,z,Nu(R,j),tt,X),mt&&_i(R,null,W,"created"),w(K,R,R.scopeId,tt,W),lt){for(const Tt in lt)Tt!=="value"&&!xo(Tt)&&r(K,Tt,null,lt[Tt],j,W);"value"in lt&&r(K,"value",null,lt.value,j),(q=lt.onVnodeBeforeMount)&&An(q,W,R)}mt&&_i(R,null,W,"beforeMount");const ft=fE(z,at);ft&&at.beforeEnter(K),s(K,O,B),((q=lt&&lt.onVnodeMounted)||ft||mt)&&en(()=>{q&&An(q,W,R),ft&&at.enter(K),mt&&_i(R,null,W,"mounted")},z)},w=(R,O,B,W,z)=>{if(B&&g(R,B),W)for(let j=0;j<W.length;j++)g(R,W[j]);if(z){let j=z.subTree;if(O===j||Eb(j.type)&&(j.ssContent===O||j.ssFallback===O)){const tt=z.vnode;w(R,tt,tt.scopeId,tt.slotScopeIds,z.parent)}}},y=(R,O,B,W,z,j,tt,X,K=0)=>{for(let q=K;q<R.length;q++){const lt=R[q]=X?Ms(R[q]):Dn(R[q]);b(null,lt,O,B,W,z,j,tt,X)}},x=(R,O,B,W,z,j,tt)=>{const X=O.el=R.el;let{patchFlag:K,dynamicChildren:q,dirs:lt}=O;K|=R.patchFlag&16;const Z=R.props||Ht,at=O.props||Ht;let mt;if(B&&yi(B,!1),(mt=at.onVnodeBeforeUpdate)&&An(mt,B,O,R),lt&&_i(O,R,B,"beforeUpdate"),B&&yi(B,!0),(Z.innerHTML&&at.innerHTML==null||Z.textContent&&at.textContent==null)&&h(X,""),q?E(R.dynamicChildren,q,X,B,W,Nu(O,z),j):tt||H(R,O,X,null,B,W,Nu(O,z),j,!1),K>0){if(K&16)I(X,Z,at,B,z);else if(K&2&&Z.class!==at.class&&r(X,"class",null,at.class,z),K&4&&r(X,"style",Z.style,at.style,z),K&8){const ft=O.dynamicProps;for(let Tt=0;Tt<ft.length;Tt++){const Mt=ft[Tt],ve=Z[Mt],we=at[Mt];(we!==ve||Mt==="value")&&r(X,Mt,ve,we,z,B)}}K&1&&R.children!==O.children&&h(X,O.children)}else!tt&&q==null&&I(X,Z,at,B,z);((mt=at.onVnodeUpdated)||lt)&&en(()=>{mt&&An(mt,B,O,R),lt&&_i(O,R,B,"updated")},W)},E=(R,O,B,W,z,j,tt)=>{for(let X=0;X<O.length;X++){const K=R[X],q=O[X],lt=K.el&&(K.type===sn||!so(K,q)||K.shapeFlag&198)?d(K.el):B;b(K,q,lt,null,W,z,j,tt,!0)}},I=(R,O,B,W,z)=>{if(O!==B){if(O!==Ht)for(const j in O)!xo(j)&&!(j in B)&&r(R,j,O[j],null,z,W);for(const j in B){if(xo(j))continue;const tt=B[j],X=O[j];tt!==X&&j!=="value"&&r(R,j,X,tt,z,W)}"value"in B&&r(R,"value",O.value,B.value,z)}},P=(R,O,B,W,z,j,tt,X,K)=>{const q=O.el=R?R.el:a(""),lt=O.anchor=R?R.anchor:a("");let{patchFlag:Z,dynamicChildren:at,slotScopeIds:mt}=O;mt&&(X=X?X.concat(mt):mt),R==null?(s(q,B,W),s(lt,B,W),y(O.children||[],B,lt,z,j,tt,X,K)):Z>0&&Z&64&&at&&R.dynamicChildren?(E(R.dynamicChildren,at,B,z,j,tt,X),(O.key!=null||z&&O===z.subTree)&&bb(R,O,!0)):H(R,O,B,lt,z,j,tt,X,K)},S=(R,O,B,W,z,j,tt,X,K)=>{O.slotScopeIds=X,R==null?O.shapeFlag&512?z.ctx.activate(O,B,W,tt,K):rt(O,B,W,z,j,tt,K):it(R,O,K)},rt=(R,O,B,W,z,j,tt)=>{const X=R.component=kE(R,W,z);if(ob(R)&&(X.ctx.renderer=Sn),ME(X,!1,tt),X.asyncDep){if(z&&z.registerDep(X,dt,tt),!R.el){const K=X.subTree=Fe(Zs);A(null,K,O,B),R.placeholder=K.el}}else dt(X,R,O,B,z,j,tt)},it=(R,O,B)=>{const W=O.component=R.component;if(xE(R,O,B))if(W.asyncDep&&!W.asyncResolved){ot(W,O,B);return}else W.next=O,W.update();else O.el=R.el,W.vnode=O},dt=(R,O,B,W,z,j,tt)=>{const X=()=>{if(R.isMounted){let{next:Z,bu:at,u:mt,parent:ft,vnode:Tt}=R;{const Ce=vb(R);if(Ce){Z&&(Z.el=Tt.el,ot(R,Z,tt)),Ce.asyncDep.then(()=>{R.isUnmounted||X()});return}}let Mt=Z,ve;yi(R,!1),Z?(Z.el=Tt.el,ot(R,Z,tt)):Z=Tt,at&&ml(at),(ve=Z.props&&Z.props.onVnodeBeforeUpdate)&&An(ve,ft,Z,Tt),yi(R,!0);const we=lg(R),cn=R.subTree;R.subTree=we,b(cn,we,d(cn.el),Xn(cn),R,z,j),Z.el=we.el,Mt===null&&TE(R,we.el),mt&&en(mt,z),(ve=Z.props&&Z.props.onVnodeUpdated)&&en(()=>An(ve,ft,Z,Tt),z)}else{let Z;const{el:at,props:mt}=O,{bm:ft,m:Tt,parent:Mt,root:ve,type:we}=R,cn=So(O);yi(R,!1),ft&&ml(ft),!cn&&(Z=mt&&mt.onVnodeBeforeMount)&&An(Z,Mt,O),yi(R,!0);{ve.ce&&ve.ce._def.shadowRoot!==!1&&ve.ce._injectChildStyle(we);const Ce=R.subTree=lg(R);b(null,Ce,B,W,R,z,j),O.el=Ce.el}if(Tt&&en(Tt,z),!cn&&(Z=mt&&mt.onVnodeMounted)){const Ce=O;en(()=>An(Z,Mt,Ce),z)}(O.shapeFlag&256||Mt&&So(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&R.a&&en(R.a,z),R.isMounted=!0,O=B=W=null}};R.scope.on();const K=R.effect=new Ny(X);R.scope.off();const q=R.update=K.run.bind(K),lt=R.job=K.runIfDirty.bind(K);lt.i=R,lt.id=R.uid,K.scheduler=()=>Id(lt),yi(R,!0),q()},ot=(R,O,B)=>{O.component=R;const W=R.vnode.props;R.vnode=O,R.next=null,oE(R,O.props,W,B),uE(R,O.children,B),fs(),tg(R),ps()},H=(R,O,B,W,z,j,tt,X,K=!1)=>{const q=R&&R.children,lt=R?R.shapeFlag:0,Z=O.children,{patchFlag:at,shapeFlag:mt}=O;if(at>0){if(at&128){Y(q,Z,B,W,z,j,tt,X,K);return}else if(at&256){J(q,Z,B,W,z,j,tt,X,K);return}}mt&8?(lt&16&&oe(q,z,j),Z!==q&&h(B,Z)):lt&16?mt&16?Y(q,Z,B,W,z,j,tt,X,K):oe(q,z,j,!0):(lt&8&&h(B,""),mt&16&&y(Z,B,W,z,j,tt,X,K))},J=(R,O,B,W,z,j,tt,X,K)=>{R=R||lr,O=O||lr;const q=R.length,lt=O.length,Z=Math.min(q,lt);let at;for(at=0;at<Z;at++){const mt=O[at]=K?Ms(O[at]):Dn(O[at]);b(R[at],mt,B,null,z,j,tt,X,K)}q>lt?oe(R,z,j,!0,!1,Z):y(O,B,W,z,j,tt,X,K,Z)},Y=(R,O,B,W,z,j,tt,X,K)=>{let q=0;const lt=O.length;let Z=R.length-1,at=lt-1;for(;q<=Z&&q<=at;){const mt=R[q],ft=O[q]=K?Ms(O[q]):Dn(O[q]);if(so(mt,ft))b(mt,ft,B,null,z,j,tt,X,K);else break;q++}for(;q<=Z&&q<=at;){const mt=R[Z],ft=O[at]=K?Ms(O[at]):Dn(O[at]);if(so(mt,ft))b(mt,ft,B,null,z,j,tt,X,K);else break;Z--,at--}if(q>Z){if(q<=at){const mt=at+1,ft=mt<lt?O[mt].el:W;for(;q<=at;)b(null,O[q]=K?Ms(O[q]):Dn(O[q]),B,ft,z,j,tt,X,K),q++}}else if(q>at)for(;q<=Z;)St(R[q],z,j,!0),q++;else{const mt=q,ft=q,Tt=new Map;for(q=ft;q<=at;q++){const xe=O[q]=K?Ms(O[q]):Dn(O[q]);xe.key!=null&&Tt.set(xe.key,q)}let Mt,ve=0;const we=at-ft+1;let cn=!1,Ce=0;const Is=new Array(we);for(q=0;q<we;q++)Is[q]=0;for(q=mt;q<=Z;q++){const xe=R[q];if(ve>=we){St(xe,z,j,!0);continue}let un;if(xe.key!=null)un=Tt.get(xe.key);else for(Mt=ft;Mt<=at;Mt++)if(Is[Mt-ft]===0&&so(xe,O[Mt])){un=Mt;break}un===void 0?St(xe,z,j,!0):(Is[un-ft]=q+1,un>=Ce?Ce=un:cn=!0,b(xe,O[un],B,null,z,j,tt,X,K),ve++)}const jr=cn?pE(Is):lr;for(Mt=jr.length-1,q=we-1;q>=0;q--){const xe=ft+q,un=O[xe],ka=O[xe+1],Ki=xe+1<lt?ka.el||ka.placeholder:W;Is[q]===0?b(null,un,B,Ki,z,j,tt,X,K):cn&&(Mt<0||q!==jr[Mt]?ht(un,B,Ki,2):Mt--)}}},ht=(R,O,B,W,z=null)=>{const{el:j,type:tt,transition:X,children:K,shapeFlag:q}=R;if(q&6){ht(R.component.subTree,O,B,W);return}if(q&128){R.suspense.move(O,B,W);return}if(q&64){tt.move(R,O,B,Sn);return}if(tt===sn){s(j,O,B);for(let Z=0;Z<K.length;Z++)ht(K[Z],O,B,W);s(R.anchor,O,B);return}if(tt===yl){M(R,O,B);return}if(W!==2&&q&1&&X)if(W===0)X.beforeEnter(j),s(j,O,B),en(()=>X.enter(j),z);else{const{leave:Z,delayLeave:at,afterLeave:mt}=X,ft=()=>{R.ctx.isUnmounted?i(j):s(j,O,B)},Tt=()=>{Z(j,()=>{ft(),mt&&mt()})};at?at(j,ft,Tt):Tt()}else s(j,O,B)},St=(R,O,B,W=!1,z=!1)=>{const{type:j,props:tt,ref:X,children:K,dynamicChildren:q,shapeFlag:lt,patchFlag:Z,dirs:at,cacheIndex:mt}=R;if(Z===-2&&(z=!1),X!=null&&(fs(),Io(X,null,B,R,!0),ps()),mt!=null&&(O.renderCache[mt]=void 0),lt&256){O.ctx.deactivate(R);return}const ft=lt&1&&at,Tt=!So(R);let Mt;if(Tt&&(Mt=tt&&tt.onVnodeBeforeUnmount)&&An(Mt,O,R),lt&6)be(R.component,B,W);else{if(lt&128){R.suspense.unmount(B,W);return}ft&&_i(R,null,O,"beforeUnmount"),lt&64?R.type.remove(R,O,B,Sn,W):q&&!q.hasOnce&&(j!==sn||Z>0&&Z&64)?oe(q,O,B,!1,!0):(j===sn&&Z&384||!z&&lt&16)&&oe(K,O,B),W&&yt(R)}(Tt&&(Mt=tt&&tt.onVnodeUnmounted)||ft)&&en(()=>{Mt&&An(Mt,O,R),ft&&_i(R,null,O,"unmounted")},B)},yt=R=>{const{type:O,el:B,anchor:W,transition:z}=R;if(O===sn){Nt(B,W);return}if(O===yl){k(R);return}const j=()=>{i(B),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(R.shapeFlag&1&&z&&!z.persisted){const{leave:tt,delayLeave:X}=z,K=()=>tt(B,j);X?X(R.el,j,K):K()}else j()},Nt=(R,O)=>{let B;for(;R!==O;)B=f(R),i(R),R=B;i(O)},be=(R,O,B)=>{const{bum:W,scope:z,job:j,subTree:tt,um:X,m:K,a:q,parent:lt,slots:{__:Z}}=R;ag(K),ag(q),W&&ml(W),lt&&gt(Z)&&Z.forEach(at=>{lt.renderCache[at]=void 0}),z.stop(),j&&(j.flags|=8,St(tt,R,O,B)),X&&en(X,O),en(()=>{R.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},oe=(R,O,B,W=!1,z=!1,j=0)=>{for(let tt=j;tt<R.length;tt++)St(R[tt],O,B,W,z)},Xn=R=>{if(R.shapeFlag&6)return Xn(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const O=f(R.anchor||R.el),B=O&&O[MT];return B?f(B):O};let $r=!1;const Ra=(R,O,B)=>{R==null?O._vnode&&St(O._vnode,null,null,!0):b(O._vnode||null,R,O,null,null,null,B),O._vnode=R,$r||($r=!0,tg(),nb(),$r=!1)},Sn={p:b,um:St,m:ht,r:yt,mt:rt,mc:y,pc:H,pbc:E,n:Xn,o:n};return{render:Ra,hydrate:void 0,createApp:sE(Ra)}}function Nu({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function yi({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function fE(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function bb(n,t,e=!1){const s=n.children,i=t.children;if(gt(s)&&gt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ms(i[r]),a.el=o.el),!e&&a.patchFlag!==-2&&bb(o,a)),a.type===Mc&&(a.el=o.el),a.type===Zs&&!a.el&&(a.el=o.el)}}function pE(n){const t=n.slice(),e=[0];let s,i,r,o,a;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(i=e[e.length-1],n[i]<c){t[s]=i,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<c?r=a+1:o=a;c<n[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function vb(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:vb(t)}function ag(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const gE=Symbol.for("v-scx"),mE=()=>_l(gE);function Co(n,t,e){return wb(n,t,e)}function wb(n,t,e=Ht){const{immediate:s,deep:i,flush:r,once:o}=e,a=Ge({},e),l=t&&s||!t&&r!=="post";let c;if(Wo){if(r==="sync"){const g=mE();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Vn,g.resume=Vn,g.pause=Vn,g}}const h=Ne;a.call=(g,_,b)=>Wn(g,h,_,b);let d=!1;r==="post"?a.scheduler=g=>{en(g,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,_)=>{_?g():Id(g)}),a.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const f=CT(n,t,a);return Wo&&(c?c.push(f):l&&f()),f}function _E(n,t,e){const s=this.proxy,i=de(n)?n.includes(".")?xb(s,n):()=>s[n]:n.bind(s,s);let r;It(t)?r=t:(r=t.handler,e=t);const o=da(this),a=wb(i,r.bind(s),e);return o(),a}function xb(n,t){const e=t.split(".");return()=>{let s=n;for(let i=0;i<e.length&&s;i++)s=s[e[i]];return s}}const yE=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${mn(t)}Modifiers`]||n[`${ji(t)}Modifiers`];function bE(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||Ht;let i=e;const r=t.startsWith("update:"),o=r&&yE(s,t.slice(7));o&&(o.trim&&(i=e.map(h=>de(h)?h.trim():h)),o.number&&(i=e.map(Vl)));let a,l=s[a=ku(t)]||s[a=ku(mn(t))];!l&&r&&(l=s[a=ku(ji(t))]),l&&Wn(l,n,6,i);const c=s[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Wn(c,n,6,i)}}function Tb(n,t,e=!1){const s=t.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},a=!1;if(!It(n)){const l=c=>{const h=Tb(c,t,!0);h&&(a=!0,Ge(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Yt(n)&&s.set(n,null),null):(gt(r)?r.forEach(l=>o[l]=null):Ge(o,r),Yt(n)&&s.set(n,o),o)}function Dc(n,t){return!n||!wc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Bt(n,t[0].toLowerCase()+t.slice(1))||Bt(n,ji(t))||Bt(n,t))}function lg(n){const{type:t,vnode:e,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:d,data:f,setupState:g,ctx:_,inheritAttrs:b}=n,v=Ul(n);let A,C;try{if(e.shapeFlag&4){const k=i||s,D=k;A=Dn(c.call(D,k,h,d,g,f,_)),C=a}else{const k=t;A=Dn(k.length>1?k(d,{attrs:a,slots:o,emit:l}):k(d,null)),C=t.props?a:vE(a)}}catch(k){Po.length=0,Cc(k,n,1),A=Fe(Zs)}let M=A;if(C&&b!==!1){const k=Object.keys(C),{shapeFlag:D}=M;k.length&&D&7&&(r&&k.some(fd)&&(C=wE(C,r)),M=br(M,C,!1,!0))}return e.dirs&&(M=br(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(e.dirs):e.dirs),e.transition&&Sd(M,e.transition),A=M,Ul(v),A}const vE=n=>{let t;for(const e in n)(e==="class"||e==="style"||wc(e))&&((t||(t={}))[e]=n[e]);return t},wE=(n,t)=>{const e={};for(const s in n)(!fd(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function xE(n,t,e){const{props:s,children:i,component:r}=n,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?cg(s,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==s[f]&&!Dc(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?cg(s,o,c):!0:!!o;return!1}function cg(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==n[r]&&!Dc(e,r))return!0}return!1}function TE({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const Eb=n=>n.__isSuspense;function EE(n,t){t&&t.pendingBranch?gt(n)?t.effects.push(...n):t.effects.push(n):kT(n)}const sn=Symbol.for("v-fgt"),Mc=Symbol.for("v-txt"),Zs=Symbol.for("v-cmt"),yl=Symbol.for("v-stc"),Po=[];let on=null;function st(n=!1){Po.push(on=n?null:[])}function IE(){Po.pop(),on=Po[Po.length-1]||null}let Ho=1;function ug(n,t=!1){Ho+=n,n<0&&on&&t&&(on.hasOnce=!0)}function Ib(n){return n.dynamicChildren=Ho>0?on||lr:null,IE(),Ho>0&&on&&on.push(n),n}function ct(n,t,e,s,i,r){return Ib(L(n,t,e,s,i,r,!0))}function bn(n,t,e,s,i){return Ib(Fe(n,t,e,s,i,!0))}function zl(n){return n?n.__v_isVNode===!0:!1}function so(n,t){return n.type===t.type&&n.key===t.key}const Sb=({key:n})=>n??null,bl=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?de(n)||Ue(n)||It(n)?{i:rn,r:n,k:t,f:!!e}:n:null);function L(n,t=null,e=null,s=0,i=null,r=n===sn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Sb(t),ref:t&&bl(t),scopeId:ib,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rn};return a?(Pd(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=de(e)?8:16),Ho>0&&!o&&on&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&on.push(l),l}const Fe=SE;function SE(n,t=null,e=null,s=0,i=null,r=!1){if((!n||n===KT)&&(n=Zs),zl(n)){const a=br(n,t,!0);return e&&Pd(a,e),Ho>0&&!r&&on&&(a.shapeFlag&6?on[on.indexOf(n)]=a:on.push(a)),a.patchFlag=-2,a}if(FE(n)&&(n=n.__vccOpts),t){t=AE(t);let{class:a,style:l}=t;a&&!de(a)&&(t.class=G(a)),Yt(l)&&(Ed(l)&&!gt(l)&&(l=Ge({},l)),t.style=md(l))}const o=de(n)?1:Eb(n)?128:OT(n)?64:Yt(n)?4:It(n)?2:0;return L(n,t,e,s,i,o,r,!0)}function AE(n){return n?Ed(n)||fb(n)?Ge({},n):n:null}function br(n,t,e=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=n,c=t?CE(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&Sb(c),ref:t&&t.ref?e&&r?gt(r)?r.concat(bl(t)):[r,bl(t)]:bl(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==sn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&br(n.ssContent),ssFallback:n.ssFallback&&br(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&Sd(h,l.clone(h)),h}function vn(n=" ",t=0){return Fe(Mc,null,n,t)}function hg(n,t){const e=Fe(yl,null,n);return e.staticCount=t,e}function fe(n="",t=!1){return t?(st(),bn(Zs,null,n)):Fe(Zs,null,n)}function Dn(n){return n==null||typeof n=="boolean"?Fe(Zs):gt(n)?Fe(sn,null,n.slice()):zl(n)?Ms(n):Fe(Mc,null,String(n))}function Ms(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:br(n)}function Pd(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(gt(t))e=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Pd(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!fb(t)?t._ctx=rn:i===3&&rn&&(rn.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else It(t)?(t={default:t,_ctx:rn},e=32):(t=String(t),s&64?(e=16,t=[vn(t)]):e=8);n.children=t,n.shapeFlag|=e}function CE(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=G([t.class,s.class]));else if(i==="style")t.style=md([t.style,s.style]);else if(wc(i)){const r=t[i],o=s[i];o&&r!==o&&!(gt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function An(n,t,e,s=null){Wn(n,t,7,[e,s])}const PE=ub();let RE=0;function kE(n,t,e){const s=n.type,i=(t?t.appContext:n.appContext)||PE,r={uid:RE++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new tT(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gb(s,i),emitsOptions:Tb(s,i),emit:null,emitted:null,propsDefaults:Ht,inheritAttrs:s.inheritAttrs,ctx:Ht,data:Ht,props:Ht,attrs:Ht,slots:Ht,refs:Ht,setupState:Ht,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=bE.bind(null,r),n.ce&&n.ce(r),r}let Ne=null;const DE=()=>Ne||rn;let jl,Eh;{const n=Ic(),t=(e,s)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};jl=t("__VUE_INSTANCE_SETTERS__",e=>Ne=e),Eh=t("__VUE_SSR_SETTERS__",e=>Wo=e)}const da=n=>{const t=Ne;return jl(n),n.scope.on(),()=>{n.scope.off(),jl(t)}},dg=()=>{Ne&&Ne.scope.off(),jl(null)};function Ab(n){return n.vnode.shapeFlag&4}let Wo=!1;function ME(n,t=!1,e=!1){t&&Eh(t);const{props:s,children:i}=n.vnode,r=Ab(n);rE(n,s,r,t),cE(n,i,e||t);const o=r?OE(n,t):void 0;return t&&Eh(!1),o}function OE(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,XT);const{setup:s}=e;if(s){fs();const i=n.setupContext=s.length>1?VE(n):null,r=da(n),o=ha(s,n,0,[n.props,i]),a=ky(o);if(ps(),r(),(a||n.sp)&&!So(n)&&rb(n),a){if(o.then(dg,dg),t)return o.then(l=>{fg(n,l)}).catch(l=>{Cc(l,n,0)});n.asyncDep=o}else fg(n,o)}else Cb(n)}function fg(n,t,e){It(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Yt(t)&&(n.setupState=Jy(t)),Cb(n)}function Cb(n,t,e){const s=n.type;n.render||(n.render=s.render||Vn);{const i=da(n);fs();try{QT(n)}finally{ps(),i()}}}const LE={get(n,t){return Le(n,"get",""),n[t]}};function VE(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,LE),slots:n.slots,emit:n.emit,expose:t}}function Oc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Jy(wT(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ao)return Ao[e](n)},has(t,e){return e in t||e in Ao}})):n.proxy}function NE(n,t=!0){return It(n)?n.displayName||n.name:n.name||t&&n.__name}function FE(n){return It(n)&&"__vccOpts"in n}const Ln=(n,t)=>ST(n,t,Wo);function BE(n,t,e){const s=arguments.length;return s===2?Yt(t)&&!gt(t)?zl(t)?Fe(n,null,[t]):Fe(n,t):Fe(n,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&zl(e)&&(e=[e]),Fe(n,t,e))}const UE="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ih;const pg=typeof window<"u"&&window.trustedTypes;if(pg)try{Ih=pg.createPolicy("vue",{createHTML:n=>n})}catch{}const Pb=Ih?n=>Ih.createHTML(n):n=>n,$E="http://www.w3.org/2000/svg",zE="http://www.w3.org/1998/Math/MathML",ss=typeof document<"u"?document:null,gg=ss&&ss.createElement("template"),jE={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const i=t==="svg"?ss.createElementNS($E,n):t==="mathml"?ss.createElementNS(zE,n):e?ss.createElement(n,{is:e}):ss.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>ss.createTextNode(n),createComment:n=>ss.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ss.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{gg.innerHTML=Pb(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=gg.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},HE=Symbol("_vtc");function WE(n,t,e){const s=n[HE];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const mg=Symbol("_vod"),qE=Symbol("_vsh"),GE=Symbol(""),KE=/(^|;)\s*display\s*:/;function YE(n,t,e){const s=n.style,i=de(e);let r=!1;if(e&&!i){if(t)if(de(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&vl(s,a,"")}else for(const o in t)e[o]==null&&vl(s,o,"");for(const o in e)o==="display"&&(r=!0),vl(s,o,e[o])}else if(i){if(t!==e){const o=s[GE];o&&(e+=";"+o),s.cssText=e,r=KE.test(e)}}else t&&n.removeAttribute("style");mg in n&&(n[mg]=r?s.display:"",n[qE]&&(s.display="none"))}const _g=/\s*!important$/;function vl(n,t,e){if(gt(e))e.forEach(s=>vl(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=XE(n,t);_g.test(e)?n.setProperty(ji(s),e.replace(_g,""),"important"):n[s]=e}}const yg=["Webkit","Moz","ms"],Fu={};function XE(n,t){const e=Fu[t];if(e)return e;let s=mn(t);if(s!=="filter"&&s in n)return Fu[t]=s;s=Ec(s);for(let i=0;i<yg.length;i++){const r=yg[i]+s;if(r in n)return Fu[t]=r}return t}const bg="http://www.w3.org/1999/xlink";function vg(n,t,e,s,i,r=Qx(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(bg,t.slice(6,t.length)):n.setAttributeNS(bg,t,e):e==null||r&&!Oy(e)?n.removeAttribute(t):n.setAttribute(t,r?"":Hn(e)?String(e):e)}function wg(n,t,e,s,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Pb(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=Oy(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(i||t)}function Ai(n,t,e,s){n.addEventListener(t,e,s)}function QE(n,t,e,s){n.removeEventListener(t,e,s)}const xg=Symbol("_vei");function JE(n,t,e,s,i=null){const r=n[xg]||(n[xg]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=ZE(t);if(s){const c=r[t]=nI(s,i);Ai(n,a,c,l)}else o&&(QE(n,a,o,l),r[t]=void 0)}}const Tg=/(?:Once|Passive|Capture)$/;function ZE(n){let t;if(Tg.test(n)){t={};let s;for(;s=n.match(Tg);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):ji(n.slice(2)),t]}let Bu=0;const tI=Promise.resolve(),eI=()=>Bu||(tI.then(()=>Bu=0),Bu=Date.now());function nI(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Wn(sI(s,e.value),t,5,[s])};return e.value=n,e.attached=eI(),e}function sI(n,t){if(gt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Eg=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,iI=(n,t,e,s,i,r)=>{const o=i==="svg";t==="class"?WE(n,s,o):t==="style"?YE(n,e,s):wc(t)?fd(t)||JE(n,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rI(n,t,s,o))?(wg(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&vg(n,t,s,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!de(s))?wg(n,mn(t),s,r,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),vg(n,t,s,o))};function rI(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&Eg(t)&&It(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Eg(t)&&de(e)?!1:t in n}const Hl=n=>{const t=n.props["onUpdate:modelValue"]||!1;return gt(t)?e=>ml(t,e):t};function oI(n){n.target.composing=!0}function Ig(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fr=Symbol("_assign"),aI={created(n,{modifiers:{lazy:t,trim:e,number:s}},i){n[fr]=Hl(i);const r=s||i.props&&i.props.type==="number";Ai(n,t?"change":"input",o=>{if(o.target.composing)return;let a=n.value;e&&(a=a.trim()),r&&(a=Vl(a)),n[fr](a)}),e&&Ai(n,"change",()=>{n.value=n.value.trim()}),t||(Ai(n,"compositionstart",oI),Ai(n,"compositionend",Ig),Ai(n,"change",Ig))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:i,number:r}},o){if(n[fr]=Hl(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?Vl(n.value):n.value,l=t??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||i&&n.value.trim()===l)||(n.value=l))}},Xa={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const i=xc(t);Ai(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>e?Vl(Wl(o)):Wl(o));n[fr](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,tb(()=>{n._assigning=!1})}),n[fr]=Hl(s)},mounted(n,{value:t}){Sg(n,t)},beforeUpdate(n,t,e){n[fr]=Hl(e)},updated(n,{value:t}){n._assigning||Sg(n,t)}};function Sg(n,t){const e=n.multiple,s=gt(t);if(!(e&&!s&&!xc(t))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],a=Wl(o);if(e)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=Zx(t,a)>-1}else o.selected=t.has(a);else if(Sc(Wl(o),t)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Wl(n){return"_value"in n?n._value:n.value}const lI=["ctrl","shift","alt","meta"],cI={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>lI.some(e=>n[`${e}Key`]&&!t.includes(e))},Rb=(n,t)=>{const e=n._withMods||(n._withMods={}),s=t.join(".");return e[s]||(e[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=cI[t[o]];if(a&&a(i,t))return}return n(i,...r)})},uI=Ge({patchProp:iI},jE);let Ag;function hI(){return Ag||(Ag=hE(uI))}const dI=(...n)=>{const t=hI().createApp(...n),{mount:e}=t;return t.mount=s=>{const i=pI(s);if(!i)return;const r=t._component;!It(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,fI(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function fI(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function pI(n){return de(n)?document.querySelector(n):n}const gI=()=>{};var Cg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},mI=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const i=n[e++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=n[e++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=n[e++],o=n[e++],a=n[e++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const r=n[e++],o=n[e++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Db={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const r=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),s.push(e[h],e[d],e[f],e[g])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(kb(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):mI(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const r=e[n.charAt(i++)],a=i<n.length?e[n.charAt(i)]:0;++i;const c=i<n.length?e[n.charAt(i)]:64;++i;const d=i<n.length?e[n.charAt(i)]:64;if(++i,r==null||a==null||c==null||d==null)throw new _I;const f=r<<2|a>>4;if(s.push(f),c!==64){const g=a<<4&240|c>>2;if(s.push(g),d!==64){const _=c<<6&192|d;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _I extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yI=function(n){const t=kb(n);return Db.encodeByteArray(t,!0)},ql=function(n){return yI(n).replace(/\./g,"")},Mb=function(n){try{return Db.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=()=>bI().__FIREBASE_DEFAULTS__,wI=()=>{if(typeof process>"u"||typeof Cg>"u")return;const n=Cg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Mb(n[1]);return t&&JSON.parse(t)},Lc=()=>{try{return gI()||vI()||wI()||xI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ob=n=>Lc()?.emulatorHosts?.[n],TI=n=>{const t=Ob(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},Lb=()=>Lc()?.config,Vb=n=>Lc()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",i=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ql(JSON.stringify(e)),ql(JSON.stringify(o)),""].join(".")}const Ro={};function SI(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ro))Ro[t]?n.emulator.push(t):n.prod.push(t);return n}function AI(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Pg=!1;function Fb(n,t){if(typeof window>"u"||typeof document>"u"||!kr(window.location.host)||Ro[n]===t||Ro[n]||Pg)return;Ro[n]=t;function e(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=SI().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Pg=!0,o()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=AI(s),g=e("text"),_=document.getElementById(g)||document.createElement("span"),b=e("learnmore"),v=document.getElementById(b)||document.createElement("a"),A=e("preprendIcon"),C=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const M=f.element;a(M),h(v,b);const k=c();l(C,A),M.append(C,_,v,k),document.body.appendChild(M)}r?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function PI(){const n=Lc()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function DI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MI(){const n=$e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OI(){return!PI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LI(){try{return typeof indexedDB=="object"}catch{return!1}}function VI(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="FirebaseError";class xs extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=NI,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fa.prototype.create)}}class fa{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?FI(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new xs(i,a,s)}}function FI(n,t){return n.replace(BI,(e,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const BI=/\{\$([^}]+)}/g;function UI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Li(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const i of e){if(!s.includes(i))return!1;const r=n[i],o=t[i];if(Rg(r)&&Rg(o)){if(!Li(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!e.includes(i))return!1;return!0}function Rg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n){const t=[];for(const[e,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function $I(n,t){const e=new zI(n,t);return e.subscribe.bind(e)}class zI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,s){let i;if(t===void 0&&e===void 0&&s===void 0)throw new Error("Missing Observer.");jI(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:s},i.next===void 0&&(i.next=Uu),i.error===void 0&&(i.error=Uu),i.complete===void 0&&(i.complete=Uu);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jI(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Uu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n){return n&&n._delegate?n._delegate:n}class Vi{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new EI;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qI(t))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Ei){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ei){return this.instances.has(t)}getOptions(t=Ei){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,e){const s=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(s)??new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const i of s)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:WI(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ei){return this.component?this.component.multipleInstances?t:Ei:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WI(n){return n===Ei?void 0:n}function qI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new HI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const KI={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},YI=Pt.INFO,XI={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},QI=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),i=XI[t];if(i)console[i](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Rd{constructor(t){this.name=t,this._logLevel=YI,this._logHandler=QI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const JI=(n,t)=>t.some(e=>n instanceof e);let kg,Dg;function ZI(){return kg||(kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tS(){return Dg||(Dg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bb=new WeakMap,Sh=new WeakMap,Ub=new WeakMap,$u=new WeakMap,kd=new WeakMap;function eS(n){const t=new Promise((e,s)=>{const i=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{e(Hs(n.result)),i()},o=()=>{s(n.error),i()};n.addEventListener("success",r),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Bb.set(e,n)}).catch(()=>{}),kd.set(t,n),t}function nS(n){if(Sh.has(n))return;const t=new Promise((e,s)=>{const i=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{e(),i()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});Sh.set(n,t)}let Ah={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Sh.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ub.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Hs(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function sS(n){Ah=n(Ah)}function iS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(zu(this),t,...e);return Ub.set(s,t.sort?t.sort():[t]),Hs(s)}:tS().includes(n)?function(...t){return n.apply(zu(this),t),Hs(Bb.get(this))}:function(...t){return Hs(n.apply(zu(this),t))}}function rS(n){return typeof n=="function"?iS(n):(n instanceof IDBTransaction&&nS(n),JI(n,ZI())?new Proxy(n,Ah):n)}function Hs(n){if(n instanceof IDBRequest)return eS(n);if($u.has(n))return $u.get(n);const t=rS(n);return t!==n&&($u.set(n,t),kd.set(t,n)),t}const zu=n=>kd.get(n);function oS(n,t,{blocked:e,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(n,t),a=Hs(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Hs(o.result),l.oldVersion,l.newVersion,Hs(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aS=["get","getKey","getAll","getAllKeys","count"],lS=["put","add","delete","clear"],ju=new Map;function Mg(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(ju.get(t))return ju.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,i=lS.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(i||aS.includes(e)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[e](...a),i&&l.done]))[0]};return ju.set(t,r),r}sS(n=>({...n,get:(t,e,s)=>Mg(t,e)||n.get(t,e,s),has:(t,e)=>!!Mg(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(uS(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function uS(n){return n.getComponent()?.type==="VERSION"}const Ch="@firebase/app",Og="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Rd("@firebase/app"),hS="@firebase/app-compat",dS="@firebase/analytics-compat",fS="@firebase/analytics",pS="@firebase/app-check-compat",gS="@firebase/app-check",mS="@firebase/auth",_S="@firebase/auth-compat",yS="@firebase/database",bS="@firebase/data-connect",vS="@firebase/database-compat",wS="@firebase/functions",xS="@firebase/functions-compat",TS="@firebase/installations",ES="@firebase/installations-compat",IS="@firebase/messaging",SS="@firebase/messaging-compat",AS="@firebase/performance",CS="@firebase/performance-compat",PS="@firebase/remote-config",RS="@firebase/remote-config-compat",kS="@firebase/storage",DS="@firebase/storage-compat",MS="@firebase/firestore",OS="@firebase/ai",LS="@firebase/firestore-compat",VS="firebase",NS="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",FS={[Ch]:"fire-core",[hS]:"fire-core-compat",[fS]:"fire-analytics",[dS]:"fire-analytics-compat",[gS]:"fire-app-check",[pS]:"fire-app-check-compat",[mS]:"fire-auth",[_S]:"fire-auth-compat",[yS]:"fire-rtdb",[bS]:"fire-data-connect",[vS]:"fire-rtdb-compat",[wS]:"fire-fn",[xS]:"fire-fn-compat",[TS]:"fire-iid",[ES]:"fire-iid-compat",[IS]:"fire-fcm",[SS]:"fire-fcm-compat",[AS]:"fire-perf",[CS]:"fire-perf-compat",[PS]:"fire-rc",[RS]:"fire-rc-compat",[kS]:"fire-gcs",[DS]:"fire-gcs-compat",[MS]:"fire-fst",[LS]:"fire-fst-compat",[OS]:"fire-vertex","fire-js":"fire-js",[VS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Map,BS=new Map,Rh=new Map;function Lg(n,t){try{n.container.addComponent(t)}catch(e){gs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function vr(n){const t=n.name;if(Rh.has(t))return gs.debug(`There were multiple attempts to register component ${t}.`),!1;Rh.set(t,n);for(const e of Gl.values())Lg(e,n);for(const e of BS.values())Lg(e,n);return!0}function Dd(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function dn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new fa("app","Firebase",US);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,e,s){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=NS;function $b(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s={name:Ph,automaticDataCollectionEnabled:!0,...t},i=s.name;if(typeof i!="string"||!i)throw Ws.create("bad-app-name",{appName:String(i)});if(e||(e=Lb()),!e)throw Ws.create("no-options");const r=Gl.get(i);if(r){if(Li(e,r.options)&&Li(s,r.config))return r;throw Ws.create("duplicate-app",{appName:i})}const o=new GI(i);for(const l of Rh.values())o.addComponent(l);const a=new $S(e,s,o);return Gl.set(i,a),a}function zb(n=Ph){const t=Gl.get(n);if(!t&&n===Ph&&Lb())return $b();if(!t)throw Ws.create("no-app",{appName:n});return t}function qs(n,t,e){let s=FS[n]??n;e&&(s+=`-${e}`);const i=s.match(/\s|\//),r=t.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${t}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),gs.warn(o.join(" "));return}vr(new Vi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firebase-heartbeat-database",jS=1,qo="firebase-heartbeat-store";let Hu=null;function jb(){return Hu||(Hu=oS(zS,jS,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(qo)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ws.create("idb-open",{originalErrorMessage:n.message})})),Hu}async function HS(n){try{const e=(await jb()).transaction(qo),s=await e.objectStore(qo).get(Hb(n));return await e.done,s}catch(t){if(t instanceof xs)gs.warn(t.message);else{const e=Ws.create("idb-get",{originalErrorMessage:t?.message});gs.warn(e.message)}}}async function Vg(n,t){try{const s=(await jb()).transaction(qo,"readwrite");await s.objectStore(qo).put(t,Hb(n)),await s.done}catch(e){if(e instanceof xs)gs.warn(e.message);else{const s=Ws.create("idb-set",{originalErrorMessage:e?.message});gs.warn(s.message)}}}function Hb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=1024,qS=30;class GS{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new YS(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ng();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:e}),this._heartbeatsCache.heartbeats.length>qS){const i=XS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){gs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ng(),{heartbeatsToSend:e,unsentEntries:s}=KS(this._heartbeatsCache.heartbeats),i=ql(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return gs.warn(t),""}}}function Ng(){return new Date().toISOString().substring(0,10)}function KS(n,t=WS){const e=[];let s=n.slice();for(const i of n){const r=e.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Fg(e)>t){r.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),Fg(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class YS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LI()?VI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await HS(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Vg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Vg(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Fg(n){return ql(JSON.stringify({version:2,heartbeats:n})).length}function XS(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n){vr(new Vi("platform-logger",t=>new cS(t),"PRIVATE")),vr(new Vi("heartbeat",t=>new GS(t),"PRIVATE")),qs(Ch,Og,n),qs(Ch,Og,"esm2020"),qs("fire-js","")}QS("");function Wb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JS=Wb,qb=new fa("auth","Firebase",Wb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Rd("@firebase/auth");function ZS(n,...t){Kl.logLevel<=Pt.WARN&&Kl.warn(`Auth (${Dr}): ${n}`,...t)}function wl(n,...t){Kl.logLevel<=Pt.ERROR&&Kl.error(`Auth (${Dr}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n,...t){throw Od(n,...t)}function En(n,...t){return Od(n,...t)}function Md(n,t,e){const s={...JS(),[t]:e};return new fa("auth","Firebase",s).create(t,{appName:n.name})}function Gs(n){return Md(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gb(n,t,e){const s=e;if(!(t instanceof s))throw s.name!==t.constructor.name&&qn(n,"argument-error"),Md(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Od(n,...t){if(typeof n!="string"){const e=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(e,...s)}return qb.create(n,...t)}function _t(n,t,...e){if(!n)throw Od(t,...e)}function as(n){const t="INTERNAL ASSERTION FAILED: "+n;throw wl(t),new Error(t)}function ms(n,t){n||as(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(){return typeof self<"u"&&self.location?.href||""}function tA(){return Bg()==="http:"||Bg()==="https:"}function Bg(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tA()||kI()||"connection"in navigator)?navigator.onLine:!0}function nA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,e){this.shortDelay=t,this.longDelay=e,ms(e>t,"Short delay should be less than long delay!"),this.isMobile=CI()||DI()}get(){return eA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n,t){ms(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{static initialize(t,e,s){this.fetchImpl=t,e&&(this.headersImpl=e),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rA=new ga(3e4,6e4);function Vc(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Mr(n,t,e,s,i={}){return Yb(n,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=pa({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:t,headers:l,...r};return RI()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&kr(n.emulatorConfig.host)&&(c.credentials="include"),Kb.fetch()(await Qb(n,n.config.apiHost,e,a),c)})}async function Yb(n,t,e){n._canInitEmulator=!1;const s={...sA,...t};try{const i=new oA(n),r=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Qa(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qa(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qa(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qa(n,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Md(n,h,c);qn(n,h)}}catch(i){if(i instanceof xs)throw i;qn(n,"network-request-failed",{message:String(i)})}}async function Xb(n,t,e,s,i={}){const r=await Mr(n,t,e,s,i);return"mfaPendingCredential"in r&&qn(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function Qb(n,t,e,s){const i=`${t}${e}?${s}`,r=n,o=r.config.emulator?Ld(n.config,i):`${n.config.apiScheme}://${i}`;return iA.includes(e)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}class oA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,s)=>{this.timer=setTimeout(()=>s(En(this.auth,"network-request-failed")),rA.get())})}}function Qa(n,t,e){const s={appName:n.name};e.email&&(s.email=e.email),e.phoneNumber&&(s.phoneNumber=e.phoneNumber);const i=En(n,t,s);return i.customData._tokenResponse=e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(n,t){return Mr(n,"POST","/v1/accounts:delete",t)}async function Yl(n,t){return Mr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function lA(n,t=!1){const e=ye(n),s=await e.getIdToken(t),i=Vd(s);_t(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:ko(Wu(i.auth_time)),issuedAtTime:ko(Wu(i.iat)),expirationTime:ko(Wu(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function Wu(n){return Number(n)*1e3}function Vd(n){const[t,e,s]=n.split(".");if(t===void 0||e===void 0||s===void 0)return wl("JWT malformed, contained fewer than 3 sections"),null;try{const i=Mb(e);return i?JSON.parse(i):(wl("Failed to decode base64 JWT payload"),null)}catch(i){return wl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ug(n){const t=Vd(n);return _t(t,"internal-error"),_t(typeof t.exp<"u","internal-error"),_t(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(n,t,e=!1){if(e)return t;try{return await t}catch(s){throw s instanceof xs&&cA(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function cA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=ko(this.lastLoginAt),this.creationTime=ko(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n){const t=n.auth,e=await n.getIdToken(),s=await Go(n,Yl(t,{idToken:e}));_t(s?.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const r=i.providerUserInfo?.length?Jb(i.providerUserInfo):[],o=dA(n.providerData,r),a=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!o?.length,c=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dh(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(n,h)}async function hA(n){const t=ye(n);await Xl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function dA(n,t){return[...n.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function Jb(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n,t){const e=await Yb(n,{},async()=>{const s=pa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=n.config,o=await Qb(n,i,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return n.emulatorConfig&&kr(n.emulatorConfig.host)&&(l.credentials="include"),Kb.fetch()(o,l)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function pA(n,t){return Mr(n,"POST","/v2/accounts:revokeToken",Vc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){_t(t.idToken,"internal-error"),_t(typeof t.idToken<"u","internal-error"),_t(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Ug(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){_t(t.length!==0,"internal-error");const e=Ug(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:s,refreshToken:i,expiresIn:r}=await fA(t,e);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,e,s){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,e){const{refreshToken:s,accessToken:i,expirationTime:r}=e,o=new pr;return s&&(_t(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(_t(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(_t(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pr,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n,t){_t(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class wn{constructor({uid:t,auth:e,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new uA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await Go(this,this.stsTokenManager.getToken(this.auth,t));return _t(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return lA(this,t)}reload(){return hA(this)}_assign(t){this!==t&&(_t(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new wn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),e&&await Xl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(Gs(this.auth));const t=await this.getIdToken();return await Go(this,aA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const s=e.displayName??void 0,i=e.email??void 0,r=e.phoneNumber??void 0,o=e.photoURL??void 0,a=e.tenantId??void 0,l=e._redirectEventId??void 0,c=e.createdAt??void 0,h=e.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:_,stsTokenManager:b}=e;_t(d&&b,t,"internal-error");const v=pr.fromJSON(this.name,b);_t(typeof d=="string",t,"internal-error"),Ps(s,t.name),Ps(i,t.name),_t(typeof f=="boolean",t,"internal-error"),_t(typeof g=="boolean",t,"internal-error"),Ps(r,t.name),Ps(o,t.name),Ps(a,t.name),Ps(l,t.name),Ps(c,t.name),Ps(h,t.name);const A=new wn({uid:d,auth:t,email:i,emailVerified:f,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:v,createdAt:c,lastLoginAt:h});return _&&Array.isArray(_)&&(A.providerData=_.map(C=>({...C}))),l&&(A._redirectEventId=l),A}static async _fromIdTokenResponse(t,e,s=!1){const i=new pr;i.updateFromServerResponse(e);const r=new wn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Xl(r),r}static async _fromGetAccountInfoResponse(t,e,s){const i=e.users[0];_t(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?Jb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!r?.length,a=new pr;a.updateFromIdToken(s);const l=new wn({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Dh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!r?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=new Map;function ls(n){ms(n instanceof Function,"Expected a class definition");let t=$g.get(n);return t?(ms(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,$g.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Zb.type="NONE";const zg=Zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n,t,e){return`firebase:${n}:${t}:${e}`}class gr{constructor(t,e,s){this.persistence=t,this.auth=e,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=xl(this.userKey,i.apiKey,r),this.fullPersistenceKey=xl("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Yl(this.auth,{idToken:t}).catch(()=>{});return e?wn._fromGetAccountInfoResponse(this.auth,e,t):null}return wn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,s="authUser"){if(!e.length)return new gr(ls(zg),t,s);const i=(await Promise.all(e.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||ls(zg);const o=xl(s,t.config.apiKey,t.name);let a=null;for(const c of e)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const f=await Yl(t,{idToken:h}).catch(()=>{});if(!f)break;d=await wn._fromGetAccountInfoResponse(t,f,h)}else d=wn._fromJSON(t,h);c!==r&&(a=d),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new gr(r,t,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(e.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new gr(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rv(t))return"Blackberry";if(ov(t))return"Webos";if(ev(t))return"Safari";if((t.includes("chrome/")||nv(t))&&!t.includes("edge/"))return"Chrome";if(iv(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(e);if(s?.length===2)return s[1]}return"Other"}function tv(n=$e()){return/firefox\//i.test(n)}function ev(n=$e()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nv(n=$e()){return/crios\//i.test(n)}function sv(n=$e()){return/iemobile/i.test(n)}function iv(n=$e()){return/android/i.test(n)}function rv(n=$e()){return/blackberry/i.test(n)}function ov(n=$e()){return/webos/i.test(n)}function Nd(n=$e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gA(n=$e()){return Nd(n)&&!!window.navigator?.standalone}function mA(){return MI()&&document.documentMode===10}function av(n=$e()){return Nd(n)||iv(n)||ov(n)||rv(n)||/windows phone/i.test(n)||sv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n,t=[]){let e;switch(n){case"Browser":e=jg($e());break;case"Worker":e=`${jg($e())}-${n}`;break;default:e=n}const s=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Dr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const s=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});s.onAbort=e,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const s of this.queue)await s(t),s.onAbort&&e.push(s.onAbort)}catch(s){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(n,t={}){return Mr(n,"GET","/v2/passwordPolicy",Vc(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=6;class vA{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??bA,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(e.meetsMinPasswordLength=t.length>=s),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,e,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t,e,s,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hg(this),this.idTokenSubscription=new Hg(this),this.beforeStateQueue=new _A(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ls(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gr.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Yl(this,{idToken:t}),s=await wn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(s)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(dn(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let s=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(t);(!r||r===o)&&a?.user&&(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Xl(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=nA()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(dn(this.app))return Promise.reject(Gs(this));const e=t?ye(t):null;return e&&_t(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&_t(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return dn(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await yA(this),e=new vA(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new fa("auth","Firebase",t())}onAuthStateChanged(t,e,s){return this.registerStateListener(this.authStateSubscription,t,e,s)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,s){return this.registerStateListener(this.idTokenSubscription,t,e,s)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(s.tenantId=this.tenantId),await pA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const s=await this.getOrInitRedirectPersistenceManager(e);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ls(t)||this._popupRedirectResolver;_t(e,this,"argument-error"),this.redirectPersistenceManager=await gr.create(this,[ls(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,s,i){if(this._deleted)return()=>{};const r=typeof e=="function"?e:e.next.bind(e);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof e=="function"){const l=t.addObserver(e,s,i);return()=>{o=!0,l()}}else{const l=t.addObserver(e);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=lv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&ZS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ma(n){return ye(n)}class Hg{constructor(t){this.auth=t,this.observer=null,this.addObserver=$I(e=>this.observer=e)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xA(n){Fd=n}function TA(n){return Fd.loadJS(n)}function EA(){return Fd.gapiScript}function IA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n,t){const e=Dd(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),r=e.getOptions();if(Li(r,t??{}))return i;qn(i,"already-initialized")}return e.initialize({options:t})}function AA(n,t){const e=t?.persistence||[],s=(Array.isArray(e)?e:[e]).map(ls);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(s,t?.popupRedirectResolver)}function CA(n,t,e){const s=ma(n);_t(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!1,r=cv(t),{host:o,port:a}=PA(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){_t(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),_t(Li(c,s.config.emulator)&&Li(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,kr(o)?(Nb(`${r}//${o}${l}`),Fb("Auth",!0)):RA()}function cv(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function PA(n){const t=cv(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const s=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:Wg(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:Wg(o)}}}function Wg(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function RA(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return as("not implemented")}_getIdTokenResponse(t){return as("not implemented")}_linkToIdToken(t,e){return as("not implemented")}_getReauthenticationResolver(t){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mr(n,t){return Xb(n,"POST","/v1/accounts:signInWithIdp",Vc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="http://localhost";class Ni extends uv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ni(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):qn("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i,...r}=e;if(!s||!i)return null;const o=new Ni(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return mr(t,e)}_linkToIdToken(t,e){const s=this.buildRequest();return s.idToken=e,mr(t,s)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,mr(t,e)}buildRequest(){const t={requestUri:kA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=pa(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Nc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends _a{constructor(){super("facebook.com")}static credential(t){return Ni._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Os.credential(t.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends _a{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ni._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return On.credentialFromTaggedObject(t)}static credentialFromError(t){return On.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:s}=t;if(!e&&!s)return null;try{return On.credential(e,s)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends _a{constructor(){super("github.com")}static credential(t){return Ni._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ls.credentialFromTaggedObject(t)}static credentialFromError(t){return Ls.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ls.credential(t.oauthAccessToken)}catch{return null}}}Ls.GITHUB_SIGN_IN_METHOD="github.com";Ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends _a{constructor(){super("twitter.com")}static credential(t,e){return Ni._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:s}=t;if(!e||!s)return null;try{return Vs.credential(e,s)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,s,i=!1){const r=await wn._fromIdTokenResponse(t,s,i),o=qg(s);return new Fi({user:r,providerId:o,_tokenResponse:s,operationType:e})}static async _forOperation(t,e,s){await t._updateTokensIfNecessary(s,!0);const i=qg(s);return new Fi({user:t,providerId:i,_tokenResponse:s,operationType:e})}}function qg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends xs{constructor(t,e,s,i){super(e.code,e.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Ql.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,e,s,i){return new Ql(t,e,s,i)}}function hv(n,t,e,s){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Ql._fromErrorAndOperation(n,r,t,s):r})}async function DA(n,t,e=!1){const s=await Go(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Fi._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(n,t,e=!1){const{auth:s}=n;if(dn(s.app))return Promise.reject(Gs(s));const i="reauthenticate";try{const r=await Go(n,hv(s,i,t,n),e);_t(r.idToken,s,"internal-error");const o=Vd(r.idToken);_t(o,s,"internal-error");const{sub:a}=o;return _t(n.uid===a,s,"user-mismatch"),Fi._forOperation(n,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&qn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n,t,e=!1){if(dn(n.app))return Promise.reject(Gs(n));const s="signIn",i=await hv(n,s,t),r=await Fi._fromIdTokenResponse(n,s,i);return e||await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(n,t){return Xb(n,"POST","/v1/accounts:signInWithCustomToken",Vc(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(n,t){if(dn(n.app))return Promise.reject(Gs(n));const e=ma(n),s=await LA(e,{token:t,returnSecureToken:!0}),i=await Fi._fromIdTokenResponse(e,"signIn",s);return await e._updateCurrentUser(i.user),i}function NA(n,t,e,s){return ye(n).onIdTokenChanged(t,e,s)}function FA(n,t,e){return ye(n).beforeAuthStateChanged(t,e)}function dv(n,t,e,s){return ye(n).onAuthStateChanged(t,e,s)}const Jl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Jl,"1"),this.storage.removeItem(Jl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=1e3,UA=10;class pv extends fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=av(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const s=this.storage.getItem(e),i=this.localCache[e];s!==i&&t(e,i,s)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!e&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);mA()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,UA):i()}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:s}),!0)})},BA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}pv.type="LOCAL";const $A=pv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv extends fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}gv.type="SESSION";const mv=gv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const s=new Fc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:s,eventType:i,data:r}=e.data,o=this.handlersMap[i];if(!o?.size)return;e.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(e.origin,r)),l=await zA(a);e.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(n="",t=10){let e="";for(let s=0;s<t;s++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Bd("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function HA(n){Nn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function WA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qA(){return navigator?.serviceWorker?.controller||null}function GA(){return _v()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="firebaseLocalStorageDb",KA=1,Zl="firebaseLocalStorage",bv="fbase_key";class ya{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Bc(n,t){return n.transaction([Zl],t?"readwrite":"readonly").objectStore(Zl)}function YA(){const n=indexedDB.deleteDatabase(yv);return new ya(n).toPromise()}function Mh(){const n=indexedDB.open(yv,KA);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Zl,{keyPath:bv})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Zl)?t(s):(s.close(),await YA(),t(await Mh()))})})}async function Gg(n,t,e){const s=Bc(n,!0).put({[bv]:t,value:e});return new ya(s).toPromise()}async function XA(n,t){const e=Bc(n,!1).get(t),s=await new ya(e).toPromise();return s===void 0?null:s.value}function Kg(n,t){const e=Bc(n,!0).delete(t);return new ya(e).toPromise()}const QA=800,JA=3;class vv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mh(),this.db)}async _withRetries(t){let e=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(e++>JA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _v()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(GA()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WA(),!this.activeServiceWorker)return;this.sender=new jA(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||qA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Mh();return await Gg(t,Jl,"1"),await Kg(t,Jl),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gg(s,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(s=>XA(s,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Kg(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=Bc(i,!1).getAll();return new ya(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vv.type="LOCAL";const ZA=vv;new ga(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n,t){return t?ls(t):(_t(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends uv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mr(t,this._buildIdpRequest())}_linkToIdToken(t,e){return mr(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return mr(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function tC(n){return OA(n.auth,new $d(n),n.bypassAuthState)}function eC(n){const{auth:t,user:e}=n;return _t(e,t,"internal-error"),MA(e,new $d(n),n.bypassAuthState)}async function nC(n){const{auth:t,user:e}=n;return _t(e,t,"internal-error"),DA(e,new $d(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t,e,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:e,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return tC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return eC;default:qn(this.auth,"internal-error")}}resolve(t){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new ga(2e3,1e4);async function iC(n,t,e){if(dn(n.app))return Promise.reject(En(n,"operation-not-supported-in-this-environment"));const s=ma(n);Gb(n,t,Nc);const i=Ud(s,e);return new Ns(s,"signInViaPopup",t,i).executeNotNull()}async function rC(n,t,e){const s=ye(n);Gb(s.auth,t,Nc);const i=Ud(s.auth,e);return new Ns(s.auth,"linkViaPopup",t,i,s).executeNotNull()}class Ns extends wv{constructor(t,e,s,i,r){super(t,e,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return _t(t,this.auth,"internal-error"),t}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const t=Bd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,sC.get())};t()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="pendingRedirect",Tl=new Map;class aC extends wv{constructor(t,e,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,s),this.eventId=null}async execute(){let t=Tl.get(this.auth._key());if(!t){try{const s=await lC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(e){t=()=>Promise.reject(e)}Tl.set(this.auth._key(),t)}return this.bypassAuthState||Tl.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lC(n,t){const e=hC(t),s=uC(n);if(!await s._isAvailable())return!1;const i=await s._get(e)==="true";return await s._remove(e),i}function cC(n,t){Tl.set(n._key(),t)}function uC(n){return ls(n._redirectPersistence)}function hC(n){return xl(oC,n.config.apiKey,n.name)}async function dC(n,t,e=!1){if(dn(n.app))return Promise.reject(Gs(n));const s=ma(n),i=Ud(s,t),o=await new aC(s,i,e).execute();return o&&!e&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=600*1e3;class pC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(e=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!gC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!xv(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";e.onError(En(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const s=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=fC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yg(t))}saveEventToCache(t){this.cachedEventUids.add(Yg(t)),this.lastProcessedEventTime=Date.now()}}function Yg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function xv({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function gC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(n,t={}){return Mr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yC=/^https?/;async function bC(n){if(n.config.emulator)return;const{authorizedDomains:t}=await mC(n);for(const e of t)try{if(vC(e))return}catch{}qn(n,"unauthorized-domain")}function vC(n){const t=kh(),{protocol:e,hostname:s}=new URL(t);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===s}if(!yC.test(e))return!1;if(_C.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new ga(3e4,6e4);function Xg(){const n=Nn().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function xC(n){return new Promise((t,e)=>{function s(){Xg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xg(),e(En(n,"network-request-failed"))},timeout:wC.get()})}if(Nn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Nn().gapi?.load)s();else{const i=IA("iframefcb");return Nn()[i]=()=>{gapi.load?s():e(En(n,"network-request-failed"))},TA(`${EA()}?onload=${i}`).catch(r=>e(r))}}).catch(t=>{throw El=null,t})}let El=null;function TC(n){return El=El||xC(n),El}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new ga(5e3,15e3),IC="__/auth/iframe",SC="emulator/auth/iframe",AC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(n){const t=n.config;_t(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ld(t,SC):`https://${n.config.authDomain}/${IC}`,s={apiKey:t.apiKey,appName:n.name,v:Dr},i=CC.get(n.config.apiHost);i&&(s.eid=i);const r=n._getFrameworks();return r.length&&(s.fw=r.join(",")),`${e}?${pa(s).slice(1)}`}async function RC(n){const t=await TC(n),e=Nn().gapi;return _t(e,n,"internal-error"),t.open({where:document.body,url:PC(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AC,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=En(n,"network-request-failed"),a=Nn().setTimeout(()=>{r(o)},EC.get());function l(){Nn().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DC=500,MC=600,OC="_blank",LC="http://localhost";class Qg{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VC(n,t,e,s=DC,i=MC){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...kC,width:s.toString(),height:i.toString(),top:r,left:o},c=$e().toLowerCase();e&&(a=nv(c)?OC:e),tv(c)&&(t=t||LC,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(gA(c)&&a!=="_self")return NC(t||"",a),new Qg(null);const d=window.open(t||"",a,h);_t(d,n,"popup-blocked");try{d.focus()}catch{}return new Qg(d)}function NC(n,t){const e=document.createElement("a");e.href=n,e.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="__/auth/handler",BC="emulator/auth/handler",UC=encodeURIComponent("fac");async function Jg(n,t,e,s,i,r){_t(n.config.authDomain,n,"auth-domain-config-required"),_t(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:s,v:Dr,eventId:i};if(t instanceof Nc){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",UI(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof _a){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${UC}=${encodeURIComponent(l)}`:"";return`${$C(n)}?${pa(a).slice(1)}${c}`}function $C({config:n}){return n.emulator?Ld(n,BC):`https://${n.authDomain}/${FC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="webStorageSupport";class zC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mv,this._completeRedirectFn=dC,this._overrideRedirectResult=cC}async _openPopup(t,e,s,i){ms(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await Jg(t,e,s,kh(),i);return VC(t,r,Bd())}async _openRedirect(t,e,s,i){await this._originValidation(t);const r=await Jg(t,e,s,kh(),i);return HA(r),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:r}=this.eventManagers[e];return i?Promise.resolve(i):(ms(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[e]={promise:s},s.catch(()=>{delete this.eventManagers[e]}),s}async initAndGetManager(t){const e=await RC(t),s=new pC(t);return e.register("authEvent",i=>(_t(i?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=e,s}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(qu,{type:qu},i=>{const r=i?.[0]?.[qu];r!==void 0&&e(!!r),qn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=bC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return av()||ev()||Nd()}}const jC=zC;var Zg="@firebase/auth",tm="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qC(n){vr(new Vi("auth",(t,{options:e})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;_t(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lv(n)},c=new wA(s,i,r,l);return AA(c,e),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,s)=>{t.getProvider("auth-internal").initialize()})),vr(new Vi("auth-internal",t=>{const e=ma(t.getProvider("auth").getImmediate());return(s=>new HC(s))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(Zg,tm,WC(n)),qs(Zg,tm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=300,KC=Vb("authIdTokenMaxAge")||GC;let em=null;const YC=n=>async t=>{const e=t&&await t.getIdTokenResult(),s=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(s&&s>KC)return;const i=e?.token;em!==i&&(em=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Hi(n=zb()){const t=Dd(n,"auth");if(t.isInitialized())return t.getImmediate();const e=SA(n,{popupRedirectResolver:jC,persistence:[ZA,$A,mv]}),s=Vb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=YC(r.toString());FA(e,o,()=>o(e.currentUser)),NA(e,a=>o(a))}}const i=Ob("auth");return i&&CA(e,`http://${i}`),e}function XC(){return document.getElementsByTagName("head")?.[0]??document}xA({loadJS(n){return new Promise((t,e)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=t,s.onerror=i=>{const r=En("internal-error");r.customData=i,e(r)},s.type="text/javascript",s.charset="UTF-8",XC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qC("Browser");var nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,Tv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,y){function x(){}x.prototype=y.prototype,w.D=y.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(E,I,P){for(var S=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)S[rt-2]=arguments[rt];return y.prototype[I].apply(E,S)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,x){x||(x=0);var E=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)E[I]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(I=0;16>I;++I)E[I]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=w.g[0],x=w.g[1],I=w.g[2];var P=w.g[3],S=y+(P^x&(I^P))+E[0]+3614090360&4294967295;y=x+(S<<7&4294967295|S>>>25),S=P+(I^y&(x^I))+E[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=I+(x^P&(y^x))+E[2]+606105819&4294967295,I=P+(S<<17&4294967295|S>>>15),S=x+(y^I&(P^y))+E[3]+3250441966&4294967295,x=I+(S<<22&4294967295|S>>>10),S=y+(P^x&(I^P))+E[4]+4118548399&4294967295,y=x+(S<<7&4294967295|S>>>25),S=P+(I^y&(x^I))+E[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=I+(x^P&(y^x))+E[6]+2821735955&4294967295,I=P+(S<<17&4294967295|S>>>15),S=x+(y^I&(P^y))+E[7]+4249261313&4294967295,x=I+(S<<22&4294967295|S>>>10),S=y+(P^x&(I^P))+E[8]+1770035416&4294967295,y=x+(S<<7&4294967295|S>>>25),S=P+(I^y&(x^I))+E[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=I+(x^P&(y^x))+E[10]+4294925233&4294967295,I=P+(S<<17&4294967295|S>>>15),S=x+(y^I&(P^y))+E[11]+2304563134&4294967295,x=I+(S<<22&4294967295|S>>>10),S=y+(P^x&(I^P))+E[12]+1804603682&4294967295,y=x+(S<<7&4294967295|S>>>25),S=P+(I^y&(x^I))+E[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=I+(x^P&(y^x))+E[14]+2792965006&4294967295,I=P+(S<<17&4294967295|S>>>15),S=x+(y^I&(P^y))+E[15]+1236535329&4294967295,x=I+(S<<22&4294967295|S>>>10),S=y+(I^P&(x^I))+E[1]+4129170786&4294967295,y=x+(S<<5&4294967295|S>>>27),S=P+(x^I&(y^x))+E[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=I+(y^x&(P^y))+E[11]+643717713&4294967295,I=P+(S<<14&4294967295|S>>>18),S=x+(P^y&(I^P))+E[0]+3921069994&4294967295,x=I+(S<<20&4294967295|S>>>12),S=y+(I^P&(x^I))+E[5]+3593408605&4294967295,y=x+(S<<5&4294967295|S>>>27),S=P+(x^I&(y^x))+E[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=I+(y^x&(P^y))+E[15]+3634488961&4294967295,I=P+(S<<14&4294967295|S>>>18),S=x+(P^y&(I^P))+E[4]+3889429448&4294967295,x=I+(S<<20&4294967295|S>>>12),S=y+(I^P&(x^I))+E[9]+568446438&4294967295,y=x+(S<<5&4294967295|S>>>27),S=P+(x^I&(y^x))+E[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=I+(y^x&(P^y))+E[3]+4107603335&4294967295,I=P+(S<<14&4294967295|S>>>18),S=x+(P^y&(I^P))+E[8]+1163531501&4294967295,x=I+(S<<20&4294967295|S>>>12),S=y+(I^P&(x^I))+E[13]+2850285829&4294967295,y=x+(S<<5&4294967295|S>>>27),S=P+(x^I&(y^x))+E[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=I+(y^x&(P^y))+E[7]+1735328473&4294967295,I=P+(S<<14&4294967295|S>>>18),S=x+(P^y&(I^P))+E[12]+2368359562&4294967295,x=I+(S<<20&4294967295|S>>>12),S=y+(x^I^P)+E[5]+4294588738&4294967295,y=x+(S<<4&4294967295|S>>>28),S=P+(y^x^I)+E[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=I+(P^y^x)+E[11]+1839030562&4294967295,I=P+(S<<16&4294967295|S>>>16),S=x+(I^P^y)+E[14]+4259657740&4294967295,x=I+(S<<23&4294967295|S>>>9),S=y+(x^I^P)+E[1]+2763975236&4294967295,y=x+(S<<4&4294967295|S>>>28),S=P+(y^x^I)+E[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=I+(P^y^x)+E[7]+4139469664&4294967295,I=P+(S<<16&4294967295|S>>>16),S=x+(I^P^y)+E[10]+3200236656&4294967295,x=I+(S<<23&4294967295|S>>>9),S=y+(x^I^P)+E[13]+681279174&4294967295,y=x+(S<<4&4294967295|S>>>28),S=P+(y^x^I)+E[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=I+(P^y^x)+E[3]+3572445317&4294967295,I=P+(S<<16&4294967295|S>>>16),S=x+(I^P^y)+E[6]+76029189&4294967295,x=I+(S<<23&4294967295|S>>>9),S=y+(x^I^P)+E[9]+3654602809&4294967295,y=x+(S<<4&4294967295|S>>>28),S=P+(y^x^I)+E[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=I+(P^y^x)+E[15]+530742520&4294967295,I=P+(S<<16&4294967295|S>>>16),S=x+(I^P^y)+E[2]+3299628645&4294967295,x=I+(S<<23&4294967295|S>>>9),S=y+(I^(x|~P))+E[0]+4096336452&4294967295,y=x+(S<<6&4294967295|S>>>26),S=P+(x^(y|~I))+E[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=I+(y^(P|~x))+E[14]+2878612391&4294967295,I=P+(S<<15&4294967295|S>>>17),S=x+(P^(I|~y))+E[5]+4237533241&4294967295,x=I+(S<<21&4294967295|S>>>11),S=y+(I^(x|~P))+E[12]+1700485571&4294967295,y=x+(S<<6&4294967295|S>>>26),S=P+(x^(y|~I))+E[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=I+(y^(P|~x))+E[10]+4293915773&4294967295,I=P+(S<<15&4294967295|S>>>17),S=x+(P^(I|~y))+E[1]+2240044497&4294967295,x=I+(S<<21&4294967295|S>>>11),S=y+(I^(x|~P))+E[8]+1873313359&4294967295,y=x+(S<<6&4294967295|S>>>26),S=P+(x^(y|~I))+E[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=I+(y^(P|~x))+E[6]+2734768916&4294967295,I=P+(S<<15&4294967295|S>>>17),S=x+(P^(I|~y))+E[13]+1309151649&4294967295,x=I+(S<<21&4294967295|S>>>11),S=y+(I^(x|~P))+E[4]+4149444226&4294967295,y=x+(S<<6&4294967295|S>>>26),S=P+(x^(y|~I))+E[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=I+(y^(P|~x))+E[2]+718787259&4294967295,I=P+(S<<15&4294967295|S>>>17),S=x+(P^(I|~y))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+P&4294967295}s.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var x=y-this.blockSize,E=this.B,I=this.h,P=0;P<y;){if(I==0)for(;P<=x;)i(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(E[I++]=w.charCodeAt(P++),I==this.blockSize){i(this,E),I=0;break}}else for(;P<y;)if(E[I++]=w[P++],I==this.blockSize){i(this,E),I=0;break}}this.h=I,this.o+=y},s.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var x=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=x&255,x/=256;for(this.u(w),w=Array(16),y=x=0;4>y;++y)for(var E=0;32>E;E+=8)w[x++]=this.g[y]>>>E&255;return w};function r(w,y){var x=a;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=y(w)}function o(w,y){this.h=y;for(var x=[],E=!0,I=w.length-1;0<=I;I--){var P=w[I]|0;E&&P==y||(x[I]=P,E=!1)}this.g=x}var a={};function l(w){return-128<=w&&128>w?r(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return v(c(-w));for(var y=[],x=1,E=0;w>=x;E++)y[E]=w/x|0,x*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return v(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(y,8)),E=d,I=0;I<w.length;I+=8){var P=Math.min(8,w.length-I),S=parseInt(w.substring(I,I+P),y);8>P?(P=c(Math.pow(y,P)),E=E.j(P).add(c(S))):(E=E.j(x),E=E.add(c(S)))}return E}var d=l(0),f=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(b(this))return-v(this).m();for(var w=0,y=1,x=0;x<this.g.length;x++){var E=this.i(x);w+=(0<=E?E:4294967296+E)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(_(this))return"0";if(b(this))return"-"+v(this).toString(w);for(var y=c(Math.pow(w,6)),x=this,E="";;){var I=k(x,y).g;x=A(x,I.j(y));var P=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=I,_(x))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function _(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function b(w){return w.h==-1}n.l=function(w){return w=A(this,w),b(w)?-1:_(w)?0:1};function v(w){for(var y=w.g.length,x=[],E=0;E<y;E++)x[E]=~w.g[E];return new o(x,~w.h).add(f)}n.abs=function(){return b(this)?v(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],E=0,I=0;I<=y;I++){var P=E+(this.i(I)&65535)+(w.i(I)&65535),S=(P>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);E=S>>>16,P&=65535,S&=65535,x[I]=S<<16|P}return new o(x,x[x.length-1]&-2147483648?-1:0)};function A(w,y){return w.add(v(y))}n.j=function(w){if(_(this)||_(w))return d;if(b(this))return b(w)?v(this).j(v(w)):v(v(this).j(w));if(b(w))return v(this.j(v(w)));if(0>this.l(g)&&0>w.l(g))return c(this.m()*w.m());for(var y=this.g.length+w.g.length,x=[],E=0;E<2*y;E++)x[E]=0;for(E=0;E<this.g.length;E++)for(var I=0;I<w.g.length;I++){var P=this.i(E)>>>16,S=this.i(E)&65535,rt=w.i(I)>>>16,it=w.i(I)&65535;x[2*E+2*I]+=S*it,C(x,2*E+2*I),x[2*E+2*I+1]+=P*it,C(x,2*E+2*I+1),x[2*E+2*I+1]+=S*rt,C(x,2*E+2*I+1),x[2*E+2*I+2]+=P*rt,C(x,2*E+2*I+2)}for(E=0;E<y;E++)x[E]=x[2*E+1]<<16|x[2*E];for(E=y;E<2*y;E++)x[E]=0;return new o(x,0)};function C(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function M(w,y){this.g=w,this.h=y}function k(w,y){if(_(y))throw Error("division by zero");if(_(w))return new M(d,d);if(b(w))return y=k(v(w),y),new M(v(y.g),v(y.h));if(b(y))return y=k(w,v(y)),new M(v(y.g),y.h);if(30<w.g.length){if(b(w)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var x=f,E=y;0>=E.l(w);)x=D(x),E=D(E);var I=N(x,1),P=N(E,1);for(E=N(E,2),x=N(x,2);!_(E);){var S=P.add(E);0>=S.l(w)&&(I=I.add(x),P=S),E=N(E,1),x=N(x,1)}return y=A(w,I.j(y)),new M(I,y)}for(I=d;0<=w.l(y);){for(x=Math.max(1,Math.floor(w.m()/y.m())),E=Math.ceil(Math.log(x)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),P=c(x),S=P.j(y);b(S)||0<S.l(w);)x-=E,P=c(x),S=P.j(y);_(P)&&(P=f),I=I.add(P),w=A(w,S)}return new M(I,w)}n.A=function(w){return k(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],E=0;E<y;E++)x[E]=this.i(E)&w.i(E);return new o(x,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],E=0;E<y;E++)x[E]=this.i(E)|w.i(E);return new o(x,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),x=[],E=0;E<y;E++)x[E]=this.i(E)^w.i(E);return new o(x,this.h^w.h)};function D(w){for(var y=w.g.length+1,x=[],E=0;E<y;E++)x[E]=w.i(E)<<1|w.i(E-1)>>>31;return new o(x,w.h)}function N(w,y){var x=y>>5;y%=32;for(var E=w.g.length-x,I=[],P=0;P<E;P++)I[P]=0<y?w.i(P+x)>>>y|w.i(P+x+1)<<32-y:w.i(P+x);return new o(I,w.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Tv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ks=o}).apply(typeof nm<"u"?nm:typeof self<"u"?self:typeof window<"u"?window:{});var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ev,fo,Iv,Il,Oh,Sv,Av,Cv;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function e(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ja=="object"&&Ja];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=e(this);function i(u,p){if(p)t:{var m=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var V=u[T];if(!(V in m))break t;m=m[V]}u=u[u.length-1],T=m[u],p=p(T),p!=T&&p!=null&&t(m,u,{configurable:!0,writable:!0,value:p})}}function r(u,p){u instanceof String&&(u+="");var m=0,T=!1,V={next:function(){if(!T&&m<u.length){var F=m++;return{value:p(F,u[F]),done:!1}}return T=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(u){return u||function(){return r(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,m){return u.call.apply(u.bind,arguments)}function d(u,p,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,T),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function f(u,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function _(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,V,F){for(var Q=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)Q[jt-2]=arguments[jt];return p.prototype[V].apply(T,Q)}}function b(u){const p=u.length;if(0<p){const m=Array(p);for(let T=0;T<p;T++)m[T]=u[T];return m}return[]}function v(u,p){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const V=u.length||0,F=T.length||0;u.length=V+F;for(let Q=0;Q<F;Q++)u[V+Q]=T[Q]}else u.push(T)}}class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function C(u){return/^[\s\xa0]*$/.test(u)}function M(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var D=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function N(u,p,m){for(const T in u)p.call(m,u[T],T,u)}function w(u,p){for(const m in u)p.call(void 0,u[m],m,u)}function y(u){const p={};for(const m in u)p[m]=u[m];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,p){let m,T;for(let V=1;V<arguments.length;V++){T=arguments[V];for(m in T)u[m]=T[m];for(let F=0;F<x.length;F++)m=x[F],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function I(u){var p=1;u=u.split(":");const m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function P(u){a.setTimeout(()=>{throw u},0)}function S(){var u=J;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class rt{constructor(){this.h=this.g=null}add(p,m){const T=it.get();T.set(p,m),this.h?this.h.next=T:this.g=T,this.h=T}}var it=new A(()=>new dt,u=>u.reset());class dt{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,H=!1,J=new rt,Y=()=>{const u=a.Promise.resolve(void 0);ot=()=>{u.then(ht)}};var ht=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(m){P(m)}var p=it;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}H=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var Nt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function be(u,p){if(yt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){t:{try{k(p.nodeName);var V=!0;break t}catch{}V=!1}V||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&be.aa.h.call(this)}}_(be,yt);var oe={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Xn="closure_listenable_"+(1e6*Math.random()|0),$r=0;function Ra(u,p,m,T,V){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!T,this.ha=V,this.key=++$r,this.da=this.fa=!1}function Sn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zr(u){this.src=u,this.g={},this.h=0}zr.prototype.add=function(u,p,m,T,V){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var Q=O(u,p,T,V);return-1<Q?(p=u[Q],m||(p.fa=!1)):(p=new Ra(p,this.src,F,!!T,V),p.fa=m,u.push(p)),p};function R(u,p){var m=p.type;if(m in u.g){var T=u.g[m],V=Array.prototype.indexOf.call(T,p,void 0),F;(F=0<=V)&&Array.prototype.splice.call(T,V,1),F&&(Sn(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function O(u,p,m,T){for(var V=0;V<u.length;++V){var F=u[V];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==T)return V}return-1}var B="closure_lm_"+(1e6*Math.random()|0),W={};function z(u,p,m,T,V){if(Array.isArray(p)){for(var F=0;F<p.length;F++)z(u,p[F],m,T,V);return null}return m=mt(m),u&&u[Xn]?u.K(p,m,c(T)?!!T.capture:!1,V):j(u,p,m,!1,T,V)}function j(u,p,m,T,V,F){if(!p)throw Error("Invalid event type");var Q=c(V)?!!V.capture:!!V,jt=Z(u);if(jt||(u[B]=jt=new zr(u)),m=jt.add(p,m,T,Q,F),m.proxy)return m;if(T=tt(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)Nt||(V=Q),V===void 0&&(V=!1),u.addEventListener(p.toString(),T,V);else if(u.attachEvent)u.attachEvent(q(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function tt(){function u(m){return p.call(u.src,u.listener,m)}const p=lt;return u}function X(u,p,m,T,V){if(Array.isArray(p))for(var F=0;F<p.length;F++)X(u,p[F],m,T,V);else T=c(T)?!!T.capture:!!T,m=mt(m),u&&u[Xn]?(u=u.i,p=String(p).toString(),p in u.g&&(F=u.g[p],m=O(F,m,T,V),-1<m&&(Sn(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[p],u.h--)))):u&&(u=Z(u))&&(p=u.g[p.toString()],u=-1,p&&(u=O(p,m,T,V)),(m=-1<u?p[u]:null)&&K(m))}function K(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Xn])R(p.i,u);else{var m=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(m,T,u.capture):p.detachEvent?p.detachEvent(q(m),T):p.addListener&&p.removeListener&&p.removeListener(T),(m=Z(p))?(R(m,u),m.h==0&&(m.src=null,p[B]=null)):Sn(u)}}}function q(u){return u in W?W[u]:W[u]="on"+u}function lt(u,p){if(u.da)u=!0;else{p=new be(p,this);var m=u.listener,T=u.ha||u.src;u.fa&&K(u),u=m.call(T,p)}return u}function Z(u){return u=u[B],u instanceof zr?u:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(u){return typeof u=="function"?u:(u[at]||(u[at]=function(p){return u.handleEvent(p)}),u[at])}function ft(){St.call(this),this.i=new zr(this),this.M=this,this.F=null}_(ft,St),ft.prototype[Xn]=!0,ft.prototype.removeEventListener=function(u,p,m,T){X(this,u,p,m,T)};function Tt(u,p){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new yt(p,u);else if(p instanceof yt)p.target=p.target||u;else{var V=p;p=new yt(T,u),E(p,V)}if(V=!0,m)for(var F=m.length-1;0<=F;F--){var Q=p.g=m[F];V=Mt(Q,T,!0,p)&&V}if(Q=p.g=u,V=Mt(Q,T,!0,p)&&V,V=Mt(Q,T,!1,p)&&V,m)for(F=0;F<m.length;F++)Q=p.g=m[F],V=Mt(Q,T,!1,p)&&V}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],T=0;T<m.length;T++)Sn(m[T]);delete u.g[p],u.h--}}this.F=null},ft.prototype.K=function(u,p,m,T){return this.i.add(String(u),p,!1,m,T)},ft.prototype.L=function(u,p,m,T){return this.i.add(String(u),p,!0,m,T)};function Mt(u,p,m,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,F=0;F<p.length;++F){var Q=p[F];if(Q&&!Q.da&&Q.capture==m){var jt=Q.listener,Te=Q.ha||Q.src;Q.fa&&R(u.i,Q),V=jt.call(Te,T)!==!1&&V}}return V&&!T.defaultPrevented}function ve(u,p,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function we(u){u.g=ve(()=>{u.g=null,u.i&&(u.i=!1,we(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class cn extends St{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(u){St.call(this),this.h=u,this.g={}}_(Ce,St);var Is=[];function jr(u){N(u.g,function(p,m){this.g.hasOwnProperty(m)&&K(p)},u),u.g={}}Ce.prototype.N=function(){Ce.aa.N.call(this),jr(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=a.JSON.stringify,un=a.JSON.parse,ka=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ki(){}Ki.prototype.h=null;function rp(u){return u.h||(u.h=u.i())}function op(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _u(){yt.call(this,"d")}_(_u,yt);function yu(){yt.call(this,"c")}_(yu,yt);var fi={},ap=null;function Da(){return ap=ap||new ft}fi.La="serverreachability";function lp(u){yt.call(this,fi.La,u)}_(lp,yt);function Wr(u){const p=Da();Tt(p,new lp(p))}fi.STAT_EVENT="statevent";function cp(u,p){yt.call(this,fi.STAT_EVENT,u),this.stat=p}_(cp,yt);function je(u){const p=Da();Tt(p,new cp(p,u))}fi.Ma="timingevent";function up(u,p){yt.call(this,fi.Ma,u),this.size=p}_(up,yt);function qr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Gr(){this.g=!0}Gr.prototype.xa=function(){this.g=!1};function yx(u,p,m,T,V,F){u.info(function(){if(u.g)if(F)for(var Q="",jt=F.split("&"),Te=0;Te<jt.length;Te++){var Lt=jt[Te].split("=");if(1<Lt.length){var Pe=Lt[0];Lt=Lt[1];var Re=Pe.split("_");Q=2<=Re.length&&Re[1]=="type"?Q+(Pe+"="+Lt+"&"):Q+(Pe+"=redacted&")}}else Q=null;else Q=F;return"XMLHTTP REQ ("+T+") [attempt "+V+"]: "+p+`
`+m+`
`+Q})}function bx(u,p,m,T,V,F,Q){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+V+"]: "+p+`
`+m+`
`+F+" "+Q})}function Yi(u,p,m,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+wx(u,m)+(T?" "+T:"")})}function vx(u,p){u.info(function(){return"TIMEOUT: "+p})}Gr.prototype.info=function(){};function wx(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var V=T[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Q=1;Q<V.length;Q++)V[Q]=""}}}}return xe(m)}catch{return p}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bu;function Oa(){}_(Oa,Ki),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},bu=new Oa;function Ss(u,p,m,T){this.j=u,this.i=p,this.l=m,this.R=T||1,this.U=new Ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dp}function dp(){this.i=null,this.g="",this.h=!1}var fp={},vu={};function wu(u,p,m){u.L=1,u.v=Fa(Qn(p)),u.m=m,u.P=!0,pp(u,null)}function pp(u,p){u.F=Date.now(),La(u),u.A=Qn(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Cp(m.i,"t",T),u.C=0,m=u.j.J,u.h=new dp,u.g=qp(u.j,m?p:null,!u.m),0<u.O&&(u.M=new cn(f(u.Y,u,u.g),u.O)),p=u.U,m=u.g,T=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Is[0]=V.toString()),V=Is);for(var F=0;F<V.length;F++){var Q=z(m,V[F],T||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Wr(),yx(u.i,u.u,u.A,u.l,u.R,u.m)}Ss.prototype.ca=function(u){u=u.target;const p=this.M;p&&Jn(u)==3?p.j():this.Y(u)},Ss.prototype.Y=function(u){try{if(u==this.g)t:{const Re=Jn(this.g);var p=this.g.Ba();const Ji=this.g.Z();if(!(3>Re)&&(Re!=3||this.g&&(this.h.h||this.g.oa()||Lp(this.g)))){this.J||Re!=4||p==7||(p==8||0>=Ji?Wr(3):Wr(2)),xu(this);var m=this.g.Z();this.X=m;e:if(gp(this)){var T=Lp(this.g);u="";var V=T.length,F=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),Kr(this);var Q="";break e}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(F&&p==V-1)});T.length=0,this.h.g+=u,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=m==200,bx(this.i,this.u,this.A,this.l,this.R,Re,m),this.o){if(this.T&&!this.K){e:{if(this.g){var jt,Te=this.g;if((jt=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(jt)){var Lt=jt;break e}}Lt=null}if(m=Lt)Yi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tu(this,m);else{this.o=!1,this.s=3,je(12),pi(this),Kr(this);break t}}if(this.P){m=!0;let _n;for(;!this.J&&this.C<Q.length;)if(_n=xx(this,Q),_n==vu){Re==4&&(this.s=4,je(14),m=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==fp){this.s=4,je(15),Yi(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}else Yi(this.i,this.l,_n,null),Tu(this,_n);if(gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||Q.length!=0||this.h.h||(this.s=1,je(16),m=!1),this.o=this.o&&m,!m)Yi(this.i,this.l,Q,"[Invalid Chunked Response]"),pi(this),Kr(this);else if(0<Q.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Pu(Pe),Pe.M=!0,je(11))}}else Yi(this.i,this.l,Q,null),Tu(this,Q);Re==4&&pi(this),this.o&&!this.J&&(Re==4?zp(this.j,this):(this.o=!1,La(this)))}else Bx(this.g),m==400&&0<Q.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),pi(this),Kr(this)}}}catch{}finally{}};function gp(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xx(u,p){var m=u.C,T=p.indexOf(`
`,m);return T==-1?vu:(m=Number(p.substring(m,T)),isNaN(m)?fp:(T+=1,T+m>p.length?vu:(p=p.slice(T,T+m),u.C=T+m,p)))}Ss.prototype.cancel=function(){this.J=!0,pi(this)};function La(u){u.S=Date.now()+u.I,mp(u,u.I)}function mp(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qr(f(u.ba,u),p)}function xu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ss.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(vx(this.i,this.A),this.L!=2&&(Wr(),je(17)),pi(this),this.s=2,Kr(this)):mp(this,this.S-u)};function Kr(u){u.j.G==0||u.J||zp(u.j,u)}function pi(u){xu(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,jr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Tu(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||Eu(m.h,u))){if(!u.K&&Eu(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var V=T;if(V[0]==0){t:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ha(m),za(m);else break t;Cu(m),je(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=qr(f(m.Za,m),6e3));if(1>=bp(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else mi(m,11)}else if((u.K||m.g==u)&&Ha(m),!C(p))for(V=m.Da.g.parse(p),p=0;p<V.length;p++){let Lt=V[p];if(m.T=Lt[0],Lt=Lt[1],m.G==2)if(Lt[0]=="c"){m.K=Lt[1],m.ia=Lt[2];const Pe=Lt[3];Pe!=null&&(m.la=Pe,m.j.info("VER="+m.la));const Re=Lt[4];Re!=null&&(m.Aa=Re,m.j.info("SVER="+m.Aa));const Ji=Lt[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(T=1.5*Ji,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const _n=u.g;if(_n){const qa=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qa){var F=T.h;F.g||qa.indexOf("spdy")==-1&&qa.indexOf("quic")==-1&&qa.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Iu(F,F.h),F.h=null))}if(T.D){const Ru=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ru&&(T.ya=Ru,Qt(T.I,T.D,Ru))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var Q=u;if(T.qa=Wp(T,T.J?T.ia:null,T.W),Q.K){vp(T.h,Q);var jt=Q,Te=T.L;Te&&(jt.I=Te),jt.B&&(xu(jt),La(jt)),T.g=Q}else Up(T);0<m.i.length&&ja(m)}else Lt[0]!="stop"&&Lt[0]!="close"||mi(m,7);else m.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?mi(m,7):Au(m):Lt[0]!="noop"&&m.l&&m.l.ta(Lt),m.v=0)}}Wr(4)}catch{}}var Tx=class{constructor(u,p){this.g=u,this.map=p}};function _p(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bp(u){return u.h?1:u.g?u.g.size:0}function Eu(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Iu(u,p){u.g?u.g.add(p):u.h=p}function vp(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}_p.prototype.cancel=function(){if(this.i=wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wp(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const m of u.g.values())p=p.concat(m.D);return p}return b(u.i)}function Ex(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],m=u.length,T=0;T<m;T++)p.push(u[T]);return p}p=[],m=0;for(T in u)p[m++]=u[T];return p}function Ix(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(const T in u)p[m++]=T;return p}}}function xp(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=Ix(u),T=Ex(u),V=T.length,F=0;F<V;F++)p.call(void 0,T[F],m&&m[F],u)}var Tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sx(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),V=null;if(0<=T){var F=u[m].substring(0,T);V=u[m].substring(T+1)}else F=u[m];p(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function gi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gi){this.h=u.h,Va(this,u.j),this.o=u.o,this.g=u.g,Na(this,u.s),this.l=u.l;var p=u.i,m=new Qr;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Ep(this,m),this.m=u.m}else u&&(p=String(u).match(Tp))?(this.h=!1,Va(this,p[1]||"",!0),this.o=Yr(p[2]||""),this.g=Yr(p[3]||"",!0),Na(this,p[4]),this.l=Yr(p[5]||"",!0),Ep(this,p[6]||"",!0),this.m=Yr(p[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}gi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Xr(p,Ip,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Xr(p,Ip,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Xr(m,m.charAt(0)=="/"?Px:Cx,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Xr(m,kx)),u.join("")};function Qn(u){return new gi(u)}function Va(u,p,m){u.j=m?Yr(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Na(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ep(u,p,m){p instanceof Qr?(u.i=p,Dx(u.i,u.h)):(m||(p=Xr(p,Rx)),u.i=new Qr(p,u.h))}function Qt(u,p,m){u.i.set(p,m)}function Fa(u){return Qt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Yr(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xr(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,Ax),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ax(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ip=/[#\/\?@]/g,Cx=/[#\?:]/g,Px=/[#\?]/g,Rx=/[#\?@]/g,kx=/#/g;function Qr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function As(u){u.g||(u.g=new Map,u.h=0,u.i&&Sx(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}n=Qr.prototype,n.add=function(u,p){As(this),this.i=null,u=Xi(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function Sp(u,p){As(u),p=Xi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ap(u,p){return As(u),p=Xi(u,p),u.g.has(p)}n.forEach=function(u,p){As(this),this.g.forEach(function(m,T){m.forEach(function(V){u.call(p,V,T,this)},this)},this)},n.na=function(){As(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let T=0;T<p.length;T++){const V=u[T];for(let F=0;F<V.length;F++)m.push(p[T])}return m},n.V=function(u){As(this);let p=[];if(typeof u=="string")Ap(this,u)&&(p=p.concat(this.g.get(Xi(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},n.set=function(u,p){return As(this),this.i=null,u=Xi(this,u),Ap(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Cp(u,p,m){Sp(u,p),0<m.length&&(u.i=null,u.g.set(Xi(u,p),b(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var T=p[m];const F=encodeURIComponent(String(T)),Q=this.V(T);for(T=0;T<Q.length;T++){var V=F;Q[T]!==""&&(V+="="+encodeURIComponent(String(Q[T]))),u.push(V)}}return this.i=u.join("&")};function Xi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Dx(u,p){p&&!u.j&&(As(u),u.i=null,u.g.forEach(function(m,T){var V=T.toLowerCase();T!=V&&(Sp(this,T),Cp(this,V,m))},u)),u.j=p}function Mx(u,p){const m=new Gr;if(a.Image){const T=new Image;T.onload=g(Cs,m,"TestLoadImage: loaded",!0,p,T),T.onerror=g(Cs,m,"TestLoadImage: error",!1,p,T),T.onabort=g(Cs,m,"TestLoadImage: abort",!1,p,T),T.ontimeout=g(Cs,m,"TestLoadImage: timeout",!1,p,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Ox(u,p){const m=new Gr,T=new AbortController,V=setTimeout(()=>{T.abort(),Cs(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(F=>{clearTimeout(V),F.ok?Cs(m,"TestPingServer: ok",!0,p):Cs(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Cs(m,"TestPingServer: error",!1,p)})}function Cs(u,p,m,T,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),T(m)}catch{}}function Lx(){this.g=new ka}function Vx(u,p,m){const T=m||"";try{xp(u,function(V,F){let Q=V;c(V)&&(Q=xe(V)),p.push(T+F+"="+encodeURIComponent(Q))})}catch(V){throw p.push(T+"type="+encodeURIComponent("_badmap")),V}}function Ba(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Ba,Ki),Ba.prototype.g=function(){return new Ua(this.l,this.j)},Ba.prototype.i=function(u){return function(){return u}}({});function Ua(u,p){ft.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ua,ft),n=Ua.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Zr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pp(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pp(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Jr(this):Zr(this),this.readyState==3&&Pp(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Jr(this))},n.Qa=function(u){this.g&&(this.response=u,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zr(u)}n.setRequestHeader=function(u,p){this.u.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function Zr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Rp(u){let p="";return N(u,function(m,T){p+=T,p+=":",p+=m,p+=`\r
`}),p}function Su(u,p,m){t:{for(T in m){var T=!1;break t}T=!0}T||(m=Rp(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Qt(u,p,m))}function se(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(se,ft);var Nx=/^https?$/i,Fx=["POST","PUT"];n=se.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,p,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bu.g(),this.v=this.o?rp(this.o):rp(bu),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){kp(this,F);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var V in T)m.set(V,T[V]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const F of T.keys())m.set(F,T.get(F));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fx,p,void 0))||T||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of m)this.g.setRequestHeader(F,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Op(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){kp(this,F)}};function kp(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Dp(u),$a(u)}function Dp(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),$a(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Mp(this):this.bb())},n.bb=function(){Mp(this)};function Mp(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Jn(u)!=4||u.Z()!=2)){if(u.u&&Jn(u)==4)ve(u.Ea,0,u);else if(Tt(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const Q=u.Z();t:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var m;if(!(m=p)){var T;if(T=Q===0){var V=String(u.D).match(Tp)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),T=!Nx.test(V?V.toLowerCase():"")}m=T}if(m)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var F=2<Jn(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",Dp(u)}}finally{$a(u)}}}}function $a(u,p){if(u.g){Op(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Tt(u,"ready");try{m.onreadystatechange=T}catch{}}}function Op(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),un(p)}};function Lp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Bx(u){const p={};u=(u.g&&2<=Jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var m=I(u[T]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[V]||[];p[V]=F,F.push(m)}w(p,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function Vp(u){this.Aa=0,this.i=[],this.j=new Gr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=to("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=to("baseRetryDelayMs",5e3,u),this.cb=to("retryDelaySeedMs",1e4,u),this.Wa=to("forwardChannelMaxRetries",2,u),this.wa=to("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _p(u&&u.concurrentRequestLimit),this.Da=new Lx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vp.prototype,n.la=8,n.G=1,n.connect=function(u,p,m,T){je(0),this.W=u,this.H=p||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=Wp(this,null,this.W),ja(this)};function Au(u){if(Np(u),u.G==3){var p=u.U++,m=Qn(u.I);if(Qt(m,"SID",u.K),Qt(m,"RID",p),Qt(m,"TYPE","terminate"),eo(u,m),p=new Ss(u,u.j,p),p.L=2,p.v=Fa(Qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=qp(p.j,null),p.g.ea(p.v)),p.F=Date.now(),La(p)}Hp(u)}function za(u){u.g&&(Pu(u),u.g.cancel(),u.g=null)}function Np(u){za(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ha(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ja(u){if(!yp(u.h)&&!u.s){u.s=!0;var p=u.Ga;ot||Y(),H||(ot(),H=!0),J.add(p,u),u.B=0}}function Ux(u,p){return bp(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qr(f(u.Ga,u,p),jp(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Ss(this,this.j,u);let F=this.o;if(this.S&&(F?(F=y(F),E(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)t:{for(var p=0,m=0;m<this.i.length;m++){e:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=m;break t}if(p===4096||m===this.i.length-1){p=m+1;break t}}p=1e3}else p=1e3;p=Bp(this,V,p),m=Qn(this.I),Qt(m,"RID",u),Qt(m,"CVER",22),this.D&&Qt(m,"X-HTTP-Session-Id",this.D),eo(this,m),F&&(this.O?p="headers="+encodeURIComponent(String(Rp(F)))+"&"+p:this.m&&Su(m,this.m,F)),Iu(this.h,V),this.Ua&&Qt(m,"TYPE","init"),this.P?(Qt(m,"$req",p),Qt(m,"SID","null"),V.T=!0,wu(V,m,null)):wu(V,m,p),this.G=2}}else this.G==3&&(u?Fp(this,u):this.i.length==0||yp(this.h)||Fp(this))};function Fp(u,p){var m;p?m=p.l:m=u.U++;const T=Qn(u.I);Qt(T,"SID",u.K),Qt(T,"RID",m),Qt(T,"AID",u.T),eo(u,T),u.m&&u.o&&Su(T,u.m,u.o),m=new Ss(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Bp(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Iu(u.h,m),wu(m,T,p)}function eo(u,p){u.H&&N(u.H,function(m,T){Qt(p,T,m)}),u.l&&xp({},function(m,T){Qt(p,T,m)})}function Bp(u,p,m){m=Math.min(u.i.length,m);var T=u.l?f(u.l.Na,u.l,u):null;t:{var V=u.i;let F=-1;for(;;){const Q=["count="+m];F==-1?0<m?(F=V[0].g,Q.push("ofs="+F)):F=0:Q.push("ofs="+F);let jt=!0;for(let Te=0;Te<m;Te++){let Lt=V[Te].g;const Pe=V[Te].map;if(Lt-=F,0>Lt)F=Math.max(0,V[Te].g-100),jt=!1;else try{Vx(Pe,Q,"req"+Lt+"_")}catch{T&&T(Pe)}}if(jt){T=Q.join("&");break t}}}return u=u.i.splice(0,m),p.D=u,T}function Up(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ot||Y(),H||(ot(),H=!0),J.add(p,u),u.v=0}}function Cu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qr(f(u.Fa,u),jp(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,$p(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qr(f(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),za(this),$p(this))};function Pu(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function $p(u){u.g=new Ss(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Qn(u.qa);Qt(p,"RID","rpc"),Qt(p,"SID",u.K),Qt(p,"AID",u.T),Qt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qt(p,"TO",u.ja),Qt(p,"TYPE","xmlhttp"),eo(u,p),u.m&&u.o&&Su(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Fa(Qn(p)),m.m=null,m.P=!0,pp(m,u)}n.Za=function(){this.C!=null&&(this.C=null,za(this),Cu(this),je(19))};function Ha(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function zp(u,p){var m=null;if(u.g==p){Ha(u),Pu(u),u.g=null;var T=2}else if(Eu(u.h,p))m=p.D,vp(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;T=Da(),Tt(T,new up(T,m)),ja(u)}else Up(u);else if(V=p.s,V==3||V==0&&0<p.X||!(T==1&&Ux(u,p)||T==2&&Cu(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),V){case 1:mi(u,5);break;case 4:mi(u,10);break;case 3:mi(u,6);break;default:mi(u,2)}}}function jp(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function mi(u,p){if(u.j.info("Error code "+p),p==2){var m=f(u.fb,u),T=u.Xa;const V=!T;T=new gi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Va(T,"https"),Fa(T),V?Mx(T.toString(),m):Ox(T.toString(),m)}else je(2);u.G=0,u.l&&u.l.sa(p),Hp(u),Np(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function Hp(u){if(u.G=0,u.ka=[],u.l){const p=wp(u.h);(p.length!=0||u.i.length!=0)&&(v(u.ka,p),v(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function Wp(u,p,m){var T=m instanceof gi?Qn(m):new gi(m);if(T.g!="")p&&(T.g=p+"."+T.g),Na(T,T.s);else{var V=a.location;T=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var F=new gi(null);T&&Va(F,T),p&&(F.g=p),V&&Na(F,V),m&&(F.l=m),T=F}return m=u.D,p=u.ya,m&&p&&Qt(T,m,p),Qt(T,"VER",u.la),eo(u,T),T}function qp(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new se(new Ba({eb:m})):new se(u.pa),p.Ha(u.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gp(){}n=Gp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wa(){}Wa.prototype.g=function(u,p){return new tn(u,p)};function tn(u,p){ft.call(this),this.g=new Vp(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!C(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Qi(this)}_(tn,ft),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Au(this.g)},tn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=xe(u),u=m);p.i.push(new Tx(p.Ya++,u)),p.G==3&&ja(p)},tn.prototype.N=function(){this.g.l=null,delete this.j,Au(this.g),delete this.g,tn.aa.N.call(this)};function Kp(u){_u.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){t:{for(const m in p){u=m;break t}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}_(Kp,_u);function Yp(){yu.call(this),this.status=1}_(Yp,yu);function Qi(u){this.g=u}_(Qi,Gp),Qi.prototype.ua=function(){Tt(this.g,"a")},Qi.prototype.ta=function(u){Tt(this.g,new Kp(u))},Qi.prototype.sa=function(u){Tt(this.g,new Yp)},Qi.prototype.ra=function(){Tt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,Cv=function(){return new Wa},Av=function(){return Da()},Sv=fi,Oh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,Il=Ma,hp.COMPLETE="complete",Iv=hp,op.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",ft.prototype.listen=ft.prototype.K,fo=op,se.prototype.listenOnce=se.prototype.L,se.prototype.getLastError=se.prototype.Ka,se.prototype.getLastErrorCode=se.prototype.Ba,se.prototype.getStatus=se.prototype.Z,se.prototype.getResponseJson=se.prototype.Oa,se.prototype.getResponseText=se.prototype.oa,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Ha,Ev=se}).apply(typeof Ja<"u"?Ja:typeof self<"u"?self:typeof window<"u"?window:{});const sm="@firebase/firestore",im="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Me.UNAUTHENTICATED=new Me(null),Me.GOOGLE_CREDENTIALS=new Me("google-credentials-uid"),Me.FIRST_PARTY=new Me("first-party-uid"),Me.MOCK_USER=new Me("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Rd("@firebase/firestore");function ir(){return Bi.logLevel}function nt(n,...t){if(Bi.logLevel<=Pt.DEBUG){const e=t.map(zd);Bi.debug(`Firestore (${Or}): ${n}`,...e)}}function _s(n,...t){if(Bi.logLevel<=Pt.ERROR){const e=t.map(zd);Bi.error(`Firestore (${Or}): ${n}`,...e)}}function wr(n,...t){if(Bi.logLevel<=Pt.WARN){const e=t.map(zd);Bi.warn(`Firestore (${Or}): ${n}`,...e)}}function zd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(n,t,e){let s="Unexpected state";typeof t=="string"?s=t:e=t,Pv(n,s,e)}function Pv(n,t,e){let s=`FIRESTORE (${Or}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{s+=" CONTEXT: "+JSON.stringify(e)}catch{s+=" CONTEXT: "+e}throw _s(s),new Error(s)}function $t(n,t,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,n||Pv(t,i,s)}function xt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends xs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class QC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Me.UNAUTHENTICATED))}shutdown(){}}class JC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class ZC{constructor(t){this.t=t,this.currentUser=Me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){$t(this.o===void 0,42304);let s=this.i;const i=l=>this.i!==s?(s=this.i,e(l)):Promise.resolve();let r=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ds,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ds)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($t(typeof s.accessToken=="string",31837,{l:s}),new Rv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return $t(t===null||typeof t=="string",2055,{h:t}),new Me(t)}}class t1{constructor(t,e,s){this.P=t,this.T=e,this.I=s,this.type="FirstParty",this.user=Me.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class e1{constructor(t,e,s){this.P=t,this.T=e,this.I=s}getToken(){return Promise.resolve(new t1(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Me.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rm{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n1{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){$t(this.o===void 0,3512);const s=r=>{r.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rm(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?($t(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new rm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=s1(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<e&&(s+=t.charAt(i[r]%62))}return s}}function Rt(n,t){return n<t?-1:n>t?1:0}function Lh(n,t){const e=Math.min(n.length,t.length);for(let s=0;s<e;s++){const i=n.charAt(s),r=t.charAt(s);if(i!==r)return Gu(i)===Gu(r)?Rt(i,r):Gu(i)?1:-1}return Rt(n.length,t.length)}const i1=55296,r1=57343;function Gu(n){const t=n.charCodeAt(0);return t>=i1&&t<=r1}function xr(n,t,e){return n.length===t.length&&n.every((s,i)=>e(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="__name__";class kn{constructor(t,e,s){e===void 0?e=0:e>t.length&&pt(637,{offset:e,range:t.length}),s===void 0?s=t.length-e:s>t.length-e&&pt(1746,{length:s,range:t.length-e}),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return kn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof kn?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let i=0;i<s;i++){const r=kn.compareSegments(t.get(i),e.get(i));if(r!==0)return r}return Rt(t.length,e.length)}static compareSegments(t,e){const s=kn.isNumericId(t),i=kn.isNumericId(e);return s&&!i?-1:!s&&i?1:s&&i?kn.extractNumericId(t).compare(kn.extractNumericId(e)):Lh(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ks.fromString(t.substring(4,t.length-2))}}class Wt extends kn{construct(t,e,s){return new Wt(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new et(U.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(i=>i.length>0))}return new Wt(e)}static emptyPath(){return new Wt([])}}const o1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Se extends kn{construct(t,e,s){return new Se(t,e,s)}static isValidIdentifier(t){return o1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===om}static keyField(){return new Se([om])}static fromServerFormat(t){const e=[];let s="",i=0;const r=()=>{if(s.length===0)throw new et(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new et(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new et(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Se(e)}static emptyPath(){return new Se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Wt.fromString(t))}static fromName(t){return new ut(Wt.fromString(t).popFirst(5))}static empty(){return new ut(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Wt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Wt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n,t,e){if(!e)throw new et(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function a1(n,t,e,s){if(t===!0&&s===!0)throw new et(U.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function am(n){if(!ut.isDocumentKey(n))throw new et(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lm(n){if(ut.isDocumentKey(n))throw new et(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Uc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":pt(12329,{type:typeof n})}function qe(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new et(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Uc(n);throw new et(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(n,t){const e={typeString:n};return t&&(e.value=t),e}function ba(n,t){if(!kv(n))throw new et(U.INVALID_ARGUMENT,"JSON must be an object");let e;for(const s in t)if(t[s]){const i=t[s].typeString,r="value"in t[s]?{value:t[s].value}:void 0;if(!(s in n)){e=`JSON missing required field: '${s}'`;break}const o=n[s];if(i&&typeof o!==i){e=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){e=`Expected '${s}' field to equal '${r.value}'`;break}}if(e)throw new et(U.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-62135596800,um=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(t){return qt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*um);return new qt(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new et(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new et(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<cm)throw new et(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new et(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/um}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ba(t,qt._jsonSchema))return new qt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-cm;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:he("string",qt._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new qt(0,0))}static max(){return new vt(new qt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=-1;function l1(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(s===1e9?new qt(e+1,0):new qt(e,s));return new ti(i,ut.empty(),t)}function c1(n){return new ti(n.readTime,n.key,Ko)}class ti{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new ti(vt.min(),ut.empty(),Ko)}static max(){return new ti(vt.max(),ut.empty(),Ko)}}function u1(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=ut.comparator(n.documentKey,t.documentKey),e!==0?e:Rt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==h1)throw n;nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(e,r).next(s,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,s)=>{e(t)})}static reject(t){return new $((e,s)=>{s(t)})}static waitFor(t){return new $((e,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&e()},l=>s(l))}),o=!0,r===i&&e()})}static or(t){let e=$.resolve(!1);for(const s of t)e=e.next(i=>i?$.resolve(i):s());return e}static forEach(t,e){const s=[];return t.forEach((i,r)=>{s.push(e.call(this,i,r))}),this.waitFor(s)}static mapArray(t,e){return new $((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;e(t[c]).next(h=>{o[c]=h,++a,a===r&&s(o)},h=>i(h))}})}static doWhile(t,e){return new $((s,i)=>{const r=()=>{t()===!0?e().next(()=>{r()},i):s()};r()})}}function f1(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Vr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>e.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}$c.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=-1;function zc(n){return n==null}function tc(n){return n===0&&1/n==-1/0}function p1(n){return typeof n=="number"&&Number.isInteger(n)&&!tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="";function g1(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=hm(t)),t=m1(n.get(e),t);return hm(t)}function m1(n,t){let e=t;const s=n.length;for(let i=0;i<s;i++){const r=n.charAt(i);switch(r){case"\0":e+="";break;case Dv:e+="";break;default:e+=r}}return e}function hm(n){return n+Dv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function li(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Mv(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,e){this.comparator=t,this.root=e||Ee.EMPTY}insert(t,e){return new ne(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ee.BLACK,null,null))}remove(t){return new ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ee.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return e+s.left.size;i<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Za(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Za(this.root,t,this.comparator,!1)}getReverseIterator(){return new Za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Za(this.root,t,this.comparator,!0)}}class Za{constructor(t,e,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?s(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ee{constructor(t,e,s,i,r){this.key=t,this.value=e,this.color=s??Ee.RED,this.left=i??Ee.EMPTY,this.right=r??Ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,i,r){return new Ee(t??this.key,e??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,s),null):r===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ee.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return Ee.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pt(27949);return t+(this.isRed()?0:1)}}Ee.EMPTY=null,Ee.RED=!0,Ee.BLACK=!1;Ee.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(t,e,s,i,r){return this}insert(t,e,s){return new Ee(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.comparator=t,this.data=new ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new fm(this.data.getIterator())}getIteratorFrom(t){return new fm(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof ge)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ge(this.comparator);return e.data=t,e}}class fm{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.fields=t,t.sort(Se.comparator)}static empty(){return new an([])}unionWith(t){let e=new ge(Se.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new an(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return xr(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Ov("Invalid base64 string: "+r):r}}(t);return new Ae(e)}static fromUint8Array(t){const e=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Ae(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const _1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(n){if($t(!!n,39018),typeof n=="string"){let t=0;const e=_1.exec(n);if($t(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ae(n.seconds),nanos:ae(n.nanos)}}function ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ni(n){return typeof n=="string"?Ae.fromBase64String(n):Ae.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="server_timestamp",Vv="__type__",Nv="__previous_value__",Fv="__local_write_time__";function qd(n){return(n?.mapValue?.fields||{})[Vv]?.stringValue===Lv}function jc(n){const t=n.mapValue.fields[Nv];return qd(t)?jc(t):t}function Yo(n){const t=ei(n.mapValue.fields[Fv].timestampValue);return new qt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t,e,s,i,r,o,a,l,c,h){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const ec="(default)";class Xo{constructor(t,e){this.projectId=t,this.database=e||ec}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===ec}isEqual(t){return t instanceof Xo&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="__type__",b1="__max__",tl={mapValue:{}},Uv="__vector__",nc="value";function si(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qd(n)?4:w1(n)?9007199254740991:v1(n)?10:11:pt(28295,{value:n})}function Gn(n,t){if(n===t)return!0;const e=si(n);if(e!==si(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Yo(n).isEqual(Yo(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=ei(i.timestampValue),a=ei(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,r){return ni(i.bytesValue).isEqual(ni(r.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return ae(i.geoPointValue.latitude)===ae(r.geoPointValue.latitude)&&ae(i.geoPointValue.longitude)===ae(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return ae(i.integerValue)===ae(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ae(i.doubleValue),a=ae(r.doubleValue);return o===a?tc(o)===tc(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return xr(n.arrayValue.values||[],t.arrayValue.values||[],Gn);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(dm(o)!==dm(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Gn(o[l],a[l])))return!1;return!0}(n,t);default:return pt(52216,{left:n})}}function Qo(n,t){return(n.values||[]).find(e=>Gn(e,t))!==void 0}function Tr(n,t){if(n===t)return 0;const e=si(n),s=si(t);if(e!==s)return Rt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,t.booleanValue);case 2:return function(r,o){const a=ae(r.integerValue||r.doubleValue),l=ae(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,t);case 3:return pm(n.timestampValue,t.timestampValue);case 4:return pm(Yo(n),Yo(t));case 5:return Lh(n.stringValue,t.stringValue);case 6:return function(r,o){const a=ni(r),l=ni(o);return a.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Rt(a[c],l[c]);if(h!==0)return h}return Rt(a.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,o){const a=Rt(ae(r.latitude),ae(o.latitude));return a!==0?a:Rt(ae(r.longitude),ae(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return gm(n.arrayValue,t.arrayValue);case 10:return function(r,o){const a=r.fields||{},l=o.fields||{},c=a[nc]?.arrayValue,h=l[nc]?.arrayValue,d=Rt(c?.values?.length||0,h?.values?.length||0);return d!==0?d:gm(c,h)}(n.mapValue,t.mapValue);case 11:return function(r,o){if(r===tl.mapValue&&o===tl.mapValue)return 0;if(r===tl.mapValue)return 1;if(o===tl.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Lh(l[d],h[d]);if(f!==0)return f;const g=Tr(a[l[d]],c[h[d]]);if(g!==0)return g}return Rt(l.length,h.length)}(n.mapValue,t.mapValue);default:throw pt(23264,{he:e})}}function pm(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Rt(n,t);const e=ei(n),s=ei(t),i=Rt(e.seconds,s.seconds);return i!==0?i:Rt(e.nanos,s.nanos)}function gm(n,t){const e=n.values||[],s=t.values||[];for(let i=0;i<e.length&&i<s.length;++i){const r=Tr(e[i],s[i]);if(r)return r}return Rt(e.length,s.length)}function Er(n){return Vh(n)}function Vh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=ei(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return ni(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return ut.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",i=!0;for(const r of e.values||[])i?i=!1:s+=",",s+=Vh(r);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Vh(e.fields[o])}`;return i+"}"}(n.mapValue):pt(61005,{value:n})}function Sl(n){switch(si(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jc(n);return t?16+Sl(t):16;case 5:return 2*n.stringValue.length;case 6:return ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+Sl(r),0)}(n.arrayValue);case 10:case 11:return function(s){let i=0;return li(s.fields,(r,o)=>{i+=r.length+Sl(o)}),i}(n.mapValue);default:throw pt(13486,{value:n})}}function mm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Nh(n){return!!n&&"integerValue"in n}function Gd(n){return!!n&&"arrayValue"in n}function _m(n){return!!n&&"nullValue"in n}function ym(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Al(n){return!!n&&"mapValue"in n}function v1(n){return(n?.mapValue?.fields||{})[Bv]?.stringValue===Uv}function Do(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return li(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=Do(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Do(n.arrayValue.values[e]);return t}return{...n}}function w1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===b1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.value=t}static empty(){return new Qe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!Al(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Do(e)}setAll(t){let e=Se.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,s,i),s={},i=[],e=a.popLast()}o?s[a.lastSegment()]=Do(o):i.push(a.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,s,i)}delete(t){const e=this.field(t.popLast());Al(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=e.mapValue.fields[t.get(s)];Al(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,s){li(e,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new Qe(Do(this.value))}}function $v(n){const t=[];return li(n.fields,(e,s)=>{const i=new Se([e]);if(Al(s)){const r=$v(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new an(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t,e,s,i,r,o,a){this.key=t,this.documentType=e,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ve(t,0,vt.min(),vt.min(),vt.min(),Qe.empty(),0)}static newFoundDocument(t,e,s,i){return new Ve(t,1,e,vt.min(),s,i,0)}static newNoDocument(t,e){return new Ve(t,2,e,vt.min(),vt.min(),Qe.empty(),0)}static newUnknownDocument(t,e){return new Ve(t,3,e,vt.min(),vt.min(),Qe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ve&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ve(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t,e){this.position=t,this.inclusive=e}}function bm(n,t,e){let s=0;for(let i=0;i<n.position.length;i++){const r=t[i],o=n.position[i];if(r.field.isKeyField()?s=ut.comparator(ut.fromName(o.referenceValue),e.key):s=Tr(o,e.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function vm(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Gn(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,e="asc"){this.field=t,this.dir=e}}function x1(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{}class ue extends zv{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new E1(t,e,s):e==="array-contains"?new A1(t,s):e==="in"?new C1(t,s):e==="not-in"?new P1(t,s):e==="array-contains-any"?new R1(t,s):new ue(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new I1(t,s):new S1(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Tr(e,this.value)):e!==null&&si(this.value)===si(e)&&this.matchesComparison(Tr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends zv{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new In(t,e)}matches(t){return jv(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jv(n){return n.op==="and"}function Hv(n){return T1(n)&&jv(n)}function T1(n){for(const t of n.filters)if(t instanceof In)return!1;return!0}function Fh(n){if(n instanceof ue)return n.field.canonicalString()+n.op.toString()+Er(n.value);if(Hv(n))return n.filters.map(t=>Fh(t)).join(",");{const t=n.filters.map(e=>Fh(e)).join(",");return`${n.op}(${t})`}}function Wv(n,t){return n instanceof ue?function(s,i){return i instanceof ue&&s.op===i.op&&s.field.isEqual(i.field)&&Gn(s.value,i.value)}(n,t):n instanceof In?function(s,i){return i instanceof In&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&Wv(o,i.filters[a]),!0):!1}(n,t):void pt(19439)}function qv(n){return n instanceof ue?function(e){return`${e.field.canonicalString()} ${e.op} ${Er(e.value)}`}(n):n instanceof In?function(e){return e.op.toString()+" {"+e.getFilters().map(qv).join(" ,")+"}"}(n):"Filter"}class E1 extends ue{constructor(t,e,s){super(t,e,s),this.key=ut.fromName(s.referenceValue)}matches(t){const e=ut.comparator(t.key,this.key);return this.matchesComparison(e)}}class I1 extends ue{constructor(t,e){super(t,"in",e),this.keys=Gv("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class S1 extends ue{constructor(t,e){super(t,"not-in",e),this.keys=Gv("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Gv(n,t){return(t.arrayValue?.values||[]).map(e=>ut.fromName(e.referenceValue))}class A1 extends ue{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Gd(e)&&Qo(e.arrayValue,this.value)}}class C1 extends ue{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Qo(this.value.arrayValue,e)}}class P1 extends ue{constructor(t,e){super(t,"not-in",e)}matches(t){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Qo(this.value.arrayValue,e)}}class R1 extends ue{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Gd(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>Qo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(t,e=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function wm(n,t=null,e=[],s=[],i=null,r=null,o=null){return new k1(n,t,e,s,i,r,o)}function Kd(n){const t=xt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>Fh(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),zc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>Er(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>Er(s)).join(",")),t.Te=e}return t.Te}function Yd(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!x1(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Wv(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!vm(n.startAt,t.startAt)&&vm(n.endAt,t.endAt)}function Bh(n){return ut.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t,e=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function D1(n,t,e,s,i,r,o,a){return new Nr(n,t,e,s,i,r,o,a)}function Hc(n){return new Nr(n)}function xm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kv(n){return n.collectionGroup!==null}function Mo(n){const t=xt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ge(Se.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ic(r,s))}),e.has(Se.keyField().canonicalString())||t.Ie.push(new ic(Se.keyField(),s))}return t.Ie}function Fn(n){const t=xt(n);return t.Ee||(t.Ee=M1(t,Mo(n))),t.Ee}function M1(n,t){if(n.limitType==="F")return wm(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new ic(i.field,r)});const e=n.endAt?new sc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new sc(n.startAt.position,n.startAt.inclusive):null;return wm(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function Uh(n,t){const e=n.filters.concat([t]);return new Nr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function $h(n,t,e){return new Nr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Wc(n,t){return Yd(Fn(n),Fn(t))&&n.limitType===t.limitType}function Yv(n){return`${Kd(Fn(n))}|lt:${n.limitType}`}function rr(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(i=>qv(i)).join(", ")}]`),zc(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(i=>Er(i)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(i=>Er(i)).join(",")),`Target(${s})`}(Fn(n))}; limitType=${n.limitType})`}function qc(n,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ut.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(n,t)&&function(s,i){for(const r of Mo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(n,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(n,t)&&function(s,i){return!(s.startAt&&!function(o,a,l){const c=bm(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,Mo(s),i)||s.endAt&&!function(o,a,l){const c=bm(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,Mo(s),i))}(n,t)}function O1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xv(n){return(t,e)=>{let s=!1;for(const i of Mo(n)){const r=L1(i,t,e);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function L1(n,t,e){const s=n.field.isKeyField()?ut.comparator(t.key,e.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Tr(l,c):pt(42886)}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return pt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[e]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){li(this.inner,(e,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return Mv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new ne(ut.comparator);function ys(){return V1}const Qv=new ne(ut.comparator);function po(...n){let t=Qv;for(const e of n)t=t.insert(e.key,e);return t}function Jv(n){let t=Qv;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function Ci(){return Oo()}function Zv(){return Oo()}function Oo(){return new Wi(n=>n.toString(),(n,t)=>n.isEqual(t))}const N1=new ne(ut.comparator),F1=new ge(ut.comparator);function kt(...n){let t=F1;for(const e of n)t=t.add(e);return t}const B1=new ge(Rt);function U1(){return B1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(t)?"-0":t}}function t0(n){return{integerValue:""+n}}function e0(n,t){return p1(t)?t0(t):Xd(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function $1(n,t,e){return n instanceof rc?function(i,r){const o={fields:{[Vv]:{stringValue:Lv},[Fv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&qd(r)&&(r=jc(r)),r&&(o.fields[Nv]=r),{mapValue:o}}(e,t):n instanceof Jo?s0(n,t):n instanceof Zo?i0(n,t):function(i,r){const o=n0(i,r),a=Tm(o)+Tm(i.Ae);return Nh(o)&&Nh(i.Ae)?t0(a):Xd(i.serializer,a)}(n,t)}function z1(n,t,e){return n instanceof Jo?s0(n,t):n instanceof Zo?i0(n,t):e}function n0(n,t){return n instanceof ta?function(s){return Nh(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class rc extends Gc{}class Jo extends Gc{constructor(t){super(),this.elements=t}}function s0(n,t){const e=r0(t);for(const s of n.elements)e.some(i=>Gn(i,s))||e.push(s);return{arrayValue:{values:e}}}class Zo extends Gc{constructor(t){super(),this.elements=t}}function i0(n,t){let e=r0(t);for(const s of n.elements)e=e.filter(i=>!Gn(i,s));return{arrayValue:{values:e}}}class ta extends Gc{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Tm(n){return ae(n.integerValue||n.doubleValue)}function r0(n){return Gd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(t,e){this.field=t,this.transform=e}}function H1(n,t){return n.field.isEqual(t.field)&&function(s,i){return s instanceof Jo&&i instanceof Jo||s instanceof Zo&&i instanceof Zo?xr(s.elements,i.elements,Gn):s instanceof ta&&i instanceof ta?Gn(s.Ae,i.Ae):s instanceof rc&&i instanceof rc}(n.transform,t.transform)}class W1{constructor(t,e){this.version=t,this.transformResults=e}}class gn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new gn}static exists(t){return new gn(void 0,t)}static updateTime(t){return new gn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Cl(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Kc{}function o0(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Qd(n.key,gn.none()):new va(n.key,n.data,gn.none());{const e=n.data,s=Qe.empty();let i=new ge(Se.comparator);for(let r of t.fields)if(!i.has(r)){let o=e.field(r);o===null&&r.length>1&&(r=r.popLast(),o=e.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new ci(n.key,s,new an(i.toArray()),gn.none())}}function q1(n,t,e){n instanceof va?function(i,r,o){const a=i.value.clone(),l=Im(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof ci?function(i,r,o){if(!Cl(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Im(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(a0(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Lo(n,t,e,s){return n instanceof va?function(r,o,a,l){if(!Cl(r.precondition,o))return a;const c=r.value.clone(),h=Sm(r.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,t,e,s):n instanceof ci?function(r,o,a,l){if(!Cl(r.precondition,o))return a;const c=Sm(r.fieldTransforms,l,o),h=o.data;return h.setAll(a0(r)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(n,t,e,s):function(r,o,a){return Cl(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,t,e)}function G1(n,t){let e=null;for(const s of n.fieldTransforms){const i=t.data.field(s.field),r=n0(s.transform,i||null);r!=null&&(e===null&&(e=Qe.empty()),e.set(s.field,r))}return e||null}function Em(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&xr(s,i,(r,o)=>H1(r,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class va extends Kc{constructor(t,e,s,i=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ci extends Kc{constructor(t,e,s,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function a0(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function Im(n,t,e){const s=new Map;$t(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const r=n[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,z1(o,a,e[i]))}return s}function Sm(n,t,e){const s=new Map;for(const i of n){const r=i.transform,o=e.data.field(i.field);s.set(i.field,$1(r,o,t))}return s}class Qd extends Kc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K1 extends Kc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(t,e,s,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&q1(r,t,s[i])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=Lo(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=Lo(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=Zv();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=e.has(i.key)?null:a;const l=o0(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(vt.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),kt())}isEqual(t){return this.batchId===t.batchId&&xr(this.mutations,t.mutations,(e,s)=>Em(e,s))&&xr(this.baseMutations,t.baseMutations,(e,s)=>Em(e,s))}}class Jd{constructor(t,e,s,i){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=i}static from(t,e,s){$t(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let i=function(){return N1}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Jd(t,e,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce,Ot;function J1(n){switch(n){case U.OK:return pt(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return pt(15467,{code:n})}}function l0(n){if(n===void 0)return _s("GRPC error has no .code"),U.UNKNOWN;switch(n){case ce.OK:return U.OK;case ce.CANCELLED:return U.CANCELLED;case ce.UNKNOWN:return U.UNKNOWN;case ce.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ce.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ce.INTERNAL:return U.INTERNAL;case ce.UNAVAILABLE:return U.UNAVAILABLE;case ce.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ce.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ce.NOT_FOUND:return U.NOT_FOUND;case ce.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ce.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ce.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ce.ABORTED:return U.ABORTED;case ce.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ce.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ce.DATA_LOSS:return U.DATA_LOSS;default:return pt(39323,{code:n})}}(Ot=ce||(ce={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new Ks([4294967295,4294967295],0);function Am(n){const t=Z1().encode(n),e=new Tv;return e.update(t),new Uint8Array(e.digest())}function Cm(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ks([e,s],0),new Ks([i,r],0)]}class Zd{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new go(`Invalid padding: ${e}`);if(s<0)throw new go(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new go(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Ks.fromNumber(this.ge)}ye(t,e,s){let i=t.add(e.multiply(Ks.fromNumber(s)));return i.compare(tP)===1&&(i=new Ks([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Am(t),[s,i]=Cm(e);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(t,e,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Zd(r,i,e);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.ge===0)return;const e=Am(t),[s,i]=Cm(e);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,e,s,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const i=new Map;return i.set(t,wa.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new Yc(vt.min(),i,new ne(Rt),ys(),kt())}}class wa{constructor(t,e,s,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new wa(s,e,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,e,s,i){this.be=t,this.removedTargetIds=e,this.key=s,this.De=i}}class c0{constructor(t,e){this.targetId=t,this.Ce=e}}class u0{constructor(t,e,s=Ae.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=i}}class Pm{constructor(){this.ve=0,this.Fe=Rm(),this.Me=Ae.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=kt(),e=kt(),s=kt();return this.Fe.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:s=s.add(i);break;default:pt(38017,{changeType:r})}}),new wa(this.Me,this.xe,t,e,s)}qe(){this.Oe=!1,this.Fe=Rm()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eP{constructor(t){this.Ge=t,this.ze=new Map,this.je=ys(),this.Je=el(),this.He=el(),this.Ye=new ne(Rt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const s=this.nt(e);switch(t.state){case 0:this.rt(e)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),s.Le(t.resumeToken));break;default:pt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((s,i)=>{this.rt(i)&&e(i)})}st(t){const e=t.targetId,s=t.Ce.count,i=this.ot(e);if(i){const r=i.target;if(Bh(r))if(s===0){const o=new ut(r.path);this.et(e,o,Ve.newNoDocument(o,vt.min()))}else $t(s===1,20013,{expectedCount:s});else{const o=this._t(e);if(o!==s){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(e);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,c)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=e;let o,a;try{o=ni(s).toUint8Array()}catch(l){if(l instanceof Ov)return wr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Zd(o,i,r)}catch(l){return wr(l instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,e,s){return e.Ce.count===s-this.Pt(t,e.targetId)?0:2}Pt(t,e){const s=this.Ge.getRemoteKeysForTarget(e);let i=0;return s.forEach(r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(e,r,null),i++)}),i}Tt(t){const e=new Map;this.ze.forEach((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Bh(a.target)){const l=new ut(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ve.newNoDocument(l,t))}r.Be&&(e.set(o,r.ke()),r.qe())}});let s=kt();this.He.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.je.forEach((r,o)=>o.setReadTime(t));const i=new Yc(t,e,this.Ye,this.je,s);return this.je=ys(),this.Je=el(),this.He=el(),this.Ye=new ne(Rt),i}Xe(t,e){if(!this.rt(t))return;const s=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,s),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,s){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),s&&(this.je=this.je.insert(e,s))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Pm,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ge(Rt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ge(Rt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||nt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Pm),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function el(){return new ne(ut.comparator)}function Rm(){return new ne(ut.comparator)}const nP={asc:"ASCENDING",desc:"DESCENDING"},sP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iP={and:"AND",or:"OR"};class rP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function zh(n,t){return n.useProto3Json||zc(t)?t:{value:t}}function oc(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function h0(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function oP(n,t){return oc(n,t.toTimestamp())}function Bn(n){return $t(!!n,49232),vt.fromTimestamp(function(e){const s=ei(e);return new qt(s.seconds,s.nanos)}(n))}function tf(n,t){return jh(n,t).canonicalString()}function jh(n,t){const e=function(i){return new Wt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function d0(n){const t=Wt.fromString(n);return $t(_0(t),10190,{key:t.toString()}),t}function Hh(n,t){return tf(n.databaseId,t.path)}function Ku(n,t){const e=d0(t);if(e.get(1)!==n.databaseId.projectId)throw new et(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new et(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ut(p0(e))}function f0(n,t){return tf(n.databaseId,t)}function aP(n){const t=d0(n);return t.length===4?Wt.emptyPath():p0(t)}function Wh(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function p0(n){return $t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function km(n,t,e){return{name:Hh(n,t),fields:e.value.mapValue.fields}}function lP(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:pt(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(c,h){return c.useProto3Json?($t(h===void 0||typeof h=="string",58123),Ae.fromBase64String(h||"")):($t(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ae.fromUint8Array(h||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:l0(c.code);return new et(h,c.message||"")}(o);e=new u0(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Ku(n,s.document.name),r=Bn(s.document.updateTime),o=s.document.createTime?Bn(s.document.createTime):vt.min(),a=new Qe({mapValue:{fields:s.document.fields}}),l=Ve.newFoundDocument(i,r,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];e=new Pl(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Ku(n,s.document),r=s.readTime?Bn(s.readTime):vt.min(),o=Ve.newNoDocument(i,r),a=s.removedTargetIds||[];e=new Pl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Ku(n,s.document),r=s.removedTargetIds||[];e=new Pl([],r,i,null)}else{if(!("filter"in t))return pt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new Q1(i,r),a=s.targetId;e=new c0(a,o)}}return e}function cP(n,t){let e;if(t instanceof va)e={update:km(n,t.key,t.value)};else if(t instanceof Qd)e={delete:Hh(n,t.key)};else if(t instanceof ci)e={update:km(n,t.key,t.data),updateMask:yP(t.fieldMask)};else{if(!(t instanceof K1))return pt(16599,{Vt:t.type});e={verify:Hh(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof rc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw pt(20930,{transform:o.transform})}(0,s))),t.precondition.isNone||(e.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:oP(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:pt(27497)}(n,t.precondition)),e}function uP(n,t){return n&&n.length>0?($t(t!==void 0,14353),n.map(e=>function(i,r){let o=i.updateTime?Bn(i.updateTime):Bn(r);return o.isEqual(vt.min())&&(o=Bn(r)),new W1(o,i.transformResults||[])}(e,t))):[]}function hP(n,t){return{documents:[f0(n,t.path)]}}function dP(n,t){const e={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=f0(n,i);const r=function(c){if(c.length!==0)return m0(In.create(c,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:or(f.field),direction:gP(f.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const a=zh(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ft:e,parent:i}}function fP(n){let t=aP(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let i=null;if(s>0){$t(s===1,65062);const h=e.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let r=[];e.where&&(r=function(d){const f=g0(d);return f instanceof In&&Hv(f)?f.getFilters():[f]}(e.where));let o=[];e.orderBy&&(o=function(d){return d.map(f=>function(_){return new ic(ar(_.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(e.orderBy));let a=null;e.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,zc(f)?null:f}(e.limit));let l=null;e.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new sc(g,f)}(e.startAt));let c=null;return e.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new sc(g,f)}(e.endAt)),D1(t,i,o,r,a,"F",l,c)}function pP(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:i})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function g0(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=ar(e.unaryFilter.field);return ue.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=ar(e.unaryFilter.field);return ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ar(e.unaryFilter.field);return ue.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ar(e.unaryFilter.field);return ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}}(n):n.fieldFilter!==void 0?function(e){return ue.create(ar(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return In.create(e.compositeFilter.filters.map(s=>g0(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pt(1026)}}(e.compositeFilter.op))}(n):pt(30097,{filter:n})}function gP(n){return nP[n]}function mP(n){return sP[n]}function _P(n){return iP[n]}function or(n){return{fieldPath:n.canonicalString()}}function ar(n){return Se.fromServerFormat(n.fieldPath)}function m0(n){return n instanceof ue?function(e){if(e.op==="=="){if(ym(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NAN"}};if(_m(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ym(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NOT_NAN"}};if(_m(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:or(e.field),op:mP(e.op),value:e.value}}}(n):n instanceof In?function(e){const s=e.getFilters().map(i=>m0(i));return s.length===1?s[0]:{compositeFilter:{op:_P(e.op),filters:s}}}(n):pt(54877,{filter:n})}function yP(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function _0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,e,s,i,r=vt.min(),o=vt.min(),a=Ae.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Fs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t){this.yt=t}}function vP(n){const t=fP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$h(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Cn=new xP}addToCollectionParentIndex(t,e){return this.Cn.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve(ti.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve(ti.min())}updateCollectionGroup(t,e,s){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class xP{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),i=this.index[e]||new ge(Wt.comparator),r=!i.has(s);return this.index[e]=i.add(s),r}has(t){const e=t.lastSegment(),s=t.popLast(),i=this.index[e];return i&&i.has(s)}getEntries(t){return(this.index[t]||new ge(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y0=41943040;class Xe{static withCacheSize(t){return new Xe(t,Xe.DEFAULT_COLLECTION_PERCENTILE,Xe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xe.DEFAULT_COLLECTION_PERCENTILE=10,Xe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xe.DEFAULT=new Xe(y0,Xe.DEFAULT_COLLECTION_PERCENTILE,Xe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xe.DISABLED=new Xe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ir(0)}static cr(){return new Ir(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="LruGarbageCollector",TP=1048576;function Om([n,t],[e,s]){const i=Rt(n,e);return i===0?Rt(t,s):i}class EP{constructor(t){this.Ir=t,this.buffer=new ge(Om),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Om(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){nt(Mm,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vr(e)?nt(Mm,"Ignoring IndexedDB error during garbage collection: ",e):await Lr(e)}await this.Vr(3e5)})}}class SP{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(s=>Math.floor(e/100*s))}nthSequenceNumber(t,e){if(e===0)return $.resolve($c.ce);const s=new EP(e);return this.mr.forEachTarget(t,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(t,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(t,e,s){return this.mr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Dm)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dm):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let s,i,r,o,a,l,c;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(s=d,a=Date.now(),this.removeTargets(t,s,e))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,s))).next(d=>(c=Date.now(),ir()<=Pt.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:d})))}}function AP(n,t){return new SP(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.changes=new Wi(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ve.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?$.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(t,e,s,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(s!==null&&Lo(s.mutation,i,an.empty(),qt.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,kt()).next(()=>s))}getLocalViewOfDocuments(t,e,s=kt()){const i=Ci();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,s).next(r=>{let o=po();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const s=Ci();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,kt()))}populateOverlays(t,e,s){const i=[];return s.forEach(r=>{e.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,s,i){let r=ys();const o=Oo(),a=function(){return Oo()}();return e.forEach((l,c)=>{const h=s.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof ci)?r=r.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Lo(h.mutation,c,h.mutation.getFieldMask(),qt.now())):o.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>a.set(c,new PP(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(t,e){const s=Oo();let i=new ne((o,a)=>o-a),r=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=e.get(l);if(c===null)return;let h=s.get(l)||an.empty();h=a.applyToLocalView(c,h),s.set(l,h);const d=(i.get(a.batchId)||kt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Zv();h.forEach(f=>{if(!r.has(f)){const g=o0(e.get(f),s.get(f));g!==null&&d.set(f,g),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return $.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,i){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Kv(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,i):this.getDocumentsMatchingCollectionQuery(t,e,s,i)}getNextDocuments(t,e,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,i-r.size):$.resolve(Ci());let a=Ko,l=r;return o.next(c=>$.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,kt())).next(h=>({batchId:a,changes:Jv(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ut(e)).next(s=>{let i=po();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,s,i){const r=e.collectionGroup;let o=po();return this.indexManager.getCollectionParents(t,r).next(a=>$.forEach(a,l=>{const c=function(d,f){return new Nr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,s,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,r,i))).next(o=>{r.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ve.newInvalidDocument(h)))});let a=po();return o.forEach((l,c)=>{const h=r.get(l);h!==void 0&&Lo(h.mutation,c,an.empty(),qt.now()),qc(e,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return $.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(i){return{name:i.name,query:vP(i.bundledQuery),readTime:Bn(i.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.overlays=new ne(ut.comparator),this.qr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const s=Ci();return $.forEach(e,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((i,r)=>{this.St(t,e,r)}),$.resolve()}removeOverlaysForBatchId(t,e,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,e,s){const i=Ci(),r=e.length+1,o=new ut(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(t,e,s,i){let r=new ne((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>s){let h=r.get(c.largestBatchId);h===null&&(h=Ci(),r=r.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ci(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return $.resolve(a)}St(t,e,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new X1(e,s));let r=this.qr.get(e);r===void 0&&(r=kt(),this.qr.set(e,r)),this.qr.set(e,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.Qr=new ge(me.$r),this.Ur=new ge(me.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const s=new me(t,e);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.Gr(new me(t,e))}zr(t,e){t.forEach(s=>this.removeReference(s,e))}jr(t){const e=new ut(new Wt([])),s=new me(e,t),i=new me(e,t+1),r=[];return this.Ur.forEachInRange([s,i],o=>{this.Gr(o),r.push(o.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ut(new Wt([])),s=new me(e,t),i=new me(e,t+1);let r=kt();return this.Ur.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const e=new me(t,0),s=this.Qr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class me{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ut.comparator(t.key,e.key)||Rt(t.Yr,e.Yr)}static Kr(t,e){return Rt(t.Yr,e.Yr)||ut.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ge(me.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Y1(r,e,s,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new me(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,e){return $.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,i=this.ei(s),r=i<0?0:i;return $.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Wd:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new me(e,0),i=new me(e,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],o=>{const a=this.Xr(o.Yr);r.push(a)}),$.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new ge(Rt);return e.forEach(i=>{const r=new me(i,0),o=new me(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],a=>{s=s.add(a.Yr)})}),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,i=s.length+1;let r=s;ut.isDocumentKey(r)||(r=r.child(""));const o=new me(new ut(r),0);let a=new ge(Rt);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},o),$.resolve(this.ti(a))}ti(t){const e=[];return t.forEach(s=>{const i=this.Xr(s);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){$t(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(e.mutations,i=>{const r=new me(i.key,e.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,e){const s=new me(e,0),i=this.Zr.firstAfterOrEqual(s);return $.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(t){this.ri=t,this.docs=function(){return new ne(ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return $.resolve(s?s.document.mutableCopy():Ve.newInvalidDocument(e))}getEntries(t,e){let s=ys();return e.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Ve.newInvalidDocument(i))}),$.resolve(s)}getDocumentsMatchingQuery(t,e,s,i){let r=ys();const o=e.path,a=new ut(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||u1(c1(h),s)<=0||(i.has(h.key)||qc(e,h))&&(r=r.insert(h.key,h.mutableCopy()))}return $.resolve(r)}getAllFromCollectionGroup(t,e,s,i){pt(9500)}ii(t,e){return $.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new VP(this)}getSize(t){return $.resolve(this.size)}}class VP extends CP{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(s)}),$.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t){this.persistence=t,this.si=new Wi(e=>Kd(e),Yd),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new ef,this.targetCount=0,this.ai=Ir.ur()}forEachTarget(t,e){return this.si.forEach((s,i)=>e(i)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.oi&&(this.oi=e),$.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ir(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.Pr(e),$.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,s){let i=0;const r=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=e&&s.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),$.waitFor(r).next(()=>i)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const s=this.si.get(e)||null;return $.resolve(s)}addMatchingKeys(t,e,s){return this._i.Wr(e,s),$.resolve()}removeMatchingKeys(t,e,s){this._i.zr(e,s);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),$.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),$.resolve()}getMatchingKeysForTargetId(t,e){const s=this._i.Hr(e);return $.resolve(s)}containsKey(t,e){return $.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(t,e){this.ui={},this.overlays={},this.ci=new $c(0),this.li=!1,this.li=!0,this.hi=new MP,this.referenceDelegate=t(this),this.Pi=new NP(this),this.indexManager=new wP,this.remoteDocumentCache=function(i){return new LP(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new bP(e),this.Ii=new kP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new DP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.ui[t.toKey()];return s||(s=new OP(e,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,s){nt("MemoryPersistence","Starting transaction:",t);const i=new FP(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(r=>this.referenceDelegate.di(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ai(t,e){return $.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,e)))}}class FP extends d1{constructor(t){super(),this.currentSequenceNumber=t}}class nf{constructor(t){this.persistence=t,this.Ri=new ef,this.Vi=null}static mi(t){return new nf(t)}get fi(){if(this.Vi)return this.Vi;throw pt(60996)}addReference(t,e,s){return this.Ri.addReference(s,e),this.fi.delete(s.toString()),$.resolve()}removeReference(t,e,s){return this.Ri.removeReference(s,e),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),$.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(r=>this.fi.add(r.toString()))}).next(()=>s.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,s=>{const i=ut.fromPath(s);return this.gi(t,i).next(r=>{r||e.removeEntry(i,vt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(s=>{s?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return $.or([()=>$.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class ac{constructor(t,e){this.persistence=t,this.pi=new Wi(s=>g1(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=AP(this,e)}static mi(t,e){return new ac(t,e)}Ei(){}di(t){return $.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>e.next(i=>s+i))}wr(t){let e=0;return this.pr(t,s=>{e++}).next(()=>e)}pr(t,e){return $.forEach(this.pi,(s,i)=>this.br(t,s,i).next(r=>r?$.resolve():e(i)))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(t,o=>this.br(t,o,e).next(a=>{a||(s++,r.removeEntry(o,vt.min()))})).next(()=>r.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),$.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,e,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),$.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Sl(t.data.value)),e}br(t,e,s){return $.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return $.resolve(i!==void 0&&i>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,e,s,i){this.targetId=t,this.fromCache=e,this.Es=s,this.ds=i}static As(t,e){let s=kt(),i=kt();for(const r of e.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new sf(t,e.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return OI()?8:f1($e())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,s,i){const r={result:null};return this.ys(t,e).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ws(t,e,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new BP;return this.Ss(t,e,o).next(a=>{if(r.result=a,this.Vs)return this.bs(t,e,o,a.size)})}).next(()=>r.result)}bs(t,e,s,i){return s.documentReadCount<this.fs?(ir()<=Pt.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",rr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(ir()<=Pt.DEBUG&&nt("QueryEngine","Query:",rr(e),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(ir()<=Pt.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",rr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fn(e))):$.resolve())}ys(t,e){if(xm(e))return $.resolve(null);let s=Fn(e);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=$h(e,null,"F"),s=Fn(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=kt(...r);return this.ps.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(l=>{const c=this.Ds(e,a);return this.Cs(e,c,o,l.readTime)?this.ys(t,$h(e,null,"F")):this.vs(t,c,e,l)}))})))}ws(t,e,s,i){return xm(e)||i.isEqual(vt.min())?$.resolve(null):this.ps.getDocuments(t,s).next(r=>{const o=this.Ds(e,r);return this.Cs(e,o,s,i)?$.resolve(null):(ir()<=Pt.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rr(e)),this.vs(t,o,e,l1(i,Ko)).next(a=>a))})}Ds(t,e){let s=new ge(Xv(t));return e.forEach((i,r)=>{qc(t,r)&&(s=s.add(r))}),s}Cs(t,e,s,i){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,e,s){return ir()<=Pt.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",rr(e)),this.ps.getDocumentsMatchingQuery(t,e,ti.min(),s)}vs(t,e,s,i){return this.ps.getDocumentsMatchingQuery(t,s,i).next(r=>(e.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="LocalStore",$P=3e8;class zP{constructor(t,e,s,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new ne(Rt),this.xs=new Wi(r=>Kd(r),Yd),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new RP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function jP(n,t,e,s){return new zP(n,t,e,s)}async function v0(n,t){const e=xt(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let i;return e.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,e.Bs(t),e.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=kt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return e.localDocuments.getDocuments(s,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function HP(n,t){const e=xt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=e.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let g=$.resolve();return f.forEach(_=>{g=g.next(()=>h.getEntry(l,_)).next(b=>{const v=c.docVersions.get(_);$t(v!==null,48541),b.version.compareTo(v)<0&&(d.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(e,s,t,r).next(()=>r.apply(s)).next(()=>e.mutationQueue.performConsistencyCheck(s)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=kt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(s,i))})}function w0(n){const t=xt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function WP(n,t){const e=xt(n),s=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const a=[];t.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(e.Pi.removeMatchingKeys(r,h.removedDocuments,d).next(()=>e.Pi.addMatchingKeys(r,h.addedDocuments,d)));let g=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(Ae.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),i=i.insert(d,g),function(b,v,A){return b.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=$P?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(f,g,h)&&a.push(e.Pi.updateTargetData(r,g))});let l=ys(),c=kt();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(r,h))}),a.push(qP(r,o,t.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!s.isEqual(vt.min())){const h=e.Pi.getLastRemoteSnapshotVersion(r).next(d=>e.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(h)}return $.waitFor(a).next(()=>o.apply(r)).next(()=>e.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(e.Ms=i,r))}function qP(n,t,e){let s=kt(),i=kt();return e.forEach(r=>s=s.add(r)),t.getEntries(n,s).next(r=>{let o=ys();return e.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(vt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):nt(rf,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:i}})}function GP(n,t){const e=xt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Wd),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function KP(n,t){const e=xt(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return e.Pi.getTargetData(s,t).next(r=>r?(i=r,$.resolve(i)):e.Pi.allocateTargetId(s).next(o=>(i=new Fs(t,o,"TargetPurposeListen",s.currentSequenceNumber),e.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=e.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(s.targetId,s),e.xs.set(t,s.targetId)),s})}async function qh(n,t,e){const s=xt(n),i=s.Ms.get(t),r=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vr(o))throw o;nt(rf,`Failed to update sequence numbers for target ${t}: ${o}`)}s.Ms=s.Ms.remove(t),s.xs.delete(i.target)}function Lm(n,t,e){const s=xt(n);let i=vt.min(),r=kt();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=xt(l),f=d.xs.get(h);return f!==void 0?$.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(s,o,Fn(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,t,e?i:vt.min(),e?r:kt())).next(a=>(YP(s,O1(t),a),{documents:a,Qs:r})))}function YP(n,t,e){let s=n.Os.get(t)||vt.min();e.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),n.Os.set(t,s)}class Vm{constructor(){this.activeTargetIds=U1()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class XP{constructor(){this.Mo=new Vm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,s){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Vm,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="ConnectivityMonitor";class Fm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){nt(Nm,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){nt(Nm,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl=null;function Gh(){return nl===null?nl=function(){return 268435456+Math.round(2147483648*Math.random())}():nl++,"0x"+nl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="RestConnection",JP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZP{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===ec?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(t,e,s,i,r){const o=Gh(),a=this.zo(t,e.toUriEncodedString());nt(Yu,`Sending RPC '${t}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,r);const{host:c}=new URL(a),h=kr(c);return this.Jo(t,a,l,s,h).then(d=>(nt(Yu,`Received RPC '${t}' ${o}: `,d),d),d=>{throw wr(Yu,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(t,e,s,i,r,o){return this.Go(t,e,s,i,r)}jo(t,e,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Or}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,r)=>t[r]=i),s&&s.headers.forEach((i,r)=>t[r]=i)}zo(t,e){const s=JP[t];return`${this.Uo}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke="WebChannelConnection";class eR extends ZP{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,s,i,r){const o=Gh();return new Promise((a,l)=>{const c=new Ev;c.setWithCredentials(!0),c.listenOnce(Iv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Il.NO_ERROR:const d=c.getResponseJson();nt(ke,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case Il.TIMEOUT:nt(ke,`RPC '${t}' ${o} timed out`),l(new et(U.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:const f=c.getStatus();if(nt(ke,`RPC '${t}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const b=function(A){const C=A.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(C)>=0?C:U.UNKNOWN}(_.status);l(new et(b,_.message))}else l(new et(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new et(U.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{l_:t,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{nt(ke,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(i);nt(ke,`RPC '${t}' ${o} sending request:`,i),c.send(e,"POST",h,s,15)})}T_(t,e,s){const i=Gh(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Cv(),a=Av(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,e,s),l.encodeInitMessageHeaders=!0;const h=r.join("");nt(ke,`Creating RPC '${t}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const _=new tR({Yo:v=>{g?nt(ke,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(f||(nt(ke,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),nt(ke,`RPC '${t}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),b=(v,A,C)=>{v.listen(A,M=>{try{C(M)}catch(k){setTimeout(()=>{throw k},0)}})};return b(d,fo.EventType.OPEN,()=>{g||(nt(ke,`RPC '${t}' stream ${i} transport opened.`),_.o_())}),b(d,fo.EventType.CLOSE,()=>{g||(g=!0,nt(ke,`RPC '${t}' stream ${i} transport closed`),_.a_(),this.E_(d))}),b(d,fo.EventType.ERROR,v=>{g||(g=!0,wr(ke,`RPC '${t}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),_.a_(new et(U.UNAVAILABLE,"The operation could not be completed")))}),b(d,fo.EventType.MESSAGE,v=>{if(!g){const A=v.data[0];$t(!!A,16349);const C=A,M=C?.error||C[0]?.error;if(M){nt(ke,`RPC '${t}' stream ${i} received error:`,M);const k=M.status;let D=function(y){const x=ce[y];if(x!==void 0)return l0(x)}(k),N=M.message;D===void 0&&(D=U.INTERNAL,N="Unknown error status: "+k+" with message "+M.message),g=!0,_.a_(new et(D,N)),d.close()}else nt(ke,`RPC '${t}' stream ${i} received:`,A),_.u_(A)}}),b(a,Sv.STAT_EVENT,v=>{v.stat===Oh.PROXY?nt(ke,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===Oh.NOPROXY&&nt(ke,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function Xu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){return new rP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,e,s=1e3,i=1.5,r=6e4){this.Mi=t,this.timerId=e,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-s);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="PersistentStream";class T0{constructor(t,e,s,i,r,o,a,l){this.Mi=t,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x0(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===U.RESOURCE_EXHAUSTED?(_s(e.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===e&&this.G_(s,i)},s=>{t(()=>{const i=new et(U.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(t,e){const s=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return nt(Bm,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(nt(Bm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nR extends T0{constructor(t,e,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,i,o),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=lP(this.serializer,t),s=function(r){if(!("targetChange"in r))return vt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?vt.min():o.readTime?Bn(o.readTime):vt.min()}(t);return this.listener.H_(e,s)}Y_(t){const e={};e.database=Wh(this.serializer),e.addTarget=function(r,o){let a;const l=o.target;if(a=Bh(l)?{documents:hP(r,l)}:{query:dP(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=h0(r,o.resumeToken);const c=zh(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(vt.min())>0){a.readTime=oc(r,o.snapshotVersion.toTimestamp());const c=zh(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const s=pP(this.serializer,t);s&&(e.labels=s),this.q_(e)}Z_(t){const e={};e.database=Wh(this.serializer),e.removeTarget=t,this.q_(e)}}class sR extends T0{constructor(t,e,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return $t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,$t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){$t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=uP(t.writeResults,t.commitTime),s=Bn(t.commitTime);return this.listener.na(s,e)}ra(){const t={};t.database=Wh(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(s=>cP(this.serializer,s))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{}class rR extends iR{constructor(t,e,s,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new et(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(t,jh(e,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new et(U.UNKNOWN,r.toString())})}Ho(t,e,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(t,jh(e,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new et(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class oR{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_s(e),this.aa=!1):nt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="RemoteStore";class aR{constructor(t,e,s,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{qi(this)&&(nt(Ui,"Restarting streams for network reachability change."),await async function(l){const c=xt(l);c.Ea.add(4),await xa(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Qc(c)}(this))})}),this.Ra=new oR(s,i)}}async function Qc(n){if(qi(n))for(const t of n.da)await t(!0)}async function xa(n){for(const t of n.da)await t(!1)}function E0(n,t){const e=xt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),cf(e)?lf(e):Fr(e).O_()&&af(e,t))}function of(n,t){const e=xt(n),s=Fr(e);e.Ia.delete(t),s.O_()&&I0(e,t),e.Ia.size===0&&(s.O_()?s.L_():qi(e)&&e.Ra.set("Unknown"))}function af(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Fr(n).Y_(t)}function I0(n,t){n.Va.Ue(t),Fr(n).Z_(t)}function lf(n){n.Va=new eP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Fr(n).start(),n.Ra.ua()}function cf(n){return qi(n)&&!Fr(n).x_()&&n.Ia.size>0}function qi(n){return xt(n).Ea.size===0}function S0(n){n.Va=void 0}async function lR(n){n.Ra.set("Online")}async function cR(n){n.Ia.forEach((t,e)=>{af(n,t)})}async function uR(n,t){S0(n),cf(n)?(n.Ra.ha(t),lf(n)):n.Ra.set("Unknown")}async function hR(n,t,e){if(n.Ra.set("Online"),t instanceof u0&&t.state===2&&t.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(n,t)}catch(s){nt(Ui,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await lc(n,s)}else if(t instanceof Pl?n.Va.Ze(t):t instanceof c0?n.Va.st(t):n.Va.tt(t),!e.isEqual(vt.min()))try{const s=await w0(n.localStore);e.compareTo(s)>=0&&await function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(c);h&&r.Ia.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(Ae.EMPTY_BYTE_STRING,h.snapshotVersion)),I0(r,l);const d=new Fs(h.target,l,c,h.sequenceNumber);af(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(n,e)}catch(s){nt(Ui,"Failed to raise snapshot:",s),await lc(n,s)}}async function lc(n,t,e){if(!Vr(t))throw t;n.Ea.add(1),await xa(n),n.Ra.set("Offline"),e||(e=()=>w0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{nt(Ui,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Qc(n)})}function A0(n,t){return t().catch(e=>lc(n,e,t))}async function Jc(n){const t=xt(n),e=ii(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Wd;for(;dR(t);)try{const i=await GP(t.localStore,s);if(i===null){t.Ta.length===0&&e.L_();break}s=i.batchId,fR(t,i)}catch(i){await lc(t,i)}C0(t)&&P0(t)}function dR(n){return qi(n)&&n.Ta.length<10}function fR(n,t){n.Ta.push(t);const e=ii(n);e.O_()&&e.X_&&e.ea(t.mutations)}function C0(n){return qi(n)&&!ii(n).x_()&&n.Ta.length>0}function P0(n){ii(n).start()}async function pR(n){ii(n).ra()}async function gR(n){const t=ii(n);for(const e of n.Ta)t.ea(e.mutations)}async function mR(n,t,e){const s=n.Ta.shift(),i=Jd.from(s,t,e);await A0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Jc(n)}async function _R(n,t){t&&ii(n).X_&&await async function(s,i){if(function(o){return J1(o)&&o!==U.ABORTED}(i.code)){const r=s.Ta.shift();ii(s).B_(),await A0(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Jc(s)}}(n,t),C0(n)&&P0(n)}async function Um(n,t){const e=xt(n);e.asyncQueue.verifyOperationInProgress(),nt(Ui,"RemoteStore received new credentials");const s=qi(e);e.Ea.add(3),await xa(e),s&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Qc(e)}async function yR(n,t){const e=xt(n);t?(e.Ea.delete(2),await Qc(e)):t||(e.Ea.add(2),await xa(e),e.Ra.set("Unknown"))}function Fr(n){return n.ma||(n.ma=function(e,s,i){const r=xt(e);return r.sa(),new nR(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{Xo:lR.bind(null,n),t_:cR.bind(null,n),r_:uR.bind(null,n),H_:hR.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),cf(n)?lf(n):n.Ra.set("Unknown")):(await n.ma.stop(),S0(n))})),n.ma}function ii(n){return n.fa||(n.fa=function(e,s,i){const r=xt(e);return r.sa(),new sR(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pR.bind(null,n),r_:_R.bind(null,n),ta:gR.bind(null,n),na:mR.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await Jc(n)):(await n.fa.stop(),n.Ta.length>0&&(nt(Ui,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(t,e,s,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,i,r){const o=Date.now()+s,a=new uf(t,e,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hf(n,t){if(_s("AsyncQueue",`${t}: ${n}`),Vr(n))return new et(U.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{static emptySet(t){return new _r(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||ut.comparator(e.key,s.key):(e,s)=>ut.comparator(e.key,s.key),this.keyedMap=po(),this.sortedSet=new ne(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof _r)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new _r;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.ga=new ne(ut.comparator)}track(t){const e=t.doc.key,s=this.ga.get(e);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(e,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(e):t.type===1&&s.type===2?this.ga=this.ga.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):pt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,s)=>{t.push(s)}),t}}class Sr{constructor(t,e,s,i,r,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,s,i,r){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new Sr(t,e,_r.emptySet(e),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==s[i].type||!e[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class vR{constructor(){this.queries=zm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,s){const i=xt(e),r=i.queries;i.queries=zm(),r.forEach((o,a)=>{for(const l of a.Sa)l.onError(s)})})(this,new et(U.ABORTED,"Firestore shutting down"))}}function zm(){return new Wi(n=>Yv(n),Wc)}async function df(n,t){const e=xt(n);let s=3;const i=t.query;let r=e.queries.get(i);r?!r.ba()&&t.Da()&&(s=2):(r=new bR,s=t.Da()?0:1);try{switch(s){case 0:r.wa=await e.onListen(i,!0);break;case 1:r.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(o){const a=hf(o,`Initialization of query '${rr(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,r),r.Sa.push(t),t.va(e.onlineState),r.wa&&t.Fa(r.wa)&&pf(e)}async function ff(n,t){const e=xt(n),s=t.query;let i=3;const r=e.queries.get(s);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=t.Da()?0:1:!r.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function wR(n,t){const e=xt(n);let s=!1;for(const i of t){const r=i.query,o=e.queries.get(r);if(o){for(const a of o.Sa)a.Fa(i)&&(s=!0);o.wa=i}}s&&pf(e)}function xR(n,t,e){const s=xt(n),i=s.queries.get(t);if(i)for(const r of i.Sa)r.onError(e);s.queries.delete(t)}function pf(n){n.Ca.forEach(t=>{t.next()})}var Kh,jm;(jm=Kh||(Kh={})).Ma="default",jm.Cache="cache";class gf{constructor(t,e,s){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Sr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const s=e!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Sr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t){this.key=t}}class k0{constructor(t){this.key=t}}class TR{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=kt(),this.mutatedKeys=kt(),this.eu=Xv(t),this.tu=new _r(this.eu)}get nu(){return this.Ya}ru(t,e){const s=e?e.iu:new $m,i=e?e.tu:this.tu;let r=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((h,d)=>{const f=i.get(h),g=qc(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;f&&g?f.data.isEqual(g.data)?_!==b&&(s.track({type:3,doc:g}),v=!0):this.su(f,g)||(s.track({type:2,doc:g}),v=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),v=!0):f&&!g&&(s.track({type:1,doc:f}),v=!0,(l||c)&&(a=!0)),v&&(g?(o=o.add(g),r=b?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,i){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((h,d)=>function(g,_){const b=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Rt:v})}};return b(g)-b(_)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),i=i??!1;const a=e&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Sr(this.query,t.tu,r,o,t.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $m,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=kt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const e=[];return t.forEach(s=>{this.Xa.has(s)||e.push(new k0(s))}),this.Xa.forEach(s=>{t.has(s)||e.push(new R0(s))}),e}cu(t){this.Ya=t.Qs,this.Xa=kt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Sr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mf="SyncEngine";class ER{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class IR{constructor(t){this.key=t,this.hu=!1}}class SR{constructor(t,e,s,i,r,o){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wi(a=>Yv(a),Wc),this.Iu=new Map,this.Eu=new Set,this.du=new ne(ut.comparator),this.Au=new Map,this.Ru=new ef,this.Vu={},this.mu=new Map,this.fu=Ir.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AR(n,t,e=!0){const s=N0(n);let i;const r=s.Tu.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await D0(s,t,e,!0),i}async function CR(n,t){const e=N0(n);await D0(e,t,!0,!1)}async function D0(n,t,e,s){const i=await KP(n.localStore,Fn(t)),r=i.targetId,o=n.sharedClientState.addLocalQueryTarget(r,e);let a;return s&&(a=await PR(n,t,r,o==="current",i.resumeToken)),n.isPrimaryClient&&e&&E0(n.remoteStore,i),a}async function PR(n,t,e,s,i){n.pu=(d,f,g)=>async function(b,v,A,C){let M=v.view.ru(A);M.Cs&&(M=await Lm(b.localStore,v.query,!1).then(({documents:w})=>v.view.ru(w,M)));const k=C&&C.targetChanges.get(v.targetId),D=C&&C.targetMismatches.get(v.targetId)!=null,N=v.view.applyChanges(M,b.isPrimaryClient,k,D);return Wm(b,v.targetId,N.au),N.snapshot}(n,d,f,g);const r=await Lm(n.localStore,t,!0),o=new TR(t,r.Qs),a=o.ru(r.documents),l=wa.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);Wm(n,e,c.au);const h=new ER(t,e,o);return n.Tu.set(t,h),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),c.snapshot}async function RR(n,t,e){const s=xt(n),i=s.Tu.get(t),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter(o=>!Wc(o,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await qh(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),e&&of(s.remoteStore,i.targetId),Yh(s,i.targetId)}).catch(Lr)):(Yh(s,i.targetId),await qh(s.localStore,i.targetId,!0))}async function kR(n,t){const e=xt(n),s=e.Tu.get(t),i=e.Iu.get(s.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),of(e.remoteStore,s.targetId))}async function DR(n,t,e){const s=BR(n);try{const i=await function(o,a){const l=xt(o),c=qt.now(),h=a.reduce((g,_)=>g.add(_.key),kt());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=ys(),b=kt();return l.Ns.getEntries(g,h).next(v=>{_=v,_.forEach((A,C)=>{C.isValidDocument()||(b=b.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(v=>{d=v;const A=[];for(const C of a){const M=G1(C,d.get(C.key).overlayedDocument);M!=null&&A.push(new ci(C.key,M,$v(M.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,A,a)}).next(v=>{f=v;const A=v.applyToLocalDocumentSet(d,b);return l.documentOverlayCache.saveOverlays(g,v.batchId,A)})}).then(()=>({batchId:f.batchId,changes:Jv(d)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new ne(Rt)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(s,i.batchId,e),await Ta(s,i.changes),await Jc(s.remoteStore)}catch(i){const r=hf(i,"Failed to persist write");e.reject(r)}}async function M0(n,t){const e=xt(n);try{const s=await WP(e.localStore,t);t.targetChanges.forEach((i,r)=>{const o=e.Au.get(r);o&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?$t(o.hu,14607):i.removedDocuments.size>0&&($t(o.hu,42227),o.hu=!1))}),await Ta(e,s,t)}catch(s){await Lr(s)}}function Hm(n,t,e){const s=xt(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const i=[];s.Tu.forEach((r,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=xt(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(a)&&(c=!0)}),c&&pf(l)}(s.eventManager,t),i.length&&s.Pu.H_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function MR(n,t,e){const s=xt(n);s.sharedClientState.updateQueryState(t,"rejected",e);const i=s.Au.get(t),r=i&&i.key;if(r){let o=new ne(ut.comparator);o=o.insert(r,Ve.newNoDocument(r,vt.min()));const a=kt().add(r),l=new Yc(vt.min(),new Map,new ne(Rt),o,a);await M0(s,l),s.du=s.du.remove(r),s.Au.delete(t),_f(s)}else await qh(s.localStore,t,!1).then(()=>Yh(s,t,e)).catch(Lr)}async function OR(n,t){const e=xt(n),s=t.batch.batchId;try{const i=await HP(e.localStore,t);L0(e,s,null),O0(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await Ta(e,i)}catch(i){await Lr(i)}}async function LR(n,t,e){const s=xt(n);try{const i=await function(o,a){const l=xt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>($t(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(s.localStore,t);L0(s,t,e),O0(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await Ta(s,i)}catch(i){await Lr(i)}}function O0(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function L0(n,t,e){const s=xt(n);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(e?r.reject(e):r.resolve(),i=i.remove(t)),s.Vu[s.currentUser.toKey()]=i}}function Yh(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.Iu.get(t))n.Tu.delete(s),e&&n.Pu.yu(s,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(s=>{n.Ru.containsKey(s)||V0(n,s)})}function V0(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(of(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),_f(n))}function Wm(n,t,e){for(const s of e)s instanceof R0?(n.Ru.addReference(s.key,t),VR(n,s)):s instanceof k0?(nt(mf,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,t),n.Ru.containsKey(s.key)||V0(n,s.key)):pt(19791,{wu:s})}function VR(n,t){const e=t.key,s=e.path.canonicalString();n.du.get(e)||n.Eu.has(s)||(nt(mf,"New document in limbo: "+e),n.Eu.add(s),_f(n))}function _f(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new ut(Wt.fromString(t)),s=n.fu.next();n.Au.set(s,new IR(e)),n.du=n.du.insert(e,s),E0(n.remoteStore,new Fs(Fn(Hc(e.path)),s,"TargetPurposeLimboResolution",$c.ce))}}async function Ta(n,t,e){const s=xt(n),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,t,e).then(c=>{if((c||e)&&s.isPrimaryClient){const h=c?!c.fromCache:e?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=sf.As(l.targetId,c);r.push(h)}}))}),await Promise.all(o),s.Pu.H_(i),await async function(l,c){const h=xt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,f=>$.forEach(f.Es,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>$.forEach(f.ds,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Vr(d))throw d;nt(rf,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),_=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(f,b)}}}(s.localStore,r))}async function NR(n,t){const e=xt(n);if(!e.currentUser.isEqual(t)){nt(mf,"User change. New user:",t.toKey());const s=await v0(e.localStore,t);e.currentUser=t,function(r,o){r.mu.forEach(a=>{a.forEach(l=>{l.reject(new et(U.CANCELLED,o))})}),r.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ta(e,s.Ls)}}function FR(n,t){const e=xt(n),s=e.Au.get(t);if(s&&s.hu)return kt().add(s.key);{let i=kt();const r=e.Iu.get(t);if(!r)return i;for(const o of r){const a=e.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function N0(n){const t=xt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=M0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MR.bind(null,t),t.Pu.H_=wR.bind(null,t.eventManager),t.Pu.yu=xR.bind(null,t.eventManager),t}function BR(n){const t=xt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=OR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LR.bind(null,t),t}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Xc(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return jP(this.persistence,new UP,t.initialUser,this.serializer)}Cu(t){return new b0(nf.mi,this.serializer)}Du(t){return new XP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class UR extends cc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){$t(this.persistence.referenceDelegate instanceof ac,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new IP(s,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Xe.withCacheSize(this.cacheSizeBytes):Xe.DEFAULT;return new b0(s=>ac.mi(s,e),this.serializer)}}class Xh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Hm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=NR.bind(null,this.syncEngine),await yR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new vR}()}createDatastore(t){const e=Xc(t.databaseInfo.databaseId),s=function(r){return new eR(r)}(t.databaseInfo);return function(r,o,a,l){return new rR(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,i,r,o,a){return new aR(s,i,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>Hm(this.syncEngine,e,0),function(){return Fm.v()?new Fm:new QP}())}createSyncEngine(t,e){return function(i,r,o,a,l,c,h){const d=new SR(i,r,o,a,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(e){const s=xt(e);nt(Ui,"RemoteStore shutting down."),s.Ea.add(5),await xa(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xh.provider={build:()=>new Xh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):_s("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="FirestoreClient";class $R{constructor(t,e,s,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=i,this.user=Me.UNAUTHENTICATED,this.clientId=jd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{nt(ri,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(nt(ri,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=hf(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Qu(n,t){n.asyncQueue.verifyOperationInProgress(),nt(ri,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async i=>{s.isEqual(i)||(await v0(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function qm(n,t){n.asyncQueue.verifyOperationInProgress();const e=await zR(n);nt(ri,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>Um(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,i)=>Um(t.remoteStore,i)),n._onlineComponents=t}async function zR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){nt(ri,"Using user provided OfflineComponentProvider");try{await Qu(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(e))throw e;wr("Error using user provided cache. Falling back to memory cache: "+e),await Qu(n,new cc)}}else nt(ri,"Using default OfflineComponentProvider"),await Qu(n,new UR(void 0));return n._offlineComponents}async function F0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(nt(ri,"Using user provided OnlineComponentProvider"),await qm(n,n._uninitializedComponentsProvider._online)):(nt(ri,"Using default OnlineComponentProvider"),await qm(n,new Xh))),n._onlineComponents}function jR(n){return F0(n).then(t=>t.syncEngine)}async function uc(n){const t=await F0(n),e=t.eventManager;return e.onListen=AR.bind(null,t.syncEngine),e.onUnlisten=RR.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=CR.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=kR.bind(null,t.syncEngine),e}function HR(n,t,e={}){const s=new ds;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const h=new yf({next:f=>{h.Nu(),o.enqueueAndForget(()=>ff(r,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new et(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new et(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new gf(Hc(a.path),h,{includeMetadataChanges:!0,qa:!0});return df(r,d)}(await uc(n),n.asyncQueue,t,e,s)),s.promise}function WR(n,t,e={}){const s=new ds;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const h=new yf({next:f=>{h.Nu(),o.enqueueAndForget(()=>ff(r,d)),f.fromCache&&l.source==="server"?c.reject(new et(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new gf(a,h,{includeMetadataChanges:!0,qa:!0});return df(r,d)}(await uc(n),n.asyncQueue,t,e,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="firestore.googleapis.com",Km=!0;class Ym{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new et(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=U0,this.ssl=Km}else this.host=t.host,this.ssl=t.ssl??Km;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=y0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<TP)throw new et(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}a1("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B0(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ea{constructor(t,e,s,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ym({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new et(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ym(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new QC;switch(s.type){case"firstParty":return new e1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new et(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=Gm.get(e);s&&(nt("ComponentProvider","Removing Datastore"),Gm.delete(e),s.terminate())}(this),Promise.resolve()}}function qR(n,t,e,s={}){n=qe(n,Ea);const i=kr(t),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},a=`${t}:${e}`;i&&(Nb(`https://${a}`),Fb("Firestore",!0)),r.host!==U0&&r.host!==a&&wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:i,emulatorOptions:s};if(!Li(l,o)&&(n._setSettings(l),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=Me.MOCK_USER;else{c=II(s.mockUserToken,n._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new et(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Me(d)}n._authCredentials=new JC(new Rv(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ui(this.firestore,t,this._query)}}class ie{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ie(this.firestore,t,this._key)}toJSON(){return{type:ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,s){if(ba(e,ie._jsonSchema))return new ie(t,s||null,new ut(Wt.fromString(e.referencePath)))}}ie._jsonSchemaVersion="firestore/documentReference/1.0",ie._jsonSchema={type:he("string",ie._jsonSchemaVersion),referencePath:he("string")};class Ys extends ui{constructor(t,e,s){super(t,e,Hc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ie(this.firestore,null,new ut(t))}withConverter(t){return new Ys(this.firestore,t,this._path)}}function $0(n,t,...e){if(n=ye(n),Hd("collection","path",t),n instanceof Ea){const s=Wt.fromString(t,...e);return lm(s),new Ys(n,null,s)}{if(!(n instanceof ie||n instanceof Ys))throw new et(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Wt.fromString(t,...e));return lm(s),new Ys(n.firestore,null,s)}}function GR(n,t){if(n=qe(n,Ea),Hd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new et(U.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ui(n,null,function(s){return new Nr(Wt.emptyPath(),s)}(t))}function ln(n,t,...e){if(n=ye(n),arguments.length===1&&(t=jd.newId()),Hd("doc","path",t),n instanceof Ea){const s=Wt.fromString(t,...e);return am(s),new ie(n,null,new ut(s))}{if(!(n instanceof ie||n instanceof Ys))throw new et(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Wt.fromString(t,...e));return am(s),new ie(n.firestore,n instanceof Ys?n.converter:null,new ut(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="AsyncQueue";class Qm{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x0(this,"async_queue_retry"),this._c=()=>{const s=Xu();s&&nt(Xm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const e=Xu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Xu();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new ds;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Vr(t))throw t;nt(Xm,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,_s("INTERNAL UNHANDLED ERROR: ",Jm(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=e,e}enqueueAfterDelay(t,e,s){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=uf.createAndSchedule(this,t,e,s,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&pt(47125,{Pc:Jm(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Jm(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n){return function(e,s){if(typeof e!="object"||e===null)return!1;const i=e;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(n,["next","error","complete"])}class bs extends Ea{constructor(t,e,s,i){super(t,e,s,i),this.type="firestore",this._queue=new Qm,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qm(t),this._firestoreClient=void 0,await t}}}function Br(n,t){const e=typeof n=="object"?n:zb(),s=typeof n=="string"?n:ec,i=Dd(e,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=TI("firestore");r&&qR(i,...r)}return i}function Zc(n){if(n._terminated)throw new et(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KR(n),n._firestoreClient}function KR(n){const t=n._freezeSettings(),e=function(i,r,o,a){return new y1(i,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,B0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new $R(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(i){const r=i?._online.build();return{_offline:i?._offline.build(r),_online:r}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fn(Ae.fromBase64String(t))}catch(e){throw new et(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new fn(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ba(t,fn._jsonSchema))return fn.fromBase64String(t.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:he("string",fn._jsonSchemaVersion),bytes:he("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new et(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new et(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new et(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(t){if(ba(t,Un._jsonSchema))return new Un(t.latitude,t.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:he("string",Un._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ba(t,$n._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new $n(t.vectorValues);throw new et(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:he("string",$n._jsonSchemaVersion),vectorValues:he("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=/^__.*__$/;class XR{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new ci(t,this.data,this.fieldMask,e,this.fieldTransforms):new va(t,this.data,e,this.fieldTransforms)}}class z0{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new ci(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function j0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{Ac:n})}}class bf{constructor(t,e,s,i,r,o){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new bf({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),s=this.Vc({path:e,fc:!1});return s.gc(t),s}yc(t){const e=this.path?.child(t),s=this.Vc({path:e,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return hc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(j0(this.Ac)&&YR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class QR{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Xc(t)}Cc(t,e,s,i=!1){return new bf({Ac:t,methodName:e,Dc:s,path:Se.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nu(n){const t=n._freezeSettings(),e=Xc(n._databaseId);return new QR(n._databaseId,!!t.ignoreUndefinedProperties,e)}function H0(n,t,e,s,i,r={}){const o=n.Cc(r.merge||r.mergeFields?2:0,t,e,i);wf("Data must be an object, but it was:",o,s);const a=W0(s,o);let l,c;if(r.merge)l=new an(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const f=Qh(t,d,e);if(!o.contains(f))throw new et(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);G0(h,f)||h.push(f)}l=new an(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new XR(new Qe(a),l,c)}class su extends eu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof su}}class vf extends eu{constructor(t,e){super(t),this.Fc=e}_toFieldTransform(t){const e=new ta(t.serializer,e0(t.serializer,this.Fc));return new j1(t.path,e)}isEqual(t){return t instanceof vf&&this.Fc===t.Fc}}function JR(n,t,e,s){const i=n.Cc(1,t,e);wf("Data must be an object, but it was:",i,s);const r=[],o=Qe.empty();li(s,(l,c)=>{const h=xf(t,l,e);c=ye(c);const d=i.yc(h);if(c instanceof su)r.push(h);else{const f=Ia(c,d);f!=null&&(r.push(h),o.set(h,f))}});const a=new an(r);return new z0(o,a,i.fieldTransforms)}function ZR(n,t,e,s,i,r){const o=n.Cc(1,t,e),a=[Qh(t,s,e)],l=[i];if(r.length%2!=0)throw new et(U.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(Qh(t,r[f])),l.push(r[f+1]);const c=[],h=Qe.empty();for(let f=a.length-1;f>=0;--f)if(!G0(c,a[f])){const g=a[f];let _=l[f];_=ye(_);const b=o.yc(g);if(_ instanceof su)c.push(g);else{const v=Ia(_,b);v!=null&&(c.push(g),h.set(g,v))}}const d=new an(c);return new z0(h,d,o.fieldTransforms)}function tk(n,t,e,s=!1){return Ia(e,n.Cc(s?4:3,t))}function Ia(n,t){if(q0(n=ye(n)))return wf("Unsupported field value:",t,n),W0(n,t);if(n instanceof eu)return function(s,i){if(!j0(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let l=Ia(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(n,t)}return function(s,i){if((s=ye(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return e0(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=qt.fromDate(s);return{timestampValue:oc(i.serializer,r)}}if(s instanceof qt){const r=new qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:oc(i.serializer,r)}}if(s instanceof Un)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof fn)return{bytesValue:h0(i.serializer,s._byteString)};if(s instanceof ie){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:tf(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof $n)return function(o,a){return{mapValue:{fields:{[Bv]:{stringValue:Uv},[nc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Xd(a.serializer,c)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${Uc(s)}`)}(n,t)}function W0(n,t){const e={};return Mv(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):li(n,(s,i)=>{const r=Ia(i,t.mc(s));r!=null&&(e[s]=r)}),{mapValue:{fields:e}}}function q0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof Un||n instanceof fn||n instanceof ie||n instanceof eu||n instanceof $n)}function wf(n,t,e){if(!q0(e)||!kv(e)){const s=Uc(e);throw s==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+s)}}function Qh(n,t,e){if((t=ye(t))instanceof tu)return t._internalPath;if(typeof t=="string")return xf(n,t);throw hc("Field path arguments must be of type string or ",n,!1,void 0,e)}const ek=new RegExp("[~\\*/\\[\\]]");function xf(n,t,e){if(t.search(ek)>=0)throw hc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new tu(...t.split("."))._internalPath}catch{throw hc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function hc(n,t,e,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new et(U.INVALID_ARGUMENT,a+n+l)}function G0(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,e,s,i,r){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new nk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Y0("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class nk extends K0{data(){return super.data()}}function Y0(n,t){return typeof t=="string"?xf(n,t):t instanceof tu?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new et(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tf{}class sk extends Tf{}function Q0(n,t,...e){let s=[];t instanceof Tf&&s.push(t),s=s.concat(e),function(r){const o=r.filter(l=>l instanceof If).length,a=r.filter(l=>l instanceof Ef).length;if(o>1||o>0&&a>0)throw new et(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)n=i._apply(n);return n}class Ef extends sk{constructor(t,e,s){super(),this._field=t,this._op=e,this._value=s,this.type="where"}static _create(t,e,s){return new Ef(t,e,s)}_apply(t){const e=this._parse(t);return J0(t._query,e),new ui(t.firestore,t.converter,Uh(t._query,e))}_parse(t){const e=nu(t.firestore);return function(r,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new et(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){e_(d,h);const _=[];for(const b of d)_.push(t_(l,r,b));f={arrayValue:{values:_}}}else f=t_(l,r,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||e_(d,h),f=tk(a,o,d,h==="in"||h==="not-in");return ue.create(c,h,f)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class If extends Tf{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new If(t,e)}_parse(t){const e=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return e.length===1?e[0]:In.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const l of a)J0(o,l),o=Uh(o,l)}(t._query,e),new ui(t.firestore,t.converter,Uh(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function t_(n,t,e){if(typeof(e=ye(e))=="string"){if(e==="")throw new et(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kv(t)&&e.indexOf("/")!==-1)throw new et(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const s=t.path.child(Wt.fromString(e));if(!ut.isDocumentKey(s))throw new et(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mm(n,new ut(s))}if(e instanceof ie)return mm(n,e._key);throw new et(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(e)}.`)}function e_(n,t){if(!Array.isArray(n)||n.length===0)throw new et(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function J0(n,t){const e=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new et(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new et(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class ik{convertValue(t,e="none"){switch(si(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ae(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ni(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw pt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return li(t,(i,r)=>{s[i]=this.convertValue(r,e)}),s}convertVectorValue(t){const e=t.fields?.[nc].arrayValue?.values?.map(s=>ae(s.doubleValue));return new $n(e)}convertGeoPoint(t){return new Un(ae(t.latitude),ae(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=jc(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(Yo(t));default:return null}}convertTimestamp(t){const e=ei(t);return new qt(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=Wt.fromString(t);$t(_0(s),9688,{name:t});const i=new Xo(s.get(1),s.get(3)),r=new ut(s.popFirst(5));return i.isEqual(e)||_s(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n,t,e){let s;return s=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,s}class mo{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ri extends K0{constructor(t,e,s,i,r,o){super(t,e,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Y0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Ri._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ri._jsonSchema={type:he("string",Ri._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};class Rl extends Ri{data(t={}){return super.data(t)}}class ki{constructor(t,e,s,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new mo(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Rl(this._firestore,this._userDataWriter,s.key,s,new mo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new et(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new Rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:rk(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ki._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=jd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(e.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function rk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){n=qe(n,ie);const t=qe(n.firestore,bs);return HR(Zc(t),n._key).then(e=>tw(t,n,e))}ki._jsonSchemaVersion="firestore/querySnapshot/1.0",ki._jsonSchema={type:he("string",ki._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};class Sf extends ik{constructor(t){super(),this.firestore=t}convertBytes(t){return new fn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ie(this.firestore,null,e)}}function ok(n){n=qe(n,ui);const t=qe(n.firestore,bs),e=Zc(t),s=new Sf(t);return X0(n._query),WR(e,n._query).then(i=>new ki(t,s,n,i))}function ea(n,t,e){n=qe(n,ie);const s=qe(n.firestore,bs),i=Z0(n.converter,t,e);return ru(s,[H0(nu(s),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,gn.none())])}function Jh(n,t,e,...s){n=qe(n,ie);const i=qe(n.firestore,bs),r=nu(i);let o;return o=typeof(t=ye(t))=="string"||t instanceof tu?ZR(r,"updateDoc",n._key,t,e,s):JR(r,"updateDoc",n._key,t),ru(i,[o.toMutation(n._key,gn.exists(!0))])}function ak(n){return ru(qe(n.firestore,bs),[new Qd(n._key,gn.none())])}function lk(n,t){const e=qe(n.firestore,bs),s=ln(n),i=Z0(n.converter,t);return ru(e,[H0(nu(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,gn.exists(!1))]).then(()=>s)}function ck(n,...t){n=ye(n);let e={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Zm(t[s])||(e=t[s++]);const i={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(Zm(t[s])){const l=t[s];t[s]=l.next?.bind(l),t[s+1]=l.error?.bind(l),t[s+2]=l.complete?.bind(l)}let r,o,a;if(n instanceof ie)o=qe(n.firestore,bs),a=Hc(n._key.path),r={next:l=>{t[s]&&t[s](tw(o,n,l))},error:t[s+1],complete:t[s+2]};else{const l=qe(n,ui);o=qe(l.firestore,bs),a=l._query;const c=new Sf(o);r={next:h=>{t[s]&&t[s](new ki(o,c,l,h))},error:t[s+1],complete:t[s+2]},X0(n._query)}return function(c,h,d,f){const g=new yf(f),_=new gf(h,g,d);return c.asyncQueue.enqueueAndForget(async()=>df(await uc(c),_)),()=>{g.Nu(),c.asyncQueue.enqueueAndForget(async()=>ff(await uc(c),_))}}(Zc(o),a,i,r)}function ru(n,t){return function(s,i){const r=new ds;return s.asyncQueue.enqueueAndForget(async()=>DR(await jR(s),i,r)),r.promise}(Zc(n),t)}function tw(n,t,e){const s=e.docs.get(t._key),i=new Sf(n);return new Ri(n,i,t._key,s,new mo(e.hasPendingWrites,e.fromCache),t.converter)}function ew(n){return new vf("increment",n)}(function(t,e=!0){(function(i){Or=i})(Dr),vr(new Vi("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new bs(new ZC(s.getProvider("auth-internal")),new n1(o,s.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new et(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(c.options.projectId,h)}(o,i),o);return r={useFetchStreams:e,...r},a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),qs(sm,im,t),qs(sm,im,"esm2020")})();const nw="/the-arcane-scholar-s-legacy/assets/logo-DcNi1i-0.svg",Kn=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},uk={class:"flex flex-col items-center justify-center h-screen bg-white p-4 sm:p-6 md:p-8"},hk={class:"flex flex-col space-y-4 w-full max-w-sm"},dk={key:0,class:"mt-12 flex flex-col items-center justify-center text-gray-600"},fk={key:1,class:"mt-6 text-red-600 bg-red-100 p-3 rounded-md"},pk={__name:"LoginScreen",emits:["successfulLogin"],setup(n,{emit:t}){const e=At(!1),s=At(null),i=t,r=async()=>{e.value=!0,s.value=null;try{const o=Hi(),a=new On,c=(await iC(o,a)).user;console.log("Google Login successful:",c),await new Promise(h=>setTimeout(h,2e3)),i("successfulLogin",c)}catch(o){console.error("Google Login error:",o),s.value=`Google Login failed: ${o.message}`}finally{e.value=!1}};return(o,a)=>(st(),ct("div",uk,[a[2]||(a[2]=L("h1",{class:"text-3xl sm:text-4xl font-bold text-black mb-6 text-center"},"The Arcane Scholars Legacy",-1)),L("div",hk,[e.value?fe("",!0):(st(),ct("button",{key:0,onClick:r,class:"bg-black hover:bg-gray-800 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out flex items-center justify-center text-lg"},a[0]||(a[0]=[L("img",{src:"https://www.google.com/favicon.ico",alt:"Google Logo",class:"h-7 w-7 mr-3"},null,-1),vn(" Sign in with Google ",-1)])))]),e.value?(st(),ct("div",dk,a[1]||(a[1]=[L("img",{src:nw,alt:"The Arcane Scholar's Legacy",class:"h-24 w-24 mb-4 animate-bounce"},null,-1),L("p",{class:"text-xl font-medium"},"Authenticating and Loading...",-1)]))):fe("",!0),s.value?(st(),ct("div",fk,[L("p",null,bt(s.value),1)])):fe("",!0)]))}},gk=Kn(pk,[["__scopeId","data-v-0517aee5"]]),mk={class:"flex flex-col items-center justify-center h-screen w-full bg-white text-gray-800 p-4 sm:p-6 md:p-8 overflow-y-auto"},_k={key:0,class:"mt-4 text-gray-600"},yk={key:1,class:"mt-4 text-red-600 bg-red-100 p-3 rounded-md"},bk={key:2,class:"w-full max-w-lg bg-gray-100 p-6 rounded-lg shadow-lg border border-gray-200 text-center"},vk={key:3,class:"w-full max-w-3xl bg-gray-50 p-6 rounded-xl shadow-2xl border border-gray-200"},wk=["innerHTML"],xk={class:"space-y-4"},Tk={key:1,class:"space-y-4 mt-6"},Ek=["disabled"],Ik={key:4,class:"w-full max-w-3xl bg-gray-50 p-6 rounded-xl shadow-2xl border border-gray-200"},Sk=["innerHTML"],Ak={class:"space-y-4"},Ck={key:1,class:"space-y-4 mt-6"},Pk=["disabled"],Rk={key:5,class:"w-full max-w-3xl bg-gray-50 p-6 rounded-xl shadow-2xl border border-gray-200"},kk={class:"text-sm text-gray-600 mb-4 italic"},Dk={class:"text-sm text-gray-600 mb-4 italic"},Mk={key:0,class:"text-gray-500"},Ok={key:1},Lk={key:2,class:"text-red-500"},Vk=["disabled"],Nk={__name:"CharacterManager",emits:["character-created","return-to-select"],setup(n,{emit:t}){const e=t,s=Hi(),i=Br(),r=typeof __app_id<"u"?__app_id:"default-app-id",o=At(!1),a=At(null),l=At("chapter1"),c=At({chapter1:"",chapter2:""}),h=At(!1),d=At({name:"",faction:"",specialty:"",knowledge:0,resources:{},research:{},prestige:0,skillPoints:0,location:"Unknown"}),f=At({name:"",loading:!1,fetched:!1}),g=async k=>{if(!f.value.fetched){try{const D=ln(i,`artifacts/${r}/users/${k}/profile/user_data`),N=await iu(D);if(N.exists()&&N.data().location){f.value.name=N.data().location,f.value.fetched=!0,d.value.location=f.value.name,console.log("Location loaded from profile:",f.value.name);return}}catch(D){console.error("Error reading user profile location:",D)}f.value.loading=!0;try{const D=await fetch("https://api.ip-api.com/json/?fields=city,regionName,country");if(!D.ok)throw new Error("Failed to fetch location data");const N=await D.json();let w="Unknown";N.city&&N.city!==""?w=N.city:N.regionName&&N.regionName!==""?w=N.regionName:N.country&&N.country!==""&&(w=N.country),f.value.name=w,d.value.location=w,f.value.fetched=!0;const y=ln(i,`artifacts/${r}/users/${k}/profile/user_data`);await ea(y,{location:w},{merge:!0})}catch(D){console.error("Location API error:",D),f.value.name="Unknown",d.value.location="Unknown"}finally{f.value.loading=!1}}},_=k=>{if(!k)return"";const N=k.replace(/</g,"&lt;").replace(/>/g,"&gt;").split(`
`);let w="",y=!1,x=[];const E=()=>{if(x.length===0)return;let I='<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-gray-300 border border-gray-300 rounded-lg">';const S=x[0].replace(/^\||\|$/g,"").split("|").map(rt=>rt.trim());if(S.length>0&&(I+='<thead class="bg-gray-200">',I+="<tr>",S.forEach(rt=>{let it=rt;it=it.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),it=it.replace(/\*(.*?)\*/g,"<em>$1</em>"),it=it.replace(/_(.*?)_/g,"<em>$1</em>"),I+=`<th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">${it}</th>`}),I+="</tr>",I+="</thead>"),x.length>1){I+='<tbody class="divide-y divide-gray-200">';for(let rt=2;rt<x.length;rt++){const dt=x[rt].replace(/^\||\|$/g,"").split("|").map(ot=>ot.trim());dt.length===S.length&&(I+='<tr class="bg-white hover:bg-gray-50">',dt.forEach(ot=>{let H=ot;H=H.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),H=H.replace(/\*(.*?)\*/g,"<em>$1</em>"),H=H.replace(/_(.*?)_/g,"<em>$1</em>"),I+=`<td class="px-3 py-2 whitespace-nowrap text-sm text-gray-800">${H}</td>`}),I+="</tr>")}I+="</tbody>"}I+="</table></div>",w+=I,x=[]};return N.forEach(I=>{let P=I.trim();if(P.includes("|")&&!P.startsWith("#")){const it=P.match(/\|[:-]*\|/);if(x.length===0&&it)x.push(P);else if(x.length>0||P.startsWith("|")){y&&(w+="</ul>",y=!1),x.push(P);return}}if(x.length>0&&E(),P.length===0){y&&(w+="</ul>",y=!1);return}if(P.startsWith("###")){w+=`<h3 class="text-xl font-bold text-gray-800 mt-4 mb-2">${P.substring(3).trim()}</h3>`;return}if(P.startsWith("##")){w+=`<h2 class="text-2xl font-serif text-black mt-6 mb-3 border-b border-gray-300 pb-1">${P.substring(2).trim()}</h2>`;return}if(P.startsWith("#")){w+=`<h1 class="text-3xl font-serif text-black mt-8 mb-4">${P.substring(1).trim()}</h1>`;return}if(P==="---"){y&&(w+="</ul>",y=!1),w+='<hr class="my-6 border-gray-300">';return}if(P.startsWith("* ")||P.startsWith("- ")){y||(w+='<ul class="list-disc ml-6 space-y-1 mb-4">',y=!0);let it=P.substring(2).trim();it=it.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),it=it.replace(/\*(.*?)\*/g,"<em>$1</em>"),it=it.replace(/_(.*?)_/g,"<em>$1</em>"),w+=`<li>${it}</li>`;return}y&&(w+="</ul>",y=!1);let rt=P;rt=rt.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),rt=rt.replace(/\*(.*?)\*/g,"<em>$1</em>"),rt=rt.replace(/_(.*?)_/g,"<em>$1</em>"),w+=`<p class="mb-4">${rt}</p>`}),y&&(w+="</ul>"),x.length>0&&E(),w},b=async()=>{try{const k=await fetch("/the-arcane-scholar-s-legacy/Chapter1.md");if(!k.ok)throw new Error("Failed to fetch Chapter1.md.");const D=await k.text();c.value.chapter1=_(D),console.log("Successfully read and parsed Chapter1.md.");const N=await fetch("/the-arcane-scholar-s-legacy/Chapter2.md");if(!N.ok)throw new Error("Failed to fetch Chapter2.md.");const w=await N.text();c.value.chapter2=_(w),console.log("Successfully read and parsed Chapter2.md."),h.value=!0}catch(k){console.error("Error fetching lore:",k),a.value=`Failed to load game lore (${k.message}). Ensure Chapter1.md and Chapter2.md exist.`}};Rr(()=>{b(),s.currentUser&&g(s.currentUser.uid)});const v=k=>{d.value.faction=k},A=k=>{d.value.specialty=k},C=()=>{l.value==="factionSelect"?l.value="chapter2":l.value==="specialtySelect"&&(l.value="nameAssign")},M=async()=>{const k=s.currentUser?.uid;if(!k){a.value="User not authenticated. Please log in again.";return}if(!d.value.name){a.value="Please enter a name for your scholar.";return}o.value=!0,a.value=null;try{const D=$0(i,`artifacts/${r}/users/${k}/characters`);d.value.location=f.value.name||"Unknown";const N=await lk(D,d.value),w=ln(i,`artifacts/${r}/users/${k}/profile/user_data`);await Jh(w,{characterCount:ew(1)},{merge:!0});const y=ln(i,`artifacts/${r}/public/data/leaderboard`,N.id),x={name:d.value.name,prestige:d.value.prestige,faction:d.value.faction,specialty:d.value.specialty,location:d.value.location,userId:k};await ea(y,x,{merge:!0}),console.log("New character created with ID:",N.id),e("character-created",N.id)}catch(D){console.error("Error creating character:",D),D.message.includes("permission denied")||D.message.includes("unauthorized")?a.value="Creation failed: You have reached the maximum limit of 4 characters. Please delete one to continue.":a.value=`Failed to create character: ${D.message}`}finally{o.value=!1}};return(k,D)=>(st(),ct("div",mk,[D[17]||(D[17]=L("h2",{class:"text-4xl font-serif text-black mb-8 text-center leading-tight"},"Forge Your Legacy",-1)),D[18]||(D[18]=L("img",{src:nw,alt:"The Arcane Scholar's Legacy",class:"h-24 w-24 mb-4 animate-bounce"},null,-1)),o.value?(st(),ct("div",_k,"Loaading...")):fe("",!0),a.value?(st(),ct("div",yk,bt(a.value),1)):fe("",!0),h.value?l.value==="chapter1"||l.value==="factionSelect"?(st(),ct("div",vk,[D[11]||(D[11]=L("h3",{class:"text-2xl font-serif text-black mb-4 border-b border-gray-300 pb-2"},"Chapter 1: The First Whisper",-1)),L("div",{innerHTML:c.value.chapter1,class:"text-lg text-gray-800 leading-relaxed mb-6 max-h-80 overflow-y-auto markdown-content"},null,8,wk),L("div",xk,[l.value==="chapter1"?(st(),ct("button",{key:0,onClick:D[0]||(D[0]=N=>l.value="factionSelect"),class:"w-full py-3 px-4 rounded-lg text-xl font-bold bg-black hover:bg-gray-800 text-white shadow-lg transition-all duration-200 ease-in-out"}," Continue to Faction Selection ")):fe("",!0),l.value==="factionSelect"?(st(),ct("div",Tk,[L("button",{onClick:D[1]||(D[1]=N=>v("Lumen")),class:G(["w-full py-3 px-4 rounded-lg text-xl font-bold transition-all duration-200 ease-in-out",d.value.faction==="Lumen"?"bg-black text-white shadow-xl":"bg-gray-200 hover:bg-gray-300 text-black"])}," Select Lumen ",2),L("button",{onClick:D[2]||(D[2]=N=>v("Umbra")),class:G(["w-full py-3 px-4 rounded-lg text-xl font-bold transition-all duration-200 ease-in-out",d.value.faction==="Umbra"?"bg-black text-white shadow-xl":"bg-gray-200 hover:bg-gray-300 text-black"])}," Select Umbra ",2),L("button",{onClick:C,disabled:!d.value.faction,class:"w-full py-3 px-4 rounded-lg text-xl font-bold bg-black hover:bg-gray-800 text-white shadow-lg transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"}," Proceed ",8,Ek),L("button",{onClick:D[3]||(D[3]=N=>l.value="chapter1"),class:"w-full py-2 px-4 rounded-lg text-sm bg-gray-600 hover:bg-gray-700 text-white transition-all duration-200 ease-in-out"}," Go Back ")])):fe("",!0)])])):l.value==="chapter2"||l.value==="specialtySelect"?(st(),ct("div",Ik,[D[12]||(D[12]=L("h3",{class:"text-2xl font-serif text-black mb-4 border-b border-gray-300 pb-2"},"Chapter 2: The Second Whisper",-1)),L("div",{innerHTML:c.value.chapter2,class:"text-lg text-gray-800 leading-relaxed mb-6 max-h-80 overflow-y-auto markdown-content"},null,8,Sk),L("div",Ak,[l.value==="chapter2"?(st(),ct("button",{key:0,onClick:D[4]||(D[4]=N=>l.value="specialtySelect"),class:"w-full py-3 px-4 rounded-lg text-xl font-bold bg-black hover:bg-gray-800 text-white shadow-lg transition-all duration-200 ease-in-out"}," Continue to Specialty Selection ")):fe("",!0),l.value==="specialtySelect"?(st(),ct("div",Ck,[L("button",{onClick:D[5]||(D[5]=N=>A("Arcane")),class:G(["w-full py-3 px-4 rounded-lg text-xl font-bold transition-all duration-200 ease-in-out",d.value.specialty==="Arcane"?"bg-black text-white shadow-xl":"bg-gray-200 hover:bg-gray-300 text-black"])}," Select Arcane ",2),L("button",{onClick:D[6]||(D[6]=N=>A("Alchemist")),class:G(["w-full py-3 px-4 rounded-lg text-xl font-bold transition-all duration-200 ease-in-out",d.value.specialty==="Alchemist"?"bg-black text-white shadow-xl":"bg-gray-200 hover:bg-gray-300 text-black"])}," Select Alchemist ",2),L("button",{onClick:C,disabled:!d.value.specialty,class:"w-full py-3 px-4 rounded-lg text-xl font-bold bg-black hover:bg-gray-800 text-white shadow-lg transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"}," Proceed ",8,Pk),L("button",{onClick:D[7]||(D[7]=N=>l.value="chapter1"),class:"w-full py-2 px-4 rounded-lg text-sm bg-gray-600 hover:bg-gray-700 text-white transition-all duration-200 ease-in-out"}," Go Back ")])):fe("",!0)])])):l.value==="nameAssign"?(st(),ct("div",Rk,[D[15]||(D[15]=L("h3",{class:"text-2xl font-serif text-black mb-4 border-b border-gray-300 pb-2"},"Assign Your Scholar Name",-1)),D[16]||(D[16]=L("p",{class:"text-lg text-gray-700 mb-4"}," Name your scholar, choose wisely as this name will define your legacy. ",-1)),L("p",kk," Faction: "+bt(d.value.faction)+" | Specialty: "+bt(d.value.specialty),1),L("p",Dk,[D[13]||(D[13]=vn(" Current Location: ",-1)),f.value.loading?(st(),ct("span",Mk,"Detecting location...")):f.value.name?(st(),ct("span",Ok,bt(f.value.name),1)):(st(),ct("span",Lk,"Location Unknown (This will be 'Unknown' on the global leaderboards)"))]),L("form",{onSubmit:Rb(M,["prevent"]),class:"space-y-4"},[L("div",null,[D[14]||(D[14]=L("label",{for:"characterName",class:"block text-lg text-gray-700 mb-2"},"Scholar's Name:",-1)),uo(L("input",{id:"characterName","onUpdate:modelValue":D[8]||(D[8]=N=>d.value.name=N),type:"text",required:"",class:"w-full p-3 rounded-lg bg-white text-black border border-gray-300 focus:outline-none focus:ring-2 focus:ring-black",placeholder:"Enter a name"},null,512),[[aI,d.value.name]])]),L("button",{type:"submit",disabled:!d.value.name||o.value,class:"w-full py-3 px-4 rounded-lg text-xl font-bold bg-black hover:bg-gray-800 text-white shadow-lg transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"}," Forge Legacy ",8,Vk)],32),L("button",{onClick:D[9]||(D[9]=N=>l.value="specialtySelect"),class:"w-full py-2 px-4 mt-4 rounded-lg text-sm bg-gray-600 hover:bg-gray-700 text-white transition-all duration-200 ease-in-out"}," Go Back ")])):fe("",!0):(st(),ct("div",bk,D[10]||(D[10]=[L("p",{class:"text-lg text-gray-700"},"Loading lore...",-1)])))]))}},Fk={class:"flex flex-col items-center justify-center min-h-screen w-full bg-white text-gray-800 font-sans p-6"},Bk={class:"bg-gray-50 p-8 rounded-xl shadow-lg border border-gray-200 w-full max-w-2xl"},Uk={class:"bg-gray-100 p-6 rounded-lg shadow-inner mb-8"},$k={key:0,class:"text-center text-lg text-red-600 font-bold mb-3 p-2 rounded-lg bg-red-100"},zk=["disabled"],jk={class:"bg-gray-100 p-6 rounded-lg shadow-inner"},Hk={class:"text-2xl font-serif text-black mb-4 border-b border-gray-300 pb-2"},Wk={key:0,class:"text-center text-sm text-gray-600 italic"},qk={key:1,class:"space-y-4"},Gk=["onClick"],Kk={class:"text-2xl font-bold text-black"},Yk={class:"text-sm text-gray-600"},Xk=["onClick"],Qk={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50"},Jk={key:1,class:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50"},Zk={class:"bg-red-100 p-8 rounded-xl shadow-2xl border border-red-200 w-full max-w-sm text-center"},tD={class:"text-red-800 mb-6"},io=4,eD={__name:"CharacterSelectionView",emits:["characterSelected","startNewCharacterCreation"],setup(n,{emit:t}){const e=t,s=At([]),i=At(0),r=At(!1),o=At(null),a=At(!1),l=At(""),c=Hi(),h=Br(),d=typeof __app_id<"u"?__app_id:"default-app-id",f=async C=>{if(C)try{const M=ln(h,`artifacts/${d}/users/${C}/profile/user_data`),k=await iu(M);k.exists()?i.value=k.data().characterCount||0:(await ea(M,{characterCount:0},{merge:!0}),i.value=0),console.log(`Character count loaded: ${i.value}`)}catch(M){console.error("Error fetching or initializing user profile:",M)}},g=async C=>{if(C)try{const M=$0(h,`artifacts/${d}/users/${C}/characters`),k=Q0(M),D=await ok(k);s.value=D.docs.map(w=>({id:w.id,...w.data()})),i.value=s.value.length;const N=ln(h,`artifacts/${d}/users/${C}/profile/user_data`);await Jh(N,{characterCount:s.value.length},{merge:!0})}catch(M){console.error("Error fetching characters:",M),l.value="Failed to load characters. Please check your connection.",a.value=!0}},_=C=>{e("characterSelected",C)},b=C=>{o.value=C,r.value=!0},v=()=>{r.value=!1,o.value=null},A=async()=>{const C=c.currentUser?.uid;if(!(!C||!o.value))try{const M=ln(h,`artifacts/${d}/users/${C}/characters`,o.value);await ak(M);const k=ln(h,`artifacts/${d}/users/${C}/profile/user_data`);await Jh(k,{characterCount:ew(-1)},{merge:!0}),console.log("Character deleted successfully and count decremented."),r.value=!1,o.value=null,await g(C)}catch(M){console.error("Error deleting character:",M),l.value=`Failed to delete character: ${M.message}`,a.value=!0}};return Rr(()=>{dv(c,async C=>{C&&(await f(C.uid),await g(C.uid))})}),(C,M)=>(st(),ct("div",Fk,[L("div",Bk,[M[2]||(M[2]=L("h2",{class:"text-4xl font-serif text-black mb-6 text-center"},"Your Scholars",-1)),L("div",Uk,[i.value>=io?(st(),ct("p",$k," Limit Reached ("+bt(io)+" Max): Delete a scholar to forge a new legacy. ")):fe("",!0),L("button",{onClick:M[0]||(M[0]=k=>e("startNewCharacterCreation")),disabled:i.value>=io,class:G(["w-full py-3 px-4 rounded-lg text-xl font-bold text-white shadow-lg transition-all duration-200 ease-in-out",i.value>=io?"bg-gray-500 cursor-not-allowed":"bg-black hover:bg-gray-800"])}," Forge a New Legacy ",10,zk)]),L("div",jk,[L("h3",Hk," Continue Your Legacy ("+bt(s.value.length)+" / "+bt(io)+") ",1),s.value.length===0?(st(),ct("p",Wk," No scholars found. Forge your first one above! ")):(st(),ct("ul",qk,[(st(!0),ct(sn,null,kc(s.value,k=>(st(),ct("li",{key:k.id,class:"flex items-center justify-between bg-white p-4 rounded-lg shadow-md transition duration-200 ease-in-out hover:bg-gray-50 border border-gray-200"},[L("div",{onClick:D=>_(k.id),class:"flex-grow cursor-pointer"},[L("h3",Kk,bt(k.name),1),L("p",Yk," Faction: "+bt(k.faction)+" | Specialty: "+bt(k.specialty),1)],8,Gk),L("button",{onClick:Rb(D=>b(k.id),["stop"]),class:"ml-4 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-200 ease-in-out"}," Delete ",8,Xk)]))),128))]))])]),r.value?(st(),ct("div",Qk,[L("div",{class:"bg-white p-8 rounded-xl shadow-2xl border border-gray-200 w-full max-w-md text-center"},[M[3]||(M[3]=L("h3",{class:"text-2xl font-bold text-black mb-4"},"Confirm Deletion",-1)),M[4]||(M[4]=L("p",{class:"text-gray-700 mb-6"},"Are you sure you want to delete this scholar? This action cannot be undone.",-1)),L("div",{class:"flex justify-center space-x-4"},[L("button",{onClick:A,class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg"},"Delete"),L("button",{onClick:v,class:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg"},"Cancel")])])])):fe("",!0),a.value?(st(),ct("div",Jk,[L("div",Zk,[M[5]||(M[5]=L("h3",{class:"text-2xl font-bold text-red-700 mb-4"},"Error",-1)),L("p",tD,bt(l.value),1),L("button",{onClick:M[1]||(M[1]=k=>a.value=!1),class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg"},"Close")])])):fe("",!0)]))}},nD=Kn(eD,[["__scopeId","data-v-2f726bfd"]]),sD={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},iD={class:"flex items-center space-x-3"},rD={class:"flex-1"},oD={class:"flex items-center space-x-3"},aD={class:"flex-1"},lD={class:"flex items-center space-x-3"},cD={class:"flex-1"},uD={__name:"AchievementsSection",props:{themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-white",primaryText:"text-black",accentBorder:"border-gray-400",sidebarBg:"bg-gray-100",activeMenuBg:"bg-gray-300"})}},setup(n){const t=n;return(e,s)=>(st(),ct("div",{class:G(["mt-10 pt-6 border-t",t.themeClasses.accentBorder])},[L("h3",{class:G(["text-3xl font-serif mb-6 text-center",[t.themeClasses.primaryText]])}," Achievements ",2),L("div",sD,[L("div",{class:G(["p-4 rounded-lg border shadow-inner",[t.themeClasses.sidebarBg,t.themeClasses.accentBorder]]),title:"Unlocked: 2025-11-14"},[L("div",iD,[s[0]||(s[0]=L("span",{class:"text-3xl"},"",-1)),L("div",rD,[L("h4",{class:G(["text-lg font-bold",t.themeClasses.primaryText])}," Forge a Legacy ",2),L("p",{class:G(["text-sm italic",t.themeClasses.primaryText])},' "Name Your Character." ',2)])])],2),L("div",{class:G(["p-4 rounded-lg border shadow-inner opacity-70",[t.themeClasses.sidebarBg,t.themeClasses.accentBorder]])},[L("div",oD,[s[1]||(s[1]=L("span",{class:"text-3xl"},"",-1)),L("div",aD,[L("h4",{class:G(["text-lg font-bold",t.themeClasses.primaryText])}," Novice Scholar ",2),L("p",{class:G(["text-sm italic",t.themeClasses.primaryText])},` "Click 'Generate Knowledge' 100 times." `,2)])]),L("div",{class:G(["w-full rounded-full h-2.5 mt-2",n.themeClasses.primaryBg])},[L("div",{class:G([n.themeClasses.activeMenuBg,"h-2.5 rounded-full"]),style:{width:"45%"},title:"45 / 100"},null,2)],2)],2),L("div",{class:G(["p-4 rounded-lg border shadow-inner opacity-40",[t.themeClasses.sidebarBg,t.themeClasses.accentBorder]])},[L("div",lD,[s[2]||(s[2]=L("span",{class:"text-3xl"},"",-1)),L("div",cD,[L("h4",{class:G(["text-lg font-bold",t.themeClasses.primaryText])}," ??? ",2),L("p",{class:G(["text-sm italic",t.themeClasses.primaryText])},' "Advance to Prestige 1." ',2)])])],2)])],2))}},hD=Kn(uD,[["__scopeId","data-v-a12dcc17"]]),dD={class:"flex items-start space-x-6 mb-4"},fD={class:"flex flex-col items-center w-28 flex-shrink-0"},pD=["title"],gD={class:"flex-grow"},mD={class:"flex flex-col items-center justify-center space-y-6 mt-8"},_D={class:"font-bold"},yD={key:0},bD={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},vD={key:0},wD=["onClick","disabled"],xD={key:0,class:"mt-8 text-center"},TD={__name:"SanctumView",props:{knowledge:{type:Number,required:!0},passiveKnowledgeGain:{type:Number,required:!0},multiplierTiers:{type:Array,required:!0},characterDetails:{type:Object,required:!0},currentTierIndex:{type:Number,required:!0},themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-gray-950",primaryText:"text-yellow-300",accentBorder:"border-yellow-600",sidebarBg:"bg-violet-950",activeMenuBg:"bg-green-800"})}},emits:["generate-knowledge","buy-multiplier","advance-tier"],setup(n,{emit:t}){const e=n,s=t,i=l=>{if(l==null)return"0.00";l=Number(l);const c=[{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}];for(let h=0;h<c.length;h++){const{value:d,symbol:f}=c[h];if(Math.abs(l)>=d){const g=l/d;let _;return g<10?_=g.toFixed(3):g<100?_=g.toFixed(2):_=g.toFixed(1),_+f}}return l.toFixed(2)},r=Ln(()=>e.multiplierTiers[e.currentTierIndex]),o=Ln(()=>{const l=r.value;if(!l)return!1;const c=l.multipliers.every(d=>d.level===d.maxLevel),h=e.multiplierTiers[e.currentTierIndex+1];return c&&h}),a=(l,c)=>{const h=e.multiplierTiers[l]?.multipliers[c];return h?h.baseCost*Math.pow(h.costMultiplier,h.level):1/0};return(l,c)=>(st(),ct("section",{class:G([e.themeClasses.primaryText,e.themeClasses.accentBorder,e.themeClasses.primaryBg,"p-6 rounded-lg shadow-xl border"])},[L("div",dD,[L("div",fD,[L("div",{class:G(["w-24 h-24 sm:w-28 sm:h-28 border-2 rounded-lg shadow-inner flex items-center justify-center",[e.themeClasses.primaryBg,e.themeClasses.accentBorder]])},[L("span",{class:G([e.themeClasses.primaryText,"text-sm italic opacity-70"])},"Avatar",2)],2),L("h3",{class:G(["mt-2 text-lg font-bold text-center truncate w-full",e.themeClasses.primaryText]),title:n.characterDetails.name},bt(n.characterDetails.name),11,pD),L("p",{class:G(["text-sm",e.themeClasses.primaryText])},"Prestige: "+bt(n.characterDetails.prestige),3)]),L("div",gD,[L("h2",{class:G(["text-3xl font-serif mb-2 pb-2 border-b",[e.themeClasses.primaryText,e.themeClasses.accentBorder]])}," Sanctum Overview ",2),L("p",{class:G(["text-lg",e.themeClasses.primaryText])}," Welcome back, Scholar. The whispers of ancient knowledge await your command. ",2)])]),L("div",mD,[L("span",{class:G(["text-4xl sm:text-5xl font-bold mb-4",e.themeClasses.primaryText])}," Current Knowledge: "+bt(i(n.knowledge)),3),L("button",{onClick:c[0]||(c[0]=h=>s("generate-knowledge")),class:G([e.themeClasses.activeMenuBg,"text-white font-bold py-4 px-8 rounded-full text-2xl shadow-lg transition duration-300 ease-in-out transform hover:scale-105 hover:opacity-80"])}," Generate Knowledge ",2),L("p",{class:G(["text-sm mt-2",e.themeClasses.primaryText])},"Click to harness raw arcane energy and convert it into Knowledge.",2),L("p",{class:G(["text-xl mt-4",e.themeClasses.primaryText])},[c[2]||(c[2]=vn(" Passive Knowledge Gain: ",-1)),L("span",_D,bt(i(n.passiveKnowledgeGain)),1),c[3]||(c[3]=vn(" / second ",-1))],2)]),L("div",{class:G(["mt-10 pt-6 border-t",e.themeClasses.accentBorder])},[r.value?(st(),ct("div",yD,[L("h4",{class:G(["text-3xl font-serif mb-6 text-center",[e.themeClasses.primaryText]])},bt(r.value.name),3),L("div",bD,[(st(!0),ct(sn,null,kc(r.value.multipliers,(h,d)=>(st(),ct("div",{key:`multiplier-${e.currentTierIndex}-${d}`,class:G(["p-4 rounded-lg border shadow-md flex flex-col",[e.themeClasses.primaryBg,e.themeClasses.accentBorder]])},[L("h4",{class:G(["text-xl mb-2",e.themeClasses.primaryText])},bt(h.name)+" (Level "+bt(h.level)+" / "+bt(h.maxLevel)+") ",3),L("p",{class:G(["text-sm mb-2",e.themeClasses.primaryText])},[vn(" Current effect: +"+bt(i(h.baseEffect*Math.pow(h.effectMultiplier,h.level>0?h.level-1:0)))+" knowledge/s ",1),h.level>0&&h.level<h.maxLevel?(st(),ct("span",vD,"(Next: +"+bt(i(h.baseEffect*Math.pow(h.effectMultiplier,h.level)))+" knowledge/s)",1)):fe("",!0)],2),L("p",{class:G(["text-sm mb-4",e.themeClasses.primaryText])},[vn(" Cost for next level ("+bt(h.level+1)+"): ",1),L("span",{class:G(["font-bold",e.themeClasses.primaryText])},bt(i(a(e.currentTierIndex,d)))+" Knowledge",3)],2),h.level<h.maxLevel?(st(),ct("button",{key:0,onClick:f=>s("buy-multiplier",{tierIndex:e.currentTierIndex,multiplierIndex:d}),disabled:n.knowledge<a(e.currentTierIndex,d),class:G([e.themeClasses.activeMenuBg,"mt-auto text-white py-2 px-4 rounded-md text-base font-bold transition duration-300 ease-in-out",n.knowledge<a(e.currentTierIndex,d)?"opacity-50 cursor-not-allowed":""])}," Buy Upgrade (Level "+bt(h.level+1)+") ",11,wD)):(st(),ct("div",{key:1,class:G(["mt-auto text-center py-2 rounded-md font-bold text-base shadow-inner",[e.themeClasses.activeMenuBg,e.themeClasses.primaryText,"bg-opacity-80"]])}," Max Level Reached  ",2))],2))),128))]),o.value?(st(),ct("div",xD,[L("button",{onClick:c[1]||(c[1]=h=>s("advance-tier")),class:G(["py-3 px-6 rounded-lg text-xl font-bold transition duration-300 ease-in-out transform hover:scale-105",e.themeClasses.activeMenuBg,e.themeClasses.primaryText])}," Go to Next Tier: "+bt(e.multiplierTiers[e.currentTierIndex+1].name)+"  ",3)])):fe("",!0)])):(st(),ct("div",{key:1,class:G(["text-center p-4 rounded-lg border border-dashed",[e.themeClasses.sidebarBg,e.themeClasses.accentBorder,e.themeClasses.primaryText]])},c[4]||(c[4]=[L("p",{class:"italic"},"Loading Arcane Data...",-1)]),2))],2),Fe(hD,{"theme-classes":e.themeClasses},null,8,["theme-classes"])],2))}},ED=Kn(TD,[["__scopeId","data-v-cb5cd9a6"]]),ID={__name:"ResearchView",props:{themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-gray-950",primaryText:"text-yellow-300",accentBorder:"border-yellow-600",sidebarBg:"bg-violet-950",activeMenuBg:"bg-green-800"})}},setup(n){const t=n,{themeClasses:e}=t;return console.log("ResearchView: Component loaded."),(s,i)=>(st(),ct("section",{class:G([Ut(e).sidebarBg,Ut(e).primaryText,Ut(e).accentBorder,"p-6 rounded-lg shadow-xl border"])},[L("h2",{class:G(["text-3xl font-serif mb-6 border-b pb-3",[Ut(e).primaryText,Ut(e).accentBorder]])}," Research ",2),L("p",{class:G(["text-lg",Ut(e).primaryText])}," Uncover forgotten spells and ancient technologies. ",2),L("p",{class:G(["text-sm mt-4",Ut(e).primaryText])},"This section will contain various research projects, their costs, and effects.",2)],2))}},SD=Kn(ID,[["__scopeId","data-v-675a273d"]]),AD={__name:"ExpeditionsView",props:{themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-gray-950",primaryText:"text-yellow-300",accentBorder:"border-yellow-600",sidebarBg:"bg-violet-950",activeMenuBg:"bg-green-800"})}},setup(n){const t=n,{themeClasses:e}=t;return console.log("ExpeditionsView: Component loaded."),(s,i)=>(st(),ct("section",{class:G([Ut(e).primaryBg,Ut(e).primaryText,Ut(e).accentBorder,"p-6 rounded-lg shadow-xl border"])},[L("h2",{class:G(["text-3xl font-serif mb-6 border-b pb-3",[Ut(e).primaryText,Ut(e).accentBorder]])}," Expeditions ",2),L("p",{class:G(["text-lg",Ut(e).primaryText])}," Send your scholars on perilous journeys to retrieve rare artifacts and knowledge. ",2),L("p",{class:G(["text-sm mt-4",Ut(e).primaryText])},"Manage your expeditions, track their progress, and claim rewards here.",2)],2))}},CD=Kn(AD,[["__scopeId","data-v-9c681b39"]]),PD={__name:"InventoryView",props:{themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-white",primaryText:"text-black",headerBg:"bg-gray-800",headerText:"text-white",accentBorder:"border-gray-400",sidebarBg:"bg-gray-100",activeMenuBg:"bg-gray-300",activeMenuText:"text-black",shadowColor:"shadow-gray-500/30",buttonBg:"bg-blue-600",buttonText:"text-white",buttonHover:"hover:bg-blue-700",buttonSecondaryBg:"bg-gray-500",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-gray-600",buttonUrgentBg:"bg-red-600",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-700"})}},setup(n){const t=n,{themeClasses:e}=t;return console.log("InventoryView: Component loaded."),(s,i)=>(st(),ct("section",{class:G([Ut(e).primaryBg,Ut(e).primaryText,Ut(e).accentBorder,"p-6 rounded-lg shadow-xl border",Ut(e).shadowColor])},[L("h2",{class:G(["text-3xl font-serif mb-6 border-b pb-3",[Ut(e).primaryText,Ut(e).accentBorder]])}," Inventory ",2),L("p",{class:G(["text-lg",Ut(e).primaryText])}," Behold your collected treasures and resources. ",2),L("p",{class:G(["text-sm mt-4",Ut(e).primaryText])},"This section will display all your acquired items, resources, and their quantities.",2)],2))}},RD=Kn(PD,[["__scopeId","data-v-6b6782e6"]]),kD={__name:"SkillTreeView",props:{themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-gray-950",primaryText:"text-yellow-300",accentBorder:"border-yellow-600",sidebarBg:"bg-violet-950",activeMenuBg:"bg-green-800"})}},setup(n){const t=n,{themeClasses:e}=t;return console.log("SkillTreeView: Component loaded."),(s,i)=>(st(),ct("section",{class:G([Ut(e).primaryBg,Ut(e).primaryText,Ut(e).accentBorder,"p-6 rounded-lg shadow-xl border"])},[L("h2",{class:G(["text-3xl font-serif mb-6 border-b pb-3",[Ut(e).primaryText,Ut(e).accentBorder]])}," Skill Tree ",2),L("p",{class:G(["text-lg",Ut(e).primaryText])}," Forge your destiny by mastering powerful skills and abilities. ",2),L("p",{class:G(["text-sm mt-4",Ut(e).primaryText])},"Invest your hard-earned skill points to unlock new capabilities and enhance existing ones.",2)],2))}},DD=Kn(kD,[["__scopeId","data-v-20e61295"]]),MD={class:"flex items-center space-x-2"},OD={class:"flex items-center space-x-2"},LD={class:"flex items-center space-x-2"},VD={class:"flex items-center space-x-2 ml-auto"},ND={key:2,class:"text-lg text-red-500 bg-red-100 p-4 rounded-lg text-center"},FD={key:4,class:"overflow-x-auto"},BD={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},UD={class:"px-4 py-4 whitespace-nowrap text-sm font-bold"},$D={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},zD={class:"px-4 py-4 whitespace-nowrap text-sm"},jD={class:"px-4 py-4 whitespace-nowrap text-sm"},HD={class:"px-4 py-4 whitespace-nowrap text-sm"},WD={class:"px-4 py-4 whitespace-nowrap text-sm"},qD={class:"px-4 py-4 whitespace-nowrap text-xs"},GD={__name:"ClassificationView",props:{themeClasses:{type:Object,required:!0,default:()=>({primaryBg:"bg-white",primaryText:"text-black",headerBg:"bg-gray-800",headerText:"text-white",accentBorder:"border-gray-400",sidebarBg:"bg-gray-100",activeMenuBg:"bg-gray-300",activeMenuText:"text-black",shadowColor:"shadow-gray-500/30",buttonBg:"bg-blue-600",buttonText:"text-white",buttonHover:"hover:bg-blue-700",buttonSecondaryBg:"bg-gray-500",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-gray-600",buttonUrgentBg:"bg-red-600",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-700"})}},setup(n){const t=n,e={prestige:3,tierSum:2,count:1},s=typeof __app_id<"u"?__app_id:"default-app-id",i=Br(),r=Hi();let o;const a=At([]),l=At({}),c=At(!0),h=At(null),d=At(""),f=At(""),g=At(""),_=At("prestige"),b=At("desc"),v=Ln(()=>{const w=t.themeClasses.primaryBg.includes("black")||t.themeClasses.primaryBg.includes("332c30"),y=w?"#FFFFFF":"#333333";return{scales:{x:{beginAtZero:!0,max:100,stacked:!0,title:{display:!0,text:"Percentage Dominance (%)",color:y},ticks:{color:y},grid:{color:w?"#555":"#ddd"}},y:{stacked:!0,ticks:{color:y},grid:{color:w?"#555":"#ddd"}}},responsive:!0,maintainAspectRatio:!1,height:"100px",indexAxis:"y",plugins:{tooltip:{callbacks:{label:x=>x.dataset.label+": "+x.parsed.x.toFixed(2)+"%"}},legend:{position:"bottom",labels:{color:y}}}}}),A=async w=>{if(l.value[w])return l.value[w];try{const y=ln(i,`artifacts/${s}/users/${w}/profile/user_data`),x=await iu(y);if(x.exists()){const E=x.data(),I={userName:E.username||E.name||"Anonymous Scholar",userLocation:E.location||null};return l.value[w]=I,I}}catch(y){console.warn(`Could not fetch profile for user ${w}:`,y.message)}return l.value[w]={userName:"Missing Profile",userLocation:null},l.value[w]},C=()=>{if(!r.currentUser){h.value="You must be logged in to view the Classification.",c.value=!1;return}const w=GR(i,"leaderboard"),y=Q0(w);c.value=!0,h.value=null,o=ck(y,async x=>{try{const E=[],I=new Set;x.forEach(rt=>{const it=rt.data();E.push({id:rt.id,currentTierIndex:it.currentTierIndex||0,...it}),it.userId&&I.add(it.userId)});const P=Array.from(I).map(rt=>A(rt));await Promise.all(P);const S=E.map(rt=>({...rt,userName:l.value[rt.userId]?.userName||"Unknown Player",userLocation:l.value[rt.userId]?.userLocation||null}));a.value=S}catch(E){console.error("Error processing leaderboard snapshot or profiles:",E),h.value="Failed to process data from the server."}finally{c.value=!1}},x=>{console.error("Error fetching leaderboard:",x),h.value=`Access Denied or Connection Error: ${x.message}`,c.value=!1})},M=()=>{b.value=b.value==="desc"?"asc":"desc"},k=Ln(()=>{const y=[...a.value.filter(x=>{if(d.value&&x.faction!==d.value||f.value&&x.specialty!==f.value)return!1;const E=x.location||"",I=g.value;return!(I&&E!==I)})];return y.sort((x,E)=>{const I=x[_.value],P=E[_.value];if(_.value==="prestige"||_.value==="currentTierIndex"){const rt=(I||0)-(P||0);return b.value==="asc"?rt:-rt}const S=(I||"").localeCompare(P||"");return b.value==="asc"?S:-S}),y}),D=Ln(()=>{const w={Lumen:{count:0,tierSum:0,prestigeSum:0},Umbra:{count:0,tierSum:0,prestigeSum:0},Other:{count:0,tierSum:0,prestigeSum:0}};return k.value.forEach(y=>{const x=(y.currentTierIndex||0)+1,E=y.prestige||0,I=y.faction==="Lumen"||y.faction==="Umbra"?y.faction:"Other";w[I].count++,w[I].tierSum+=x,w[I].prestigeSum+=E}),w}),N=Ln(()=>{const w=D.value,y=e,x=Y=>Y.prestigeSum*y.prestige+Y.tierSum*y.tierSum+Y.count*y.count,E=x(w.Lumen),I=x(w.Umbra),P=x(w.Other),S=E+I+P;if(S===0)return[];const rt=E/S*100,it=I/S*100,dt=P/S*100,ot=t.themeClasses.factionLumenColor||"#13c2eb",H=t.themeClasses.factionUmbraColor||"#611462",J=[{name:"Lumen",data:[["Total Weighted Dominance",Math.round(rt*100)/100]],backgroundColor:ot},{name:"Umbra",data:[["Total Weighted Dominance",Math.round(it*100)/100]],backgroundColor:H}];return dt>.01&&J.push({name:"Other/Unassigned",data:[["Total Weighted Dominance",Math.round(dt*100)/100]],backgroundColor:"#6b7280"}),J});return Rr(()=>{const w=r.onAuthStateChanged(y=>{w(),y?C():(c.value=!1,h.value="You must be logged in to view the Classification.")})}),Rc(()=>{o&&(o(),console.log("ClassificationView: Firestore listener unsubscribed."))}),(w,y)=>{const x=GT("bar-chart");return st(),ct("section",{class:G([n.themeClasses.primaryBg,n.themeClasses.primaryText,n.themeClasses.accentBorder,"p-6 rounded-lg shadow-xl border overflow-auto h-full",n.themeClasses.shadowColor])},[L("h2",{class:G(["text-3xl font-serif mb-6 border-b pb-3",[n.themeClasses.primaryText,n.themeClasses.accentBorder]])}," Classification: Global Scholars ",2),L("p",{class:G(["text-sm mt-4 mb-4",n.themeClasses.primaryText])}," View the global rankings of all scholars. Use the controls below to filter and sort the data. ",2),!c.value&&!h.value?(st(),ct("div",{key:0,class:G(["mb-8 p-4 rounded-lg border",n.themeClasses.accentBorder])},[y[5]||(y[5]=L("h3",{class:"text-xl font-bold mb-4"},"Composite Faction Dominance (Percentage)",-1)),L("div",{class:G([n.themeClasses.sidebarBg,n.themeClasses.primaryText,"p-6 rounded-lg shadow-inner"])},[y[4]||(y[4]=L("h4",{class:"text-lg font-semibold mb-4"},"Total Weighted Dominance (Prestige 3x, Tier Sum 2x, Count 1x)",-1)),Fe(x,{data:N.value,options:v.value},null,8,["data","options"])],2),L("p",{class:G(["text-xs mt-4",n.themeClasses.primaryText])}," *Dominance is calculated based on a composite score: (Prestige x3) + (Tier Sum x2) + (Scholar Count x1). Data reflects the current filters applied. ",2)],2)):fe("",!0),L("div",{class:G(["flex flex-wrap gap-4 mb-6 p-4 rounded-lg border",[n.themeClasses.accentBorder,n.themeClasses.sidebarBg]])},[L("div",MD,[y[7]||(y[7]=L("label",{for:"filter-faction",class:"font-bold text-sm"},"Faction:",-1)),uo(L("select",{id:"filter-faction","onUpdate:modelValue":y[0]||(y[0]=E=>d.value=E),class:G(["p-2 rounded-md shadow-inner text-sm",[n.themeClasses.primaryBg,n.themeClasses.primaryText,n.themeClasses.accentBorder,"border"]])},y[6]||(y[6]=[L("option",{value:""},"All Factions",-1),L("option",{value:"Lumen"},"Lumen",-1),L("option",{value:"Umbra"},"Umbra",-1)]),2),[[Xa,d.value]])]),L("div",OD,[y[9]||(y[9]=L("label",{for:"filter-specialty",class:"font-bold text-sm"},"Specialty:",-1)),uo(L("select",{id:"filter-specialty","onUpdate:modelValue":y[1]||(y[1]=E=>f.value=E),class:G(["p-2 rounded-md shadow-inner text-sm",[n.themeClasses.primaryBg,n.themeClasses.primaryText,n.themeClasses.accentBorder,"border"]])},y[8]||(y[8]=[L("option",{value:""},"All Specialties",-1),L("option",{value:"Arcane"},"Arcane",-1),L("option",{value:"Alchemist"},"Alchemist",-1)]),2),[[Xa,f.value]])]),L("div",LD,[y[11]||(y[11]=L("label",{for:"filter-location",class:"font-bold text-sm"},"Location:",-1)),uo(L("select",{id:"filter-location","onUpdate:modelValue":y[2]||(y[2]=E=>g.value=E),class:G(["p-2 rounded-md shadow-inner text-sm",[n.themeClasses.primaryBg,n.themeClasses.primaryText,n.themeClasses.accentBorder,"border"]])},y[10]||(y[10]=[hg('<option value="" data-v-9cdba474>All Locations</option><option value="Aethelgard" data-v-9cdba474>Aethelgard</option><option value="The Shadow Wastes" data-v-9cdba474>The Shadow Wastes</option><option value="Great Library" data-v-9cdba474>Great Library</option><option value="The Citadel" data-v-9cdba474>The Citadel</option><option value="Hidden Village" data-v-9cdba474>Hidden Village</option>',6)]),2),[[Xa,g.value]])]),L("div",VD,[y[13]||(y[13]=L("label",{for:"sort-by",class:"font-bold text-sm"},"Sort By:",-1)),uo(L("select",{id:"sort-by","onUpdate:modelValue":y[3]||(y[3]=E=>_.value=E),class:G(["p-2 rounded-md shadow-inner text-sm",[n.themeClasses.primaryBg,n.themeClasses.primaryText,n.themeClasses.accentBorder,"border"]])},y[12]||(y[12]=[hg('<option value="prestige" data-v-9cdba474>Prestige (Default)</option><option value="currentTierIndex" data-v-9cdba474>Tier</option><option value="name" data-v-9cdba474>Name</option><option value="faction" data-v-9cdba474>Faction</option><option value="specialty" data-v-9cdba474>Specialty</option><option value="location" data-v-9cdba474>Location</option>',6)]),2),[[Xa,_.value]])]),L("button",{onClick:M,class:G(["py-2 px-3 rounded-md text-sm font-bold shadow-md transition duration-200",[b.value==="desc"?n.themeClasses.buttonUrgentBg:n.themeClasses.buttonBg,b.value==="desc"?n.themeClasses.buttonUrgentText:n.themeClasses.buttonText,b.value==="desc"?n.themeClasses.buttonUrgentHover:n.themeClasses.buttonHover]])}," Sort: "+bt(b.value==="desc"?"High to Low ()":"Low to High ()"),3)],2),c.value?(st(),ct("div",{key:1,class:G(["text-lg p-4 text-center",n.themeClasses.primaryText])},"Loading global rankings...",2)):h.value?(st(),ct("div",ND,"Error fetching rankings: "+bt(h.value),1)):k.value.length===0?(st(),ct("div",{key:3,class:G(["text-lg p-4 text-center rounded-lg",n.themeClasses.primaryText])}," No scholars found matching the current filters. ",2)):(st(),ct("div",FD,[L("table",{class:G(["min-w-full divide-y",n.themeClasses.accentBorder])},[L("thead",{class:G([n.themeClasses.headerBg,n.themeClasses.headerText])},y[14]||(y[14]=[L("tr",null,[L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"#"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Player"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Name"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Prestige"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Tier"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Faction"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Specialty"),L("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Location")],-1)]),2),L("tbody",{class:G(["divide-y",n.themeClasses.accentBorder])},[(st(!0),ct(sn,null,kc(k.value,(E,I)=>(st(),ct("tr",{key:E.id,class:G(["transition duration-150 ease-in-out",[n.themeClasses.sidebarBg,"hover:opacity-80"]])},[L("td",BD,bt(I+1),1),L("td",UD,bt(E.userName||"Loading..."),1),L("td",$D,bt(E.name),1),L("td",zD,bt(E.prestige),1),L("td",jD,bt((E.currentTierIndex||0)+1),1),L("td",HD,bt(E.faction),1),L("td",WD,bt(E.specialty),1),L("td",qD,bt(E.location||E.userLocation||"Unknown"),1)],2))),128))],2)],2)]))],2)}}},KD=Kn(GD,[["__scopeId","data-v-9cdba474"]]),YD={class:"text-3xl font-serif tracking-wide"},XD={class:"flex items-center space-x-4"},QD={class:"text-lg"},JD={class:"font-bold text-2xl"},ZD={class:"text-lg"},tM={class:"font-bold text-2xl"},eM={class:"text-lg"},nM={class:"font-bold text-2xl"},sM=["disabled"],iM=["onClick","title"],rM={class:"text-3xl flex-shrink-0"},oM={__name:"MainGameComponent",props:{userId:{type:String,required:!0},characterId:{type:String,required:!0}},emits:["returnToCharacterSelect"],setup(n,{emit:t}){const e=n,s=t,i=At(0),r=At(0),o=At({name:"",faction:"",specialty:"",prestige:0,location:""}),a=At([]),l=At("sanctum"),c=At(!1),h=At(0),d=At(0),f=Hi(),g=Br(),_=typeof __app_id<"u"?__app_id:"default-app-id",b=H=>{if(H==null)return"0.00";H=Number(H);const J=[{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}];for(let Y=0;Y<J.length;Y++){const{value:ht,symbol:St}=J[Y];if(Math.abs(H)>=ht){const yt=H/ht;let Nt;return yt<10?Nt=yt.toFixed(2):yt<100?Nt=yt.toFixed(1):Nt=Math.floor(yt).toString(),Nt=Nt.replace(/\.00$/,"").replace(/(\.\d)0$/,"$1"),Nt+St}}return H.toFixed(2)},v=Ln(()=>{const{faction:H,specialty:J}=o.value;let Y={primaryBg:"bg-white",primaryText:"text-black",headerBg:"bg-gray-800",headerText:"text-white",accentBorder:"border-gray-400",sidebarBg:"bg-gray-100",activeMenuBg:"bg-blue-600",activeMenuText:"text-white",shadowColor:"shadow-gray-500/30",buttonBg:"bg-blue-600",buttonText:"text-white",buttonHover:"hover:bg-blue-700",buttonSecondaryBg:"bg-gray-500",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-gray-600",buttonUrgentBg:"bg-red-600",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-700"};return H==="Lumen"?J==="Alchemist"?Y={primaryBg:"bg-white",primaryText:"text-[#7d6b5b]",headerBg:"bg-[#13c2eb]",headerText:"text-white",accentBorder:"border-[#bd895b]",sidebarBg:"bg-gray-50",activeMenuBg:"bg-[#fc963a]",activeMenuText:"text-white",shadowColor:"shadow-[#13c2eb]/30",buttonBg:"bg-[#fc963a]",buttonText:"text-white",buttonHover:"hover:bg-[#e0862a]",buttonSecondaryBg:"bg-[#7d6b5b]",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-[#6b5a4a]",buttonUrgentBg:"bg-red-600",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-700"}:J==="Arcane"&&(Y={primaryBg:"bg-white",primaryText:"text-[#5b6c7d]",headerBg:"bg-[#eea221]",headerText:"text-white",accentBorder:"border-[#a78d5e]",sidebarBg:"bg-gray-50",activeMenuBg:"bg-[#3a98fc]",activeMenuText:"text-white",shadowColor:"shadow-[#3a98fc]/30",buttonBg:"bg-[#3a98fc]",buttonText:"text-white",buttonHover:"hover:bg-[#3386DF]",buttonSecondaryBg:"bg-[#5b8abd]",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-[#4a77a8]",buttonUrgentBg:"bg-red-600",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-700"}):H==="Umbra"&&(J==="Alchemist"?Y={primaryBg:"bg-[#332c30]",primaryText:"text-gray-200",headerBg:"bg-[#55cd4a]",headerText:"text-black",accentBorder:"border-[#704460]",sidebarBg:"bg-[#4a3d44]",activeMenuBg:"bg-[#b03f85]",activeMenuText:"text-white",shadowColor:"shadow-[#b03f85]/30",buttonBg:"bg-[#b03f85]",buttonText:"text-white",buttonHover:"hover:bg-[#93356F]",buttonSecondaryBg:"bg-[#704460]",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-[#5f3951]",buttonUrgentBg:"bg-red-500",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-600"}:J==="Arcane"&&(Y={primaryBg:"bg-[#2a3b29]",primaryText:"text-gray-100",headerBg:"bg-[#611462]",headerText:"text-[#82fc3a]",accentBorder:"border-[#a65ea6]",sidebarBg:"bg-[#4d5c4c]",activeMenuBg:"bg-[#82fc3a]",activeMenuText:"text-black",shadowColor:"shadow-[#82fc3a]/30",buttonBg:"bg-[#82fc3a]",buttonText:"text-black",buttonHover:"hover:bg-[#73e334]",buttonSecondaryBg:"bg-[#687d5b]",buttonSecondaryText:"text-white",buttonSecondaryHover:"hover:bg-[#56684a]",buttonUrgentBg:"bg-red-500",buttonUrgentText:"text-white",buttonUrgentHover:"hover:bg-red-600"})),Y}),A=Ln(()=>1+o.value.prestige*.1),C=H=>{const{faction:J,specialty:Y}=o.value;let ht=["Novice Whispers","Apprentice Glyphs","Adept's Tomes","Mystic Runes","Etheric Weavings","Celestial Charts","Planar Bindings","Chronomancer's Texts","Abjurer's Wards","Transmuter's Circles","Grandmaster's Codex","Archmage's Grimoire","Aetheric Formulas","Cosmic Inscriptions","Reality Equations","Void Manuscripts","Primordial Truths","Ascendant Doctrines","God-Hand Schematics","Nexus of All Knowledge"];return J==="Lumen"?Y==="Arcane"?ht=["Solar Inscriptions","Starfire Studies","Aetheric Lumina","Ascendant Cantrips","Chalice of Radiance","Empyrean Scrolls","Divine Geometry","Sunsong Orbs","Sanctified Wards","Radiant Transcriptions","The Holy Codex","High Archon's Primer","Light-Form Formulas","Cosmic Alignment","Edicts of Truth","Ethereal Scripts","Primal Genesis","Edicts of the Source","Schema of Creation","Heart of the Cosmos"]:Y==="Alchemist"&&(ht=["Bright Concoctions","Verdant Formulas","Golden Retorts","Elixirs of Life","Vials of Purity","Reagent Catalysts","Alchemical Transmutations","Crystals of Growth","Stable Solutions","The Great Work","Philosopher's Stone","Magnum Opus","Homunculus Formulas","Symphony of Elements","Apothecary's Vault","True Essences","Materia Prima","The Unbreakable Bond","Perfect Synthesis","Wellspring of Vitality"]):J==="Umbra"&&(Y==="Arcane"?ht=["Shadowed Whispers","Nocturnal Glyphs","Voidweaver Texts","Ebon Incantations","Sepulchral Weavings","Forbidden Scrolls","The Black Geometry","Moonshard Orbs","Cursed Wards","Malefic Transcriptions","The Shadow Codex","Necromancer's Grimoire","Dark Matter Formulas","Cosmic Discord","Equations of Decay","Void Manuscripts","Primal Entropy","Doctrines of the End","Schema of Annihilation","Heart of the Void"]:Y==="Alchemist"&&(ht=["Crimson Brews","Corrupted Essences","Blackened Crucibles","Tinctures of Dread","Sanguine Phials","Venomous Catalysts","Vile Transmutations","Crystals of Stasis","Unstable Solutions","The Lesser Work","Blood Stone","Abyss Opus","Gargoyle Formulas","Dissonant Elements","Poisoner's Vault","Dark Essences","Materia Tenebrae","The Broken Bond","Failed Synthesis","Wellspring of Pestilence"])),ht[H]||`Esoteric Tier ${H+1}`},M=()=>{const{faction:H,specialty:J}=o.value;let Y=["Conduits","Scrolls","Crystals","Orbs"];return H==="Lumen"?J==="Arcane"?Y=["Light Channels","Sunstone Tablets","Prismatic Focus","Aether Orbs"]:J==="Alchemist"&&(Y=["Flow Regulators","Reagent Formulas","Growth Crystals","Stabilizing Orbs"]):H==="Umbra"&&(J==="Arcane"?Y=["Shadow Conduits","Ebon Runes","Void Shards","Lunar Orbs"]:J==="Alchemist"&&(Y=["Corrupting Vents","Necrotic Pages","Binding Agents","Decay Orbs"])),Y},k=()=>{const H=[],J=M(),Y=A.value;for(let ht=0;ht<20;ht++){const St=Math.pow(1.8,ht),yt=Math.pow(8,ht),Nt=20+ht*20;H.push({name:`Tier ${ht+1}: ${C(ht)}`,unlocked:ht===0,multipliers:J.map((be,oe)=>({level:0,maxLevel:Nt,baseCost:(10+oe*40)*yt,costMultiplier:1.09+ht*.01,baseEffect:(.1+oe*.4)*St*Y,effectMultiplier:1.1+ht*.005,name:be}))})}return H},D=Ln(()=>{let H=0;return a.value.forEach(J=>{J.unlocked&&J.multipliers.forEach(Y=>{Y.level>0&&(H+=Y.baseEffect*Math.pow(Y.effectMultiplier,Y.level-1))})}),H}),N=()=>{i.value+=D.value||1},w=(H,J)=>{const Y=a.value[H]?.multipliers[J];return Y?Y.baseCost/A.value*Math.pow(Y.costMultiplier,Y.level):1/0},y=({tierIndex:H,multiplierIndex:J})=>{const Y=a.value[H],ht=Y?.multipliers[J];if(!ht||ht.level>=ht.maxLevel)return;const St=w(H,J);i.value>=St&&(i.value-=St,ht.level+=1,ht.level===ht.maxLevel&&Y.multipliers.every(Nt=>Nt.level===Nt.maxLevel)&&a.value[H+1]&&(a.value[H+1].unlocked=!0),I())},x=()=>{o.value.prestige+=1,o.value.prestige>0&&o.value.prestige%10===0&&(d.value+=1),i.value=0,r.value=0,h.value=0,a.value=k(),I()},E=()=>{const H=a.value[h.value],J=a.value[h.value+1];!H||!H.multipliers.every(Y=>Y.level===Y.maxLevel)||(J?a.value[h.value+1].unlocked&&(h.value+=1,I()):x())},I=async()=>{if(c.value=!0,!f.currentUser||!e.characterId)return;const H=f.currentUser.uid,J=ln(g,`artifacts/${_}/users/${H}/characters`,e.characterId),Y=ln(g,`artifacts/${_}/public/data/leaderboard`,e.characterId),ht={knowledge:i.value,prestige:o.value.prestige,currentTierIndex:h.value,multiplierTiers:a.value.map(yt=>({unlocked:yt.unlocked,levels:yt.multipliers.map(Nt=>Nt.level)})),skillPoints:d.value,lastSaved:qt.now()},St={name:o.value.name,prestige:o.value.prestige,faction:o.value.faction,specialty:o.value.specialty,location:o.value.location,userId:H,currentTierIndex:h.value,lastUpdated:qt.now()};try{await ea(J,ht,{merge:!0}),await ea(Y,St,{merge:!0})}catch(yt){console.error("Error saving game progress:",yt)}finally{c.value=!1}},P=async()=>{if(!f.currentUser||!e.characterId)return;const H=ln(g,`artifacts/${_}/users/${f.currentUser.uid}/characters`,e.characterId);try{const J=await iu(H);if(J.exists()){const Y=J.data();o.value.name=Y.name||"Scholar",o.value.faction=Y.faction||"",o.value.specialty=Y.specialty||"",o.value.prestige=Y.prestige||0,o.value.location=Y.location||"",d.value=Y.skillPoints||0,h.value=Y.currentTierIndex||0;const ht=k();Y.multiplierTiers&&Y.multiplierTiers.forEach((yt,Nt)=>{ht[Nt]&&(ht[Nt].unlocked=yt.unlocked,yt.levels.forEach((be,oe)=>{ht[Nt].multipliers[oe]&&(ht[Nt].multipliers[oe].level=be)}))}),a.value=ht;const St=Y.knowledge||0;if(Y.lastSaved&&D.value>0){const yt=(new Date().getTime()-Y.lastSaved.toDate().getTime())/1e3;i.value=yt>0?St+yt*D.value:St}else i.value=St;r.value=i.value}else a.value=k(),i.value=0,r.value=0,h.value=0,d.value=0}catch(J){console.error("Error loading game progress:",J),a.value=k()}};let S=null;Co(i,H=>{S&&cancelAnimationFrame(S);const J=()=>{const Y=H-r.value,ht=Y/20;Math.abs(Y)<.01?(r.value=H,S=null):(r.value+=ht,S=requestAnimationFrame(J))};J()});const rt=async()=>{await I(),await f.signOut()},it=async()=>{await I(),s("returnToCharacterSelect")};let dt=null;Rr(()=>{P(),dt=setInterval(()=>{D.value>0&&(i.value+=D.value)},1e3)}),Rc(async()=>{dt&&clearInterval(dt),S&&cancelAnimationFrame(S),await I()});const ot=[{id:"sanctum",name:"Sanctum / Home",icon:""},{id:"research",name:"Research",icon:""},{id:"expeditions",name:"Expeditions",icon:""},{id:"inventory",name:"Inventory",icon:""},{id:"skill-tree",name:"Skill Tree",icon:""},{id:"classification",name:"Classification",icon:""}];return(H,J)=>(st(),ct("div",{class:G([v.value.primaryBg,v.value.primaryText,"flex flex-col h-screen w-full font-sans overflow-hidden"])},[L("header",{class:G([v.value.headerBg,v.value.headerText,"shadow-lg border-b",v.value.accentBorder,v.value.shadowColor,"flex items-center justify-between p-4 z-20"])},[L("h1",YD,"The Arcane Scholars Legacy || "+bt(o.value.name),1),L("div",XD,[L("span",QD,[J[0]||(J[0]=vn("Prestige: ",-1)),L("span",JD,bt(o.value.prestige),1)]),L("span",ZD,[J[1]||(J[1]=vn("Skill Points: ",-1)),L("span",tM,bt(d.value),1)]),L("span",eM,[J[2]||(J[2]=vn("Knowledge: ",-1)),L("span",nM,bt(b(r.value)),1)]),L("button",{onClick:I,disabled:c.value,class:G([v.value.buttonBg,v.value.buttonText,v.value.buttonHover,"font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"])},bt(c.value?"Saving...":"Save Progress"),11,sM),L("button",{onClick:it,class:G([v.value.buttonSecondaryBg,v.value.buttonSecondaryText,v.value.buttonSecondaryHover,"font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out"])}," Back to Characters ",2),L("button",{onClick:rt,class:G([v.value.buttonUrgentBg,v.value.buttonUrgentText,v.value.buttonUrgentHover,"font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out"])}," Log Out ",2)])],2),L("main",{class:G(["flex-1 p-6 overflow-y-auto custom-scrollbar pb-24",v.value.primaryBg])},[l.value==="sanctum"?(st(),bn(ED,{key:0,knowledge:i.value,multiplierTiers:a.value,passiveKnowledgeGain:D.value,characterDetails:o.value,"theme-classes":v.value,currentTierIndex:h.value,onGenerateKnowledge:N,onBuyMultiplier:y,onAdvanceTier:E},null,8,["knowledge","multiplierTiers","passiveKnowledgeGain","characterDetails","theme-classes","currentTierIndex"])):l.value==="research"?(st(),bn(SD,{key:1,"theme-classes":v.value},null,8,["theme-classes"])):l.value==="expeditions"?(st(),bn(CD,{key:2,"theme-classes":v.value},null,8,["theme-classes"])):l.value==="inventory"?(st(),bn(RD,{key:3,"theme-classes":v.value},null,8,["theme-classes"])):l.value==="skill-tree"?(st(),bn(DD,{key:4,"theme-classes":v.value},null,8,["theme-classes"])):l.value==="classification"?(st(),bn(KD,{key:5,class:G([v.value.primaryBg,"h-full"]),"theme-classes":v.value},null,8,["class","theme-classes"])):fe("",!0)],2),L("nav",{class:G([v.value.headerBg,v.value.accentBorder,"fixed bottom-4 left-1/2 -translate-x-1/2","flex items-center justify-center space-x-2","p-3 rounded-full shadow-2xl border z-50"])},[(st(),ct(sn,null,kc(ot,Y=>L("button",{key:Y.id,onClick:ht=>l.value=Y.id,class:G(["relative group p-3 rounded-full transition-all duration-200 ease-in-out","transform hover:scale-110",l.value===Y.id?[v.value.activeMenuBg,v.value.activeMenuText,"scale-110 shadow-inner"]:[v.value.headerText,"opacity-70 hover:opacity-100"]]),title:Y.name},[L("span",rM,bt(Y.icon),1),L("span",{class:G([v.value.sidebarBg,v.value.primaryText,"absolute bottom-full mb-2 left-1/2 -translate-x-1/2","px-3 py-1 rounded-md text-sm font-medium shadow-lg","transition-all duration-150 scale-0 group-hover:scale-100 origin-bottom"])},bt(Y.name),3)],10,iM)),64))],2)],2))}},aM=Kn(oM,[["__scopeId","data-v-04a26146"]]),lM={id:"app"},cM={key:0,class:"flex items-center justify-center h-screen w-full bg-gray-950 text-yellow-300 text-3xl font-serif"},uM={key:1,class:"flex flex-col items-center justify-center h-screen w-full bg-white text-gray-800 p-8"},hM={key:0,class:"mt-6 text-red-600 bg-red-100 p-3 rounded-md"},dM={key:2},fM={__name:"App",setup(n){const t=Hi();Br();const e=At(null),s=At(!1),i=At(null),r=At("loading"),o=At(null);Rr(()=>{dv(t,f=>{e.value=f,s.value=!0,console.log("App.vue: Auth state changed. User:",f?f.uid:"None"),console.log("App.vue: Is app ready?",s.value),f&&console.log("App.vue: Is user anonymous?",f.isAnonymous)})}),Co([e,s,i],([f,g,_])=>{g&&(f?f.isAnonymous?r.value="accountUpgrade":_?r.value="game":r.value="characterSelection":r.value="login")});const a=async()=>{if(o.value=null,!t.currentUser||!t.currentUser.isAnonymous){o.value="No anonymous account found to link.";return}try{const f=new On,g=await rC(t.currentUser,f);console.log("Account linked successfully!",g.user)}catch(f){console.error("Error linking account:",f),f.code==="auth/credential-already-in-use"?o.value="This Google account is already linked to another scholar. Please use a different Google account.":o.value=`Failed to link account: ${f.message}`}},l=f=>{i.value=f,r.value="game",console.log("App.vue: Character selected with ID:",f)},c=()=>{r.value="characterCreation",console.log("App.vue: Starting new character creation. `currentView` is now:",r.value)},h=f=>{i.value=f,r.value="game",console.log("App.vue: New character created with ID:",f)},d=()=>{i.value=null,r.value="characterSelection",console.log("App.vue: Returning to character selection.")};return(f,g)=>(st(),ct("div",lM,[s.value?r.value==="accountUpgrade"?(st(),ct("div",uM,[g[1]||(g[1]=L("h2",{class:"text-3xl font-serif text-black mb-4"},"Account Update Required",-1)),g[2]||(g[2]=L("p",{class:"text-lg text-gray-700 mb-8 max-w-lg text-center"}," To protect your progress, please link your anonymous account to a Google account. This is a one-time process. ",-1)),L("button",{onClick:a,class:"bg-black hover:bg-gray-800 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out flex items-center justify-center text-lg"},g[0]||(g[0]=[L("img",{src:"https://www.google.com/favicon.ico",alt:"Google Logo",class:"h-7 w-7 mr-3"},null,-1),vn(" Link with Google ",-1)])),o.value?(st(),ct("p",hM,bt(o.value),1)):fe("",!0)])):(st(),ct("div",dM,[r.value==="login"?(st(),bn(gk,{key:0})):r.value==="characterSelection"?(st(),bn(nD,{key:`selection-${e.value.uid}`,onCharacterSelected:l,onStartNewCharacterCreation:c})):r.value==="characterCreation"?(st(),bn(Nk,{key:`creation-${e.value.uid}`,onCharacterCreated:h,onReturnToSelect:d})):r.value==="game"?(st(),bn(aM,{key:`game-${i.value}`,userId:e.value.uid,characterId:i.value,onReturnToCharacterSelect:d},null,8,["userId","characterId"])):fe("",!0)])):(st(),ct("div",cM," Loading... "))]))}};/*!
 * Chartkick.js v5.0.1
 * Create beautiful charts with one line of JavaScript
 * https://github.com/ankane/chartkick.js
 * MIT License
 */function Xs(n){return Object.prototype.toString.call(n)==="[object Array]"}function Af(n){return n instanceof Function}function kl(n){return Object.prototype.toString.call(n)==="[object Object]"&&!Af(n)&&n instanceof Object}function Zh(n,t){for(var e in t)e!=="__proto__"&&(kl(t[e])||Xs(t[e])?(kl(t[e])&&!kl(n[e])&&(n[e]={}),Xs(t[e])&&!Xs(n[e])&&(n[e]=[]),Zh(n[e],t[e])):t[e]!==void 0&&(n[e]=t[e]))}function ee(n,t){var e={};return Zh(e,n),Zh(e,t),e}var pM=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i;function gM(n){for(var t=0;t<n.length;t++)for(var e=n[t].data,s=0;s<e.length;s++)if(e[s][1]<0)return!0;return!1}function vs(n){return""+n}function zn(n){return parseFloat(n)}function Mn(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);var t=vs(n),e=t.match(pM);if(e){var s=parseInt(e[1],10),i=parseInt(e[2],10)-1,r=parseInt(e[3],10);return new Date(s,i,r)}else{var o=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(o)||t)}}function Cf(n){if(Xs(n))return n;var t=[];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.push([e,n[e]]);return t}function Sa(n,t,e,s,i,r,o,a){return function(l,c,h){var d=l.data,f=ee({},n);return f=ee(f,h||{}),(l.singleSeriesFormat||"legend"in c)&&t(f,c.legend,l.singleSeriesFormat),c.title&&e(f,c.title),"min"in c?s(f,c.min):gM(d)||s(f,0),c.max&&i(f,c.max),"stacked"in c&&r(f,c.stacked),c.colors&&(f.colors=c.colors),c.xtitle&&o(f,c.xtitle),c.ytitle&&a(f,c.ytitle),f=ee(f,c.library||{}),f}}function mM(n,t){return n[0].getTime()-t[0].getTime()}function Pf(n,t){return n[0]-t[0]}function sw(n,t){return n-t}function tr(n,t){for(var e=0;e<n.length;e++)if(!t(n[e]))return!1;return!0}function _M(n){return n==="day"||n==="week"||n==="month"||n==="year"}function iw(n,t){if(t===void 0&&(t=!1),n.length===0)return null;var e=tr(n,function(c){return c.getMilliseconds()===0&&c.getSeconds()===0});if(!e)return null;var s=tr(n,function(c){return c.getMinutes()===0});if(!s)return"minute";var i=tr(n,function(c){return c.getHours()===0});if(!i)return"hour";if(t)return"day";var r=tr(n,function(c){return c.getDate()===1});if(!r){var o=n[0].getDay(),a=tr(n,function(c){return c.getDay()===o});return a?"week":"day"}var l=tr(n,function(c){return c.getMonth()===0});return l?"year":"month"}function Ju(n){return!isNaN(Mn(n))&&vs(n).length>=6}function yM(n){return typeof n=="number"}var n_=["bytes","KB","MB","GB","TB","PB","EB"];function yn(n,t,e,s){n=n||"",e.prefix&&(t<0&&(t=t*-1,n+="-"),n+=e.prefix);var i=e.suffix||"",r=e.precision,o=e.round;if(e.byteScale){var a=t>=0;a||(t*=-1);var l=s?e.byteScale:t,c;l>=1152921504606847e3?(t/=1152921504606847e3,c=6):l>=0x4000000000000?(t/=0x4000000000000,c=5):l>=1099511627776?(t/=1099511627776,c=4):l>=1073741824?(t/=1073741824,c=3):l>=1048576?(t/=1048576,c=2):l>=1024?(t/=1024,c=1):c=0,r===void 0&&o===void 0&&(t>=1023.5&&c<n_.length-1&&(t=1,c+=1),r=t>=1e3?4:3),i=" "+n_[c],a||(t*=-1)}if(r!==void 0&&o!==void 0)throw Error("Use either round or precision, not both");if(!s&&(r!==void 0&&(t=t.toPrecision(r),e.zeros||(t=parseFloat(t))),o!==void 0))if(o<0){var h=Math.pow(10,-1*o);t=parseInt((1*t/h).toFixed(0))*h}else t=t.toFixed(o),e.zeros||(t=parseFloat(t));if(e.thousands||e.decimal){t=vs(t);var d=t.split(".");t=d[0],e.thousands&&(t=t.replace(/\B(?=(\d{3})+(?!\d))/g,e.thousands)),d.length>1&&(t+=(e.decimal||".")+d[1])}return n+t+i}function s_(n,t,e){return e in t?t[e]:e in n.options?n.options[e]:null}var Rf={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},rw={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},ow=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];function kf(n,t,e){t!==void 0?(n.plugins.legend.display=!!t,t&&t!==!0&&(n.plugins.legend.position=t)):e&&(n.plugins.legend.display=!1)}function Df(n,t){n.plugins.title.display=!0,n.plugins.title.text=t}function bM(n,t){t!==null&&(n.scales.y.min=zn(t))}function vM(n,t){n.scales.y.max=zn(t)}function wM(n,t){t!==null&&(n.scales.x.min=zn(t))}function xM(n,t){n.scales.x.max=zn(t)}function aw(n,t){n.scales.x.stacked=!!t,n.scales.y.stacked=!!t}function lw(n,t){n.scales.x.title.display=!0,n.scales.x.title.text=t}function cw(n,t){n.scales.y.title.display=!0,n.scales.y.title.text=t}function i_(n,t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?"rgba("+parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16)+", "+t+")":n}function Rs(n){return n!=null}function TM(n,t,e){var s=Math.ceil(n.element.offsetWidth/4/t.labels.length);s>25?s=25:s<10&&(s=10),e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(i){return i=vs(this.getLabelForValue(i)),i.length>s?i.substring(0,s-2)+"...":i})}function EM(n){for(var t=1,e=IM(n);e>=1024;)t*=1024,e/=1024;return t}function ou(n,t,e){var s={thousands:n.options.thousands,decimal:n.options.decimal},i=ee({prefix:n.options.prefix,suffix:n.options.suffix,precision:n.options.precision,round:n.options.round,zeros:n.options.zeros},s);if(n.options.bytes){var r=n.data;e==="pie"&&(r=[{data:r}]),i.byteScale=EM(r)}if(e!=="pie"){var o=t.scales.y;e==="bar"&&(o=t.scales.x),i.byteScale&&(o.ticks.stepSize||(o.ticks.stepSize=i.byteScale/2),o.ticks.maxTicksLimit||(o.ticks.maxTicksLimit=4)),o.ticks.callback||(o.ticks.callback=function(l){return yn("",l,i,!0)}),(e==="scatter"||e==="bubble")&&!t.scales.x.ticks.callback&&(t.scales.x.ticks.callback=function(l){return yn("",l,s,!0)})}if(!t.plugins.tooltip.callbacks.label)if(e==="scatter")t.plugins.tooltip.callbacks.label=function(l){var c=l.dataset.label||"";c&&(c+=": ");var h=l.parsed;return c+"("+yn("",h.x,s)+", "+yn("",h.y,i)+")"};else if(e==="bubble")t.plugins.tooltip.callbacks.label=function(l){var c=l.dataset.label||"";c&&(c+=": ");var h=l.raw;return c+"("+yn("",h.x,s)+", "+yn("",h.y,i)+", "+yn("",h.v,s)+")"};else if(e==="pie")t.plugins.tooltip.callbacks.label=function(l){return yn("",l.parsed,i)};else{var a=e==="bar"?"x":"y";t.plugins.tooltip.callbacks.label=function(l){if(l.parsed[a]!==null){var c=l.dataset.label||"";return c&&(c+=": "),yn(c,l.parsed[a],i)}}}(e==="line"||e==="area")&&n.xtype==="number"&&(t.scales.x.ticks.callback||(t.scales.x.ticks.callback=function(l){return vs(l)}),t.plugins.tooltip.callbacks.title||(t.plugins.tooltip.callbacks.title=function(l){return vs(l[0].parsed.x)}))}function IM(n){for(var t=0,e=0;e<n.length;e++)for(var s=n[e].data,i=0;i<s.length;i++){var r=Math.abs(s[i][1]);r>t&&(t=r)}return t}function SM(n){for(var t=0,e=0;e<n.length;e++)for(var s=n[e].data,i=0;i<s.length;i++){var r=s[i][2];r>t&&(t=r)}return t}var Mf=Sa(ee(Rf,rw),kf,Df,bM,vM,aw,lw,cw);function AM(n){for(var t=n.data,e={},s=[],i=[],r=[],o=0;o<t.length;o++)for(var a=t[o].data,l=0;l<a.length;l++){var c=a[l],h=n.xtype==="datetime"?c[0].getTime():c[0];e[h]||(e[h]=new Array(t.length),s.push(h)),e[h][o]=c[1]}(n.xtype==="datetime"||n.xtype==="number")&&s.sort(sw);for(var d=0;d<t.length;d++)r.push([]);for(var f=0;f<s.length;f++){var g=s[f],_=n.xtype==="datetime"?new Date(g):g;i.push(_);for(var b=e[g],v=0;v<t.length;v++){var A=b[v];r[v].push(A===void 0?null:A)}}return{labels:i,values:r}}function CM(n){for(var t=n.data,e=[],s=SM(t),i=0;i<t.length;i++){for(var r=t[i].data,o=[],a=0;a<r.length;a++){var l=r[a];o.push({x:l[0],y:l[1],r:l[2]*20/s,v:l[2]})}e.push(o)}return{labels:[],values:e}}function PM(n){for(var t=n.data,e=[],s=0;s<t.length;s++){var i=t[s].data;i.sort(Pf);for(var r=[],o=0;o<i.length;o++){var a=i[o];r.push({x:a[0],y:a[1]})}e.push(r)}return{labels:[],values:e}}function RM(n,t){return t==="bubble"?CM(n):n.xtype==="number"&&t!=="bar"&&t!=="column"?PM(n):AM(n)}function Of(n,t,e){for(var s=RM(n,e),i=s.labels,r=s.values,o=n.data,a=[],l=n.options.colors||ow,c=0;c<o.length;c++){var h=o[c],d=void 0,f=void 0;if(n.options.colors&&n.singleSeriesFormat&&(e==="bar"||e==="column")&&!h.color&&Xs(n.options.colors)&&!Xs(n.options.colors[0])){d=l,f=[];for(var g=0;g<l.length;g++)f[g]=i_(d[g],.5)}else d=h.color||l[c],f=e!=="line"?i_(d,.5):d;var _={label:h.name||"",data:r[c],fill:e==="area",borderColor:d,backgroundColor:f,borderWidth:2},b=e==="line"||e==="area"||e==="scatter"||e==="bubble";b&&(_.pointBackgroundColor=d,_.pointHoverBackgroundColor=d,_.pointHitRadius=50),e==="bubble"&&(_.pointBackgroundColor=f,_.pointHoverBackgroundColor=f,_.pointHoverBorderWidth=2),h.stack&&(_.stack=h.stack);var v=s_(n,h,"curve");v===!1?_.tension=0:b&&(_.tension=.4);var A=s_(n,h,"points");A===!1&&(_.pointRadius=0,_.pointHoverRadius=0),_=ee(_,n.options.dataset||{}),_=ee(_,h.library||{}),_=ee(_,h.dataset||{}),a.push(_)}var C=n.options.xmin,M=n.options.xmax;if(n.xtype==="datetime"?(Rs(C)&&(t.scales.x.min=Mn(C).getTime()),Rs(M)&&(t.scales.x.max=Mn(M).getTime())):n.xtype==="number"&&(Rs(C)&&(t.scales.x.min=C),Rs(M)&&(t.scales.x.max=M)),n.xtype==="datetime"){var k=iw(i);if(i.length===0&&(Rs(C)&&i.push(Mn(C)),Rs(M)&&i.push(Mn(M))),i.length>0){for(var D=(Rs(C)?Mn(C):i[0]).getTime(),N=(Rs(M)?Mn(M):i[0]).getTime(),w=1;w<i.length;w++){var y=i[w].getTime();y<D&&(D=y),y>N&&(N=y)}var x=(N-D)/(86400*1e3);if(!t.scales.x.time.unit){var E;if(k==="year"||x>365*10?(t.scales.x.time.unit="year",E=365):k==="month"||x>300?(t.scales.x.time.unit="month",E=30):k==="week"||k==="day"||x>10?(t.scales.x.time.unit="day",E=1):k==="hour"||x>.5?(t.scales.x.time.displayFormats={hour:"MMM d, h a"},t.scales.x.time.unit="hour",E=1/24):k==="minute"&&(t.scales.x.time.displayFormats={minute:"h:mm a"},t.scales.x.time.unit="minute",E=1/24/60),E&&x>0){var I=n.element.offsetWidth;if(I>0){var P=Math.ceil(x/E/(I/100));k==="week"&&E===1&&(P=Math.ceil(P/7)*7),t.scales.x.ticks.stepSize=P}}}t.scales.x.time.tooltipFormat||(k==="year"?t.scales.x.time.tooltipFormat="yyyy":k==="month"?t.scales.x.time.tooltipFormat="MMM yyyy":k==="week"||k==="day"?t.scales.x.time.tooltipFormat="PP":k==="hour"?t.scales.x.time.tooltipFormat="MMM d, h a":k==="minute"&&(t.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:i,datasets:a}}var Yn=function(t){this.name="chartjs",this.library=t};Yn.prototype.renderLineChart=function(t,e){e||(e="line");var s={},i=Mf(t,ee(s,t.options));ou(t,i,e);var r=Of(t,i,e);t.xtype==="number"?(i.scales.x.type=i.scales.x.type||"linear",i.scales.x.position=i.scales.x.position||"bottom"):i.scales.x.type=t.xtype==="string"?"category":"time",this.drawChart(t,"line",r,i)};Yn.prototype.renderPieChart=function(t){var e=ee({},Rf);t.options.donut&&(e.cutout="50%"),"legend"in t.options&&kf(e,t.options.legend),t.options.title&&Df(e,t.options.title),e=ee(e,t.options.library||{}),ou(t,e,"pie");for(var s=[],i=[],r=0;r<t.data.length;r++){var o=t.data[r];s.push(o[0]),i.push(o[1])}var a={data:i,backgroundColor:t.options.colors||ow};a=ee(a,t.options.dataset||{});var l={labels:s,datasets:[a]};this.drawChart(t,"pie",l,e)};Yn.prototype.renderColumnChart=function(t,e){var s;if(e==="bar"){var i=ee(Rf,rw);i.indexAxis="y",i.scales.x.grid.drawOnChartArea=!0,i.scales.y.grid.drawOnChartArea=!1,delete i.scales.y.ticks.maxTicksLimit,s=Sa(i,kf,Df,wM,xM,aw,lw,cw)(t,t.options)}else s=Mf(t,t.options);ou(t,s,e);var r=Of(t,s,"column");e!=="bar"&&TM(t,r,s),"mode"in s.interaction||(s.interaction.mode="index"),this.drawChart(t,"bar",r,s)};Yn.prototype.renderAreaChart=function(t){this.renderLineChart(t,"area")};Yn.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")};Yn.prototype.renderScatterChart=function(t,e){e=e||"scatter";var s=Mf(t,t.options);ou(t,s,e),"showLine"in s||(s.showLine=!1);var i=Of(t,s,e);s.scales.x.type=s.scales.x.type||"linear",s.scales.x.position=s.scales.x.position||"bottom","mode"in s.interaction||(s.interaction.mode="nearest"),this.drawChart(t,e,i,s)};Yn.prototype.renderBubbleChart=function(t){this.renderScatterChart(t,"bubble")};Yn.prototype.destroy=function(t){t.chart&&t.chart.destroy()};Yn.prototype.drawChart=function(t,e,s,i){if(this.destroy(t),!t.destroyed){var r={type:e,data:s,options:i};t.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(r)+");"),t.element.innerHTML="<canvas></canvas>";var o=t.element.getElementsByTagName("CANVAS")[0];t.chart=new this.library(o,r)}};var uw={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}};function hw(n,t,e){t!==void 0?(n.legend.enabled=!!t,t&&t!==!0&&(t==="top"||t==="bottom"?n.legend.verticalAlign=t:(n.legend.layout="vertical",n.legend.verticalAlign="middle",n.legend.align=t))):e&&(n.legend.enabled=!1)}function dw(n,t){n.title.text=t}function kM(n,t){n.yAxis.min=t}function DM(n,t){n.yAxis.max=t}function MM(n,t){var e=t?t===!0?"normal":t:null;n.plotOptions.series.stacking=e,n.plotOptions.area.stacking=e,n.plotOptions.areaspline.stacking=e}function OM(n,t){n.xAxis.title.text=t}function LM(n,t){n.yAxis.title.text=t}var Lf=Sa(uw,hw,dw,kM,DM,MM,OM,LM);function Vf(n,t,e){var s={prefix:n.options.prefix,suffix:n.options.suffix,thousands:n.options.thousands,decimal:n.options.decimal,precision:n.options.precision,round:n.options.round,zeros:n.options.zeros};e!=="pie"&&!Xs(t.yAxis)&&!t.yAxis.labels.formatter&&(t.yAxis.labels.formatter=function(){return yn("",this.value,s)}),!t.tooltip.pointFormatter&&!t.tooltip.pointFormat&&(t.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'"></span> '+yn(this.series.name+": <b>",this.y,s)+"</b><br/>"})}var Ts=function(t){this.name="highcharts",this.library=t};Ts.prototype.renderLineChart=function(t,e){e=e||"spline";var s={};e==="areaspline"&&(s={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),t.options.curve===!1&&(e==="areaspline"?e="area":e==="spline"&&(e="line"));var i=Lf(t,t.options,s);t.xtype==="number"?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type=t.xtype==="string"?"category":"datetime",i.chart.type||(i.chart.type=e),Vf(t,i,e);for(var r=t.data,o=0;o<r.length;o++){r[o].name=r[o].name||"Value";var a=r[o].data;if(t.xtype==="datetime")for(var l=0;l<a.length;l++)a[l][0]=a[l][0].getTime();else t.xtype==="number"&&a.sort(Pf);r[o].marker={symbol:"circle"},t.options.points===!1&&(r[o].marker.enabled=!1)}this.drawChart(t,r,i)};Ts.prototype.renderScatterChart=function(t){var e=Lf(t,t.options,{});e.chart.type="scatter",this.drawChart(t,t.data,e)};Ts.prototype.renderPieChart=function(t){var e=ee(uw,{});t.options.colors&&(e.colors=t.options.colors),t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}}),"legend"in t.options&&hw(e,t.options.legend),t.options.title&&dw(e,t.options.title);var s=ee(e,t.options.library||{});Vf(t,s,"pie");var i=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,i,s)};Ts.prototype.renderColumnChart=function(t,e){e=e||"column";var s=t.data,i=Lf(t,t.options),r=[],o=[];i.chart.type=e,Vf(t,i,e);for(var a=0;a<s.length;a++)for(var l=s[a],c=0;c<l.data.length;c++){var h=l.data[c];r[h[0]]||(r[h[0]]=new Array(s.length),o.push(h[0])),r[h[0]][a]=h[1]}t.xtype==="number"&&o.sort(sw),i.xAxis.categories=o;for(var d=[],f=0;f<s.length;f++){for(var g=[],_=0;_<o.length;_++)g.push(r[o[_]][f]||0);var b={name:s[f].name||"Value",data:g};s[f].stack&&(b.stack=s[f].stack),d.push(b)}this.drawChart(t,d,i)};Ts.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")};Ts.prototype.renderAreaChart=function(t){this.renderLineChart(t,"areaspline")};Ts.prototype.destroy=function(t){t.chart&&t.chart.destroy()};Ts.prototype.drawChart=function(t,e,s){this.destroy(t),!t.destroyed&&(s.chart.renderTo=t.element.id,s.series=e,t.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(s)+");"),t.chart=new this.library.Chart(s))};var r_={},Dl=[],Aa={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};function Nf(n,t,e){if(t!==void 0){var s;t?t===!0?s="right":s=t:s="none",n.legend.position=s}else e&&(n.legend.position="none")}function Ff(n,t){n.title=t,n.titleTextStyle={color:"#333",fontSize:"20px"}}function VM(n,t){n.vAxis.viewWindow.min=t}function NM(n,t){n.vAxis.viewWindow.max=t}function FM(n,t){n.hAxis.viewWindow.min=t}function BM(n,t){n.hAxis.viewWindow.max=t}function fw(n,t){n.isStacked=t||!1}function pw(n,t){n.hAxis.title=t,n.hAxis.titleTextStyle.italic=!1}function gw(n,t){n.vAxis.title=t,n.vAxis.titleTextStyle.italic=!1}var au=Sa(Aa,Nf,Ff,VM,NM,fw,pw,gw);function UM(n){window.attachEvent?window.attachEvent("onresize",n):window.addEventListener&&window.addEventListener("resize",n,!0),n()}var Ze=function(t){this.name="google",this.library=t};Ze.prototype.renderLineChart=function(t){var e=this;this.waitForLoaded(t,function(){var s={};t.options.curve===!1&&(s.curveType="none"),t.options.points===!1&&(s.pointSize=0);var i=au(t,t.options,s),r=e.createDataTable(t.data,t.xtype);e.drawChart(t,"LineChart",r,i)})};Ze.prototype.renderPieChart=function(t){var e=this;this.waitForLoaded(t,function(){var s={chartArea:{top:"10%",height:"80%"},legend:{}};t.options.colors&&(s.colors=t.options.colors),t.options.donut&&(s.pieHole=.5),"legend"in t.options&&Nf(s,t.options.legend),t.options.title&&Ff(s,t.options.title);var i=ee(ee(Aa,s),t.options.library||{}),r=new e.library.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(t.data),e.drawChart(t,"PieChart",r,i)})};Ze.prototype.renderColumnChart=function(t){var e=this;this.waitForLoaded(t,function(){var s=au(t,t.options),i=e.createDataTable(t.data,t.xtype);e.drawChart(t,"ColumnChart",i,s)})};Ze.prototype.renderBarChart=function(t){var e=this;this.waitForLoaded(t,function(){var s={hAxis:{gridlines:{color:"#ccc"}}},i=Sa(Aa,Nf,Ff,FM,BM,fw,pw,gw)(t,t.options,s),r=e.createDataTable(t.data,t.xtype);e.drawChart(t,"BarChart",r,i)})};Ze.prototype.renderAreaChart=function(t){var e=this;this.waitForLoaded(t,function(){var s={isStacked:!0,pointSize:0,areaOpacity:.5},i=au(t,t.options,s),r=e.createDataTable(t.data,t.xtype);e.drawChart(t,"AreaChart",r,i)})};Ze.prototype.renderGeoChart=function(t){var e=this;this.waitForLoaded(t,"geochart",function(){var s={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},i=ee(ee(Aa,s),t.options.library||{}),r=new e.library.visualization.DataTable;r.addColumn("string",""),r.addColumn("number",t.options.label||"Value"),r.addRows(t.data),e.drawChart(t,"GeoChart",r,i)})};Ze.prototype.renderScatterChart=function(t){var e=this;this.waitForLoaded(t,function(){for(var s={},i=au(t,t.options,s),r=t.data,o=[],a=0;a<r.length;a++){r[a].name=r[a].name||"Value";for(var l=r[a].data,c=0;c<l.length;c++){var h=new Array(r.length+1);h[0]=l[c][0],h[a+1]=l[c][1],o.push(h)}}var d=new e.library.visualization.DataTable;d.addColumn("number","");for(var f=0;f<r.length;f++)d.addColumn("number",r[f].name);d.addRows(o),e.drawChart(t,"ScatterChart",d,i)})};Ze.prototype.renderTimeline=function(t){var e=this;this.waitForLoaded(t,"timeline",function(){var s={legend:"none"};t.options.colors&&(s.colors=t.options.colors);var i=ee(ee(Aa,s),t.options.library||{}),r=new e.library.visualization.DataTable;r.addColumn({type:"string",id:"Name"}),r.addColumn({type:"date",id:"Start"}),r.addColumn({type:"date",id:"End"}),r.addRows(t.data),t.element.style.lineHeight="normal",e.drawChart(t,"Timeline",r,i)})};Ze.prototype.destroy=function(t){t.chart&&t.chart.clearChart()};Ze.prototype.drawChart=function(t,e,s,i){this.destroy(t),!t.destroyed&&(t.options.code&&window.console.log("var data = new google.visualization.DataTable("+s.toJSON()+`);
var chart = new google.visualization.`+e+`(element);
chart.draw(data, `+JSON.stringify(i)+");"),t.chart=new this.library.visualization[e](t.element),UM(function(){t.chart.draw(s,i)}))};Ze.prototype.waitForLoaded=function(t,e,s){var i=this;if(s||(s=e,e="corechart"),Dl.push({pack:e,callback:s}),r_[e])this.runCallbacks();else{r_[e]=!0;var r={packages:[e],callback:function(){i.runCallbacks()}},o=t.__config();o.language&&(r.language=o.language),e==="geochart"&&o.mapsApiKey&&(r.mapsApiKey=o.mapsApiKey),this.library.charts.load("current",r)}};Ze.prototype.runCallbacks=function(){for(var t=0;t<Dl.length;t++){var e=Dl[t],s=this.library.visualization&&(e.pack==="corechart"&&this.library.visualization.LineChart||e.pack==="timeline"&&this.library.visualization.Timeline||e.pack==="geochart"&&this.library.visualization.GeoChart);s&&(e.callback(),Dl.splice(t,1),t--)}};Ze.prototype.createDataTable=function(t,e){for(var s=[],i=[],r=0;r<t.length;r++){var o=t[r];t[r].name=t[r].name||"Value";for(var a=0;a<o.data.length;a++){var l=o.data[a],c=e==="datetime"?l[0].getTime():l[0];s[c]||(s[c]=new Array(t.length),i.push(c)),s[c][r]=l[1]}}for(var h=[],d=[],f=0;f<i.length;f++){var g=i[f],_=void 0;e==="datetime"?(_=new Date(g),d.push(_)):_=g,h.push([_].concat(s[g]))}var b=!0;if(e==="datetime"){h.sort(mM);var v=iw(d,!0);b=_M(v)}else if(e==="number"){h.sort(Pf);for(var A=0;A<h.length;A++)h[A][0]=vs(h[A][0]);e="string"}var C=new this.library.visualization.DataTable;e=e==="datetime"&&b?"date":e,C.addColumn(e,"");for(var M=0;M<t.length;M++)C.addColumn("number",t[M].name);return C.addRows(h),C};var Di=[];function $M(n){if(n){if(n.product==="Highcharts")return Ts;if(n.charts)return Ze;if(Af(n))return Yn}throw new Error("Unknown adapter")}function Vo(n){for(var t=$M(n),e=0;e<Di.length;e++)if(Di[e].library===n)return;Di.push(new t(n))}function zM(){"Chart"in window&&Vo(window.Chart),"Highcharts"in window&&Vo(window.Highcharts),window.google&&window.google.charts&&Vo(window.google)}function jM(n,t){var e="render"+n,s=t.options.adapter;zM();for(var i=0;i<Di.length;i++){var r=Di[i];if((!s||s===r.name)&&Af(r[e]))return t.adapter=r.name,t.__adapterObject=r,r[e](t)}throw Di.length>0?new Error("No charting library found for "+n):new Error("No charting libraries found - be sure to include one before your charts")}var Et={charts:{},configure:function(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(Et.config[t]=n[t])},setDefaultOptions:function(n){Et.options=n},eachChart:function(n){for(var t in Et.charts)Object.prototype.hasOwnProperty.call(Et.charts,t)&&n(Et.charts[t])},destroyAll:function(){for(var n in Et.charts)Object.prototype.hasOwnProperty.call(Et.charts,n)&&(Et.charts[n].destroy(),delete Et.charts[n])},config:{},options:{},adapters:Di,addAdapter:Vo,use:function(n){return Vo(n),Et}};function HM(n){for(var t=[],e=0;e<n.length;e++)t.push([zn(n[e][0]),zn(n[e][1]),zn(n[e][2])]);return t}function WM(n,t){if(t==="bubble")return HM(n);var e;t==="number"?e=zn:t==="datetime"?e=Mn:e=vs;for(var s=[],i=0;i<n.length;i++)s.push([e(n[i][0]),zn(n[i][1])]);return s}function qM(n,t,e){return _w(n)?(e.xmin||e.xmax)&&(!e.xmin||Ju(e.xmin))&&(!e.xmax||Ju(e.xmax))?"datetime":"number":o_(n,yM)?"number":!t&&o_(n,Ju)?"datetime":"string"}function o_(n,t){for(var e=0;e<n.length;e++)for(var s=Cf(n[e].data),i=0;i<s.length;i++)if(!t(s[i][0]))return!1;return!0}function GM(n){for(var t=[],e=0;e<n.length;e++){var s={};for(var i in n[e])Object.prototype.hasOwnProperty.call(n[e],i)&&(s[i]=n[e][i]);t.push(s)}return t}function Ur(n,t,e){var s=n.options,i=n.rawData;n.singleSeriesFormat=!Xs(i)||!kl(i[0]),n.singleSeriesFormat&&(i=[{name:s.label,data:i}]),i=GM(i);for(var r=0;r<i.length;r++)i[r].data=Cf(i[r].data);n.xtype=t||(s.discrete?"string":qM(i,e,s));for(var o=0;o<i.length;o++)i[o].data=WM(i[o].data,n.xtype);return i}function mw(n){for(var t=Cf(n.rawData),e=0;e<t.length;e++)t[e]=[vs(t[e][0]),zn(t[e][1])];return t}function _w(n,t){if(t==="PieChart"||t==="GeoChart"||t==="Timeline")return n.length===0;for(var e=0;e<n.length;e++)if(n[e].data.length>0)return!1;return!0}function KM(n){var t=n.options.download;t===!0?t={}:typeof t=="string"&&(t={filename:t});var e=document.createElement("a");e.download=t.filename||"chart.png",e.style.position="absolute",e.style.top="20px",e.style.right="20px",e.style.zIndex=1e3,e.style.lineHeight="20px",e.target="_blank";var s=document.createElement("img"),i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';s.src="data:image/svg+xml;utf8,"+encodeURIComponent(i),s.alt="Download",s.style.width="20px",s.style.height="20px",s.style.border="none",e.appendChild(s);var r=n.element;r.style.position="relative",n.__downloadAttached=!0,n.__enterEvent=r.addEventListener("mouseover",function(o){var a=o.relatedTarget;(!a||a!==this&&!this.contains(a))&&n.options.download&&(e.href=n.toImage(t),r.appendChild(e))}),n.__leaveEvent=r.addEventListener("mouseout",function(o){var a=o.relatedTarget;(!a||a!==this&&!this.contains(a))&&e.parentNode&&e.parentNode.removeChild(e)})}var yw=[],td=0,YM=4;function XM(n,t,e){yw.push([n,t,e]),Bf()}function Bf(){if(td<YM){var n=yw.shift();n&&(td++,JM(n[0],n[1],n[2]),Bf())}}function QM(){td--,Bf()}function JM(n,t,e){var s=new XMLHttpRequest;s.open("GET",n,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){QM(),s.status===200?t(JSON.parse(s.responseText)):e(s.statusText)},s.send()}function Uf(n,t){n.textContent=t}function Ml(n,t,e){e||(t="Error Loading Chart: "+t),Uf(n,t),n.style.color="#ff0000"}function Zu(n){try{n.__render()}catch(t){throw Ml(n.element,t.message),t}}function na(n,t,e){if(e&&n.options.loading&&(typeof t=="string"||typeof t=="function")&&Uf(n.element,n.options.loading),typeof t=="string")XM(t,function(s){n.rawData=s,Zu(n)},function(s){Ml(n.element,s)});else if(typeof t=="function")try{t(function(s){n.rawData=s,Zu(n)},function(s){Ml(n.element,s,!0)})}catch(s){Ml(n.element,s,!0)}else n.rawData=t,Zu(n)}function ZM(n,t){if(_w(t.data,n)){var e=t.options.empty||t.options.messages&&t.options.messages.empty||"No data";Uf(t.element,e)}else jM(n,t),t.options.download&&!t.__downloadAttached&&t.adapter==="chartjs"&&KM(t)}function t2(n){if(typeof n=="string"){var t=n;if(n=document.getElementById(n),!n)throw new Error("No element with id "+t)}return n}var Xt=function(t,e,s){this.element=t2(t),this.options=ee(Et.options,s||{}),this.dataSource=e,this.element.id&&(Et.charts[this.element.id]=this),na(this,e,!0),this.options.refresh&&this.startRefresh()};Xt.prototype.getElement=function(){return this.element};Xt.prototype.getDataSource=function(){return this.dataSource};Xt.prototype.getData=function(){return this.data};Xt.prototype.getOptions=function(){return this.options};Xt.prototype.getChartObject=function(){return this.chart};Xt.prototype.getAdapter=function(){return this.adapter};Xt.prototype.updateData=function(t,e){this.dataSource=t,e&&this.__updateOptions(e),na(this,t,!0)};Xt.prototype.setOptions=function(t){this.__updateOptions(t),this.redraw()};Xt.prototype.redraw=function(){na(this,this.rawData)};Xt.prototype.refreshData=function(){if(typeof this.dataSource=="string"){var t=this.dataSource.indexOf("?")===-1?"?":"&",e=this.dataSource+t+"_="+new Date().getTime();na(this,e)}else typeof this.dataSource=="function"&&na(this,this.dataSource)};Xt.prototype.startRefresh=function(){var t=this,e=this.options.refresh;if(e&&typeof this.dataSource!="string"&&typeof this.dataSource!="function")throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId)if(e)this.intervalId=setInterval(function(){t.refreshData()},e*1e3);else throw new Error("No refresh interval")};Xt.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};Xt.prototype.toImage=function(t){if(this.adapter==="chartjs")if(t&&t.background&&t.background!=="transparent"){var e=this.chart.canvas,s=this.chart.ctx,i=document.createElement("canvas"),r=i.getContext("2d");return i.width=s.canvas.width,i.height=s.canvas.height,r.fillStyle=t.background,r.fillRect(0,0,i.width,i.height),r.drawImage(e,0,0),i.toDataURL("image/png")}else return this.chart.toBase64Image();else throw new Error("Feature only available for Chart.js")};Xt.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent),this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)};Xt.prototype.__updateOptions=function(t){var e=t.refresh&&t.refresh!==this.options.refresh;this.options=ee(Et.options,t),e&&(this.stopRefresh(),this.startRefresh())};Xt.prototype.__render=function(){this.data=this.__processData(),ZM(this.__chartName(),this)};Xt.prototype.__config=function(){return Et.config};var e2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return Ur(this)},t.prototype.__chartName=function(){return"LineChart"},t}(Xt),n2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return mw(this)},t.prototype.__chartName=function(){return"PieChart"},t}(Xt),s2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return Ur(this,null,!0)},t.prototype.__chartName=function(){return"ColumnChart"},t}(Xt),i2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return Ur(this,null,!0)},t.prototype.__chartName=function(){return"BarChart"},t}(Xt),r2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return Ur(this)},t.prototype.__chartName=function(){return"AreaChart"},t}(Xt),o2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return mw(this)},t.prototype.__chartName=function(){return"GeoChart"},t}(Xt),a2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return Ur(this,"number")},t.prototype.__chartName=function(){return"ScatterChart"},t}(Xt),l2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){return Ur(this,"bubble")},t.prototype.__chartName=function(){return"BubbleChart"},t}(Xt),c2=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__processData=function(){for(var s=this.rawData,i=0;i<s.length;i++)s[i][1]=Mn(s[i][1]),s[i][2]=Mn(s[i][2]);return s},t.prototype.__chartName=function(){return"Timeline"},t}(Xt);Et.LineChart=e2;Et.PieChart=n2;Et.ColumnChart=s2;Et.BarChart=i2;Et.AreaChart=r2;Et.GeoChart=o2;Et.ScatterChart=a2;Et.BubbleChart=l2;Et.Timeline=c2;typeof window<"u"&&!window.Chartkick&&(window.Chartkick=Et,document.addEventListener("turbolinks:before-render",function(){Et.config.autoDestroy!==!1&&Et.destroyAll()}),document.addEventListener("turbo:before-render",function(){Et.config.autoDestroy!==!1&&Et.destroyAll()}),setTimeout(function(){window.dispatchEvent(new Event("chartkick:load"))},0));Et.default=Et;/*!
 * Vue Chartkick
 * Create beautiful JavaScript charts with one line of Vue
 * https://github.com/ankane/vue-chartkick
 * v1.1.0
 * MIT License
 */var u2=1,ks=function(n,t,e){var s=["adapter","bytes","code","colors","curve","dataset","decimal","discrete","donut","download","empty","label","legend","library","loading","max","messages","min","points","precision","prefix","refresh","round","stacked","suffix","thousands","title","xmax","xmin","xtitle","ytitle","zeros"];n.component(t,{props:["data","id","width","height"].concat(s),render:function(){var i=this.chartOptions.loading!==void 0?this.chartOptions.loading:"Loading...";if(typeof i!="string")throw new Error("loading must be a string");return BE("div",{id:this.chartId,style:this.chartStyle},[i])},data:function(){return{chartId:null}},computed:{chartStyle:function(){return this.data,this.chartOptions,{height:this.height||"300px",lineHeight:this.height||"300px",width:this.width||"100%",textAlign:"center",color:"#999",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif"}},chartOptions:function(){for(var i={},r=s,o=0;o<r.length;o++){var a=r[o];this[a]!==void 0&&(i[a]=this[a])}return i}},created:function(){this.chartId=this.chartId||this.id||"chart-"+u2++},mounted:function(){this.updateChart()},updated:function(){this.updateChart()},beforeUnmount:function(){this.chart&&this.chart.destroy()},methods:{updateChart:function(){this.data!==null?this.chart?this.chart.updateData(this.data,this.chartOptions):this.chart=new e(this.chartId,this.data,this.chartOptions):this.chart&&(this.chart.destroy(),this.chart=null,this.$el.innerText="Loading...")}}})};Et.install=function(n,t){t&&t.adapter&&Et.addAdapter(t.adapter),ks(n,"line-chart",Et.LineChart),ks(n,"pie-chart",Et.PieChart),ks(n,"column-chart",Et.ColumnChart),ks(n,"bar-chart",Et.BarChart),ks(n,"area-chart",Et.AreaChart),ks(n,"scatter-chart",Et.ScatterChart),ks(n,"geo-chart",Et.GeoChart),ks(n,"timeline",Et.Timeline)};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ca(n){return n+.5|0}const Bs=(n,t,e)=>Math.max(Math.min(n,e),t);function _o(n){return Bs(Ca(n*2.55),0,255)}function Qs(n){return Bs(Ca(n*255),0,255)}function is(n){return Bs(Ca(n/2.55)/100,0,1)}function a_(n){return Bs(Ca(n*100),0,100)}const hn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ed=[..."0123456789ABCDEF"],h2=n=>ed[n&15],d2=n=>ed[(n&240)>>4]+ed[n&15],sl=n=>(n&240)>>4===(n&15),f2=n=>sl(n.r)&&sl(n.g)&&sl(n.b)&&sl(n.a);function p2(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&hn[n[1]]*17,g:255&hn[n[2]]*17,b:255&hn[n[3]]*17,a:t===5?hn[n[4]]*17:255}:(t===7||t===9)&&(e={r:hn[n[1]]<<4|hn[n[2]],g:hn[n[3]]<<4|hn[n[4]],b:hn[n[5]]<<4|hn[n[6]],a:t===9?hn[n[7]]<<4|hn[n[8]]:255})),e}const g2=(n,t)=>n<255?t(n):"";function m2(n){var t=f2(n)?h2:d2;return n?"#"+t(n.r)+t(n.g)+t(n.b)+g2(n.a,t):void 0}const _2=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bw(n,t,e){const s=t*Math.min(e,1-e),i=(r,o=(r+n/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function y2(n,t,e){const s=(i,r=(i+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function b2(n,t,e){const s=bw(n,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)s[i]*=1-t-e,s[i]+=t;return s}function v2(n,t,e,s,i){return n===i?(t-e)/s+(t<e?6:0):t===i?(e-n)/s+2:(n-t)/s+4}function $f(n){const e=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(e,s,i),o=Math.min(e,s,i),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=v2(e,s,i,h,r),l=l*60+.5),[l|0,c||0,a]}function zf(n,t,e,s){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,s)).map(Qs)}function jf(n,t,e){return zf(bw,n,t,e)}function w2(n,t,e){return zf(b2,n,t,e)}function x2(n,t,e){return zf(y2,n,t,e)}function vw(n){return(n%360+360)%360}function T2(n){const t=_2.exec(n);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?_o(+t[5]):Qs(+t[5]));const i=vw(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=w2(i,r,o):t[1]==="hsv"?s=x2(i,r,o):s=jf(i,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function E2(n,t){var e=$f(n);e[0]=vw(e[0]+t),e=jf(e),n.r=e[0],n.g=e[1],n.b=e[2]}function I2(n){if(!n)return;const t=$f(n),e=t[0],s=a_(t[1]),i=a_(t[2]);return n.a<255?`hsla(${e}, ${s}%, ${i}%, ${is(n.a)})`:`hsl(${e}, ${s}%, ${i}%)`}const l_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},c_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function S2(){const n={},t=Object.keys(c_),e=Object.keys(l_);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<e.length;i++)r=e[i],a=a.replace(r,l_[r]);r=parseInt(c_[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let il;function A2(n){il||(il=S2(),il.transparent=[0,0,0,0]);const t=il[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const C2=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function P2(n){const t=C2.exec(n);let e=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];e=t[8]?_o(o):Bs(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?_o(s):Bs(s,0,255)),i=255&(t[4]?_o(i):Bs(i,0,255)),r=255&(t[6]?_o(r):Bs(r,0,255)),{r:s,g:i,b:r,a:e}}}function R2(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${is(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const th=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,er=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function k2(n,t,e){const s=er(is(n.r)),i=er(is(n.g)),r=er(is(n.b));return{r:Qs(th(s+e*(er(is(t.r))-s))),g:Qs(th(i+e*(er(is(t.g))-i))),b:Qs(th(r+e*(er(is(t.b))-r))),a:n.a+e*(t.a-n.a)}}function rl(n,t,e){if(n){let s=$f(n);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=jf(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function ww(n,t){return n&&Object.assign(t||{},n)}function u_(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Qs(n[3]))):(t=ww(n,{r:0,g:0,b:0,a:1}),t.a=Qs(t.a)),t}function D2(n){return n.charAt(0)==="r"?P2(n):T2(n)}class sa{constructor(t){if(t instanceof sa)return t;const e=typeof t;let s;e==="object"?s=u_(t):e==="string"&&(s=p2(t)||A2(t)||D2(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=ww(this._rgb);return t&&(t.a=is(t.a)),t}set rgb(t){this._rgb=u_(t)}rgbString(){return this._valid?R2(this._rgb):void 0}hexString(){return this._valid?m2(this._rgb):void 0}hslString(){return this._valid?I2(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=k2(this._rgb,t._rgb,e)),this}clone(){return new sa(this.rgb)}alpha(t){return this._rgb.a=Qs(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ca(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return rl(this._rgb,2,t),this}darken(t){return rl(this._rgb,2,-t),this}saturate(t){return rl(this._rgb,1,t),this}desaturate(t){return rl(this._rgb,1,-t),this}rotate(t){return E2(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ts(){}const M2=(()=>{let n=0;return()=>n++})();function Ct(n){return n==null}function Zt(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Dt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function re(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function nn(n,t){return re(n)?n:t}function wt(n,t){return typeof n>"u"?t:n}const O2=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,xw=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Kt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function zt(n,t,e,s){let i,r,o;if(Zt(n))for(r=n.length,i=0;i<r;i++)t.call(e,n[i],i);else if(Dt(n))for(o=Object.keys(n),r=o.length,i=0;i<r;i++)t.call(e,n[o[i]],o[i])}function dc(n,t){let e,s,i,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,s=n.length;e<s;++e)if(i=n[e],r=t[e],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function fc(n){if(Zt(n))return n.map(fc);if(Dt(n)){const t=Object.create(null),e=Object.keys(n),s=e.length;let i=0;for(;i<s;++i)t[e[i]]=fc(n[e[i]]);return t}return n}function Tw(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function L2(n,t,e,s){if(!Tw(n))return;const i=t[n],r=e[n];Dt(i)&&Dt(r)?ia(i,r,s):t[n]=fc(r)}function ia(n,t,e){const s=Zt(t)?t:[t],i=s.length;if(!Dt(n))return n;e=e||{};const r=e.merger||L2;let o;for(let a=0;a<i;++a){if(o=s[a],!Dt(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],n,o,e)}return n}function No(n,t){return ia(n,t,{merger:V2})}function V2(n,t,e){if(!Tw(n))return;const s=t[n],i=e[n];Dt(s)&&Dt(i)?No(s,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=fc(i))}const h_={"":n=>n,x:n=>n.x,y:n=>n.y};function N2(n){const t=n.split("."),e=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function F2(n){const t=N2(n);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function oi(n,t){return(h_[t]||(h_[t]=F2(t)))(n)}function Hf(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ra=n=>typeof n<"u",ai=n=>typeof n=="function",d_=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function B2(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Vt=Math.PI,Jt=2*Vt,U2=Jt+Vt,pc=Number.POSITIVE_INFINITY,$2=Vt/180,le=Vt/2,bi=Vt/4,f_=Vt*2/3,Us=Math.log10,jn=Math.sign;function Fo(n,t,e){return Math.abs(n-t)<e}function p_(n){const t=Math.round(n);n=Fo(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Us(n))),s=n/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function z2(n){const t=[],e=Math.sqrt(n);let s;for(s=1;s<e;s++)n%s===0&&(t.push(s),t.push(n/s));return e===(e|0)&&t.push(e),t.sort((i,r)=>i-r).pop(),t}function j2(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Ar(n){return!j2(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function H2(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Ew(n,t,e){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function xn(n){return n*(Vt/180)}function Wf(n){return n*(180/Vt)}function g_(n){if(!re(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Iw(n,t){const e=t.x-n.x,s=t.y-n.y,i=Math.sqrt(e*e+s*s);let r=Math.atan2(s,e);return r<-.5*Vt&&(r+=Jt),{angle:r,distance:i}}function nd(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function W2(n,t){return(n-t+U2)%Jt-Vt}function Oe(n){return(n%Jt+Jt)%Jt}function oa(n,t,e,s){const i=Oe(n),r=Oe(t),o=Oe(e),a=Oe(r-i),l=Oe(o-i),c=Oe(i-r),h=Oe(i-o);return i===r||i===o||s&&r===o||a>l&&c<h}function _e(n,t,e){return Math.max(t,Math.min(e,n))}function q2(n){return _e(n,-32768,32767)}function cs(n,t,e,s=1e-6){return n>=Math.min(t,e)-s&&n<=Math.max(t,e)+s}function qf(n,t,e){e=e||(o=>n[o]<t);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,e(r)?i=r:s=r;return{lo:i,hi:s}}const us=(n,t,e,s)=>qf(n,e,s?i=>{const r=n[i][t];return r<e||r===e&&n[i+1][t]===e}:i=>n[i][t]<e),G2=(n,t,e)=>qf(n,e,s=>n[s][t]>=e);function K2(n,t,e){let s=0,i=n.length;for(;s<i&&n[s]<t;)s++;for(;i>s&&n[i-1]>e;)i--;return s>0||i<n.length?n.slice(s,i):n}const Sw=["push","pop","shift","splice","unshift"];function Y2(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Sw.forEach(e=>{const s="_onData"+Hf(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function m_(n,t){const e=n._chartjs;if(!e)return;const s=e.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(Sw.forEach(r=>{delete n[r]}),delete n._chartjs)}function Aw(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Cw=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Pw(n,t){let e=[],s=!1;return function(...i){e=i,s||(s=!0,Cw.call(window,()=>{s=!1,n.apply(t,e)}))}}function X2(n,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(n,t,s)):n.apply(this,s),t}}const Gf=n=>n==="start"?"left":n==="end"?"right":"center",De=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Q2=(n,t,e,s)=>n===(s?"left":"right")?e:n==="center"?(t+e)/2:t;function Rw(n,t,e){const s=t.length;let i=0,r=s;if(n._sorted){const{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:g,maxDefined:_}=o.getUserBounds();if(g){if(i=Math.min(us(l,h,d).lo,e?s:us(t,h,o.getPixelForValue(d)).lo),c){const b=l.slice(0,i+1).reverse().findIndex(v=>!Ct(v[a.axis]));i-=Math.max(0,b)}i=_e(i,0,s-1)}if(_){let b=Math.max(us(l,o.axis,f,!0).hi+1,e?0:us(t,h,o.getPixelForValue(f),!0).hi+1);if(c){const v=l.slice(b-1).findIndex(A=>!Ct(A[a.axis]));b+=Math.max(0,v)}r=_e(b,i,s)-i}else r=s-i}return{start:i,count:r}}function kw(n){const{xScale:t,yScale:e,_scaleRanges:s}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,i),r}const ol=n=>n===0||n===1,__=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Jt/e)),y_=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Jt/e)+1,Bo={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*le)+1,easeOutSine:n=>Math.sin(n*le),easeInOutSine:n=>-.5*(Math.cos(Vt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ol(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ol(n)?n:__(n,.075,.3),easeOutElastic:n=>ol(n)?n:y_(n,.075,.3),easeInOutElastic(n){return ol(n)?n:n<.5?.5*__(n*2,.1125,.45):.5+.5*y_(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Bo.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Bo.easeInBounce(n*2)*.5:Bo.easeOutBounce(n*2-1)*.5+.5};function Kf(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function b_(n){return Kf(n)?n:new sa(n)}function eh(n){return Kf(n)?n:new sa(n).saturate(.5).darken(.1).hexString()}const J2=["x","y","borderWidth","radius","tension"],Z2=["color","borderColor","backgroundColor"];function tO(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Z2},numbers:{type:"number",properties:J2}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function eO(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const v_=new Map;function nO(n,t){t=t||{};const e=n+JSON.stringify(t);let s=v_.get(e);return s||(s=new Intl.NumberFormat(n,t),v_.set(e,s)),s}function Pa(n,t,e){return nO(t,e).format(n)}const Dw={values(n){return Zt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=sO(n,e)}const o=Us(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Pa(n,s,l)},logarithmic(n,t,e){if(n===0)return"0";const s=e[t].significand||n/Math.pow(10,Math.floor(Us(n)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?Dw.numeric.call(this,n,t,e):""}};function sO(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var lu={formatters:Dw};function iO(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const $i=Object.create(null),sd=Object.create(null);function Uo(n,t){if(!t)return n;const e=t.split(".");for(let s=0,i=e.length;s<i;++s){const r=e[s];n=n[r]||(n[r]=Object.create(null))}return n}function nh(n,t,e){return typeof t=="string"?ia(Uo(n,t),e):ia(Uo(n,""),t)}class rO{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>eh(i.backgroundColor),this.hoverBorderColor=(s,i)=>eh(i.borderColor),this.hoverColor=(s,i)=>eh(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return nh(this,t,e)}get(t){return Uo(this,t)}describe(t,e){return nh(sd,t,e)}override(t,e){return nh($i,t,e)}route(t,e,s,i){const r=Uo(this,t),o=Uo(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[i];return Dt(l)?Object.assign({},c,l):wt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var te=new rO({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[tO,eO,iO]);function oO(n){return!n||Ct(n.size)||Ct(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function gc(n,t,e,s,i){let r=t[i];return r||(r=t[i]=n.measureText(i).width,e.push(i)),r>s&&(s=r),s}function aO(n,t,e,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,h,d,f;for(l=0;l<a;l++)if(d=e[l],d!=null&&!Zt(d))o=gc(n,i,r,o,d);else if(Zt(d))for(c=0,h=d.length;c<h;c++)f=d[c],f!=null&&!Zt(f)&&(o=gc(n,i,r,o,f));n.restore();const g=r.length/2;if(g>e.length){for(l=0;l<g;l++)delete i[r[l]];r.splice(0,g)}return o}function vi(n,t,e){const s=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*s)/s+i}function w_(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function id(n,t,e,s){Mw(n,t,e,s,null)}function Mw(n,t,e,s,i){let r,o,a,l,c,h,d,f;const g=t.pointStyle,_=t.rotation,b=t.radius;let v=(_||0)*$2;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,s),n.rotate(v),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),g){default:i?n.ellipse(e,s,i/2,b,0,0,Jt):n.arc(e,s,b,0,Jt),n.closePath();break;case"triangle":h=i?i/2:b,n.moveTo(e+Math.sin(v)*h,s-Math.cos(v)*b),v+=f_,n.lineTo(e+Math.sin(v)*h,s-Math.cos(v)*b),v+=f_,n.lineTo(e+Math.sin(v)*h,s-Math.cos(v)*b),n.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(v+bi)*l,d=Math.cos(v+bi)*(i?i/2-c:l),a=Math.sin(v+bi)*l,f=Math.sin(v+bi)*(i?i/2-c:l),n.arc(e-d,s-a,c,v-Vt,v-le),n.arc(e+f,s-o,c,v-le,v),n.arc(e+d,s+a,c,v,v+le),n.arc(e-f,s+o,c,v+le,v+Vt),n.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*b,h=i?i/2:l,n.rect(e-h,s-l,2*h,2*l);break}v+=bi;case"rectRot":d=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+f,s-o),n.lineTo(e+d,s+a),n.lineTo(e-f,s+o),n.closePath();break;case"crossRot":v+=bi;case"cross":d=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+f,s-o),n.lineTo(e-f,s+o);break;case"star":d=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+f,s-o),n.lineTo(e-f,s+o),v+=bi,d=Math.cos(v)*(i?i/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,f=Math.sin(v)*(i?i/2:b),n.moveTo(e-d,s-a),n.lineTo(e+d,s+a),n.moveTo(e+f,s-o),n.lineTo(e-f,s+o);break;case"line":o=i?i/2:Math.cos(v)*b,a=Math.sin(v)*b,n.moveTo(e-o,s-a),n.lineTo(e+o,s+a);break;case"dash":n.moveTo(e,s),n.lineTo(e+Math.cos(v)*(i?i/2:b),s+Math.sin(v)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function hs(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function cu(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function uu(n){n.restore()}function lO(n,t,e,s,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else i==="after"!=!!s?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function cO(n,t,e,s){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function uO(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ct(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function hO(n,t,e,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function dO(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function zi(n,t,e,s,i,r={}){const o=Zt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=i.string,uO(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&dO(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Ct(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,e,s,r.maxWidth)),n.fillText(c,e,s,r.maxWidth),hO(n,e,s,c,r),s+=Number(i.lineHeight);n.restore()}function aa(n,t){const{x:e,y:s,w:i,h:r,radius:o}=t;n.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*Vt,Vt,!0),n.lineTo(e,s+r-o.bottomLeft),n.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Vt,le,!0),n.lineTo(e+i-o.bottomRight,s+r),n.arc(e+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,le,0,!0),n.lineTo(e+i,s+o.topRight),n.arc(e+i-o.topRight,s+o.topRight,o.topRight,0,-le,!0),n.lineTo(e+o.topLeft,s)}const fO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gO(n,t){const e=(""+n).match(fO);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const mO=n=>+n||0;function Yf(n,t){const e={},s=Dt(t),i=s?Object.keys(t):t,r=Dt(n)?s?o=>wt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of i)e[o]=mO(r(o));return e}function Ow(n){return Yf(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Mi(n){return Yf(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ze(n){const t=Ow(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function pe(n,t){n=n||{},t=t||te.font;let e=wt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=wt(n.style,t.style);s&&!(""+s).match(pO)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:wt(n.family,t.family),lineHeight:gO(wt(n.lineHeight,t.lineHeight),e),size:e,style:s,weight:wt(n.weight,t.weight),string:""};return i.string=oO(i),i}function yo(n,t,e,s){let i,r,o;for(i=0,r=n.length;i<r;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function _O(n,t,e){const{min:s,max:i}=n,r=xw(t,(i-s)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function hi(n,t){return Object.assign(Object.create(n),t)}function Xf(n,t=[""],e,s,i=()=>n[0]){const r=e||n;typeof s>"u"&&(s=Fw("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Xf([a,...n],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Vw(a,l,()=>IO(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return T_(a).includes(l)},ownKeys(a){return T_(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Cr(n,t,e,s){const i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Lw(n,s),setContext:r=>Cr(n,r,e,s),override:r=>Cr(n.override(r),t,e,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return Vw(r,o,()=>bO(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function Lw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:s,isScriptable:ai(e)?e:()=>e,isIndexable:ai(s)?s:()=>s}}const yO=(n,t)=>n?n+Hf(t):t,Qf=(n,t)=>Dt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Vw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const s=e();return n[t]=s,s}function bO(n,t,e){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=n;let a=s[t];return ai(a)&&o.isScriptable(t)&&(a=vO(t,a,n,e)),Zt(a)&&a.length&&(a=wO(t,a,n,o.isIndexable)),Qf(t,a)&&(a=Cr(a,i,r&&r[t],o)),a}function vO(n,t,e,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(r,o||s);return a.delete(n),Qf(n,l)&&(l=Jf(i._scopes,i,n,l)),l}function wO(n,t,e,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&s(n))return t[r.index%t.length];if(Dt(t[0])){const l=t,c=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=Jf(c,i,n,h);t.push(Cr(d,r,o&&o[n],a))}}return t}function Nw(n,t,e){return ai(n)?n(t,e):n}const xO=(n,t)=>n===!0?t:typeof n=="string"?oi(t,n):void 0;function TO(n,t,e,s,i){for(const r of t){const o=xO(e,r);if(o){n.add(o);const a=Nw(o._fallback,e,i);if(typeof a<"u"&&a!==e&&a!==s)return a}else if(o===!1&&typeof s<"u"&&e!==s)return null}return!1}function Jf(n,t,e,s){const i=t._rootScopes,r=Nw(t._fallback,e,s),o=[...n,...i],a=new Set;a.add(s);let l=x_(a,o,e,r||e,s);return l===null||typeof r<"u"&&r!==e&&(l=x_(a,o,r,l,s),l===null)?!1:Xf(Array.from(a),[""],i,r,()=>EO(t,e,s))}function x_(n,t,e,s,i){for(;e;)e=TO(n,t,e,s,i);return e}function EO(n,t,e){const s=n._getTarget();t in s||(s[t]={});const i=s[t];return Zt(i)&&Dt(e)?e:i||{}}function IO(n,t,e,s){let i;for(const r of t)if(i=Fw(yO(r,n),e),typeof i<"u")return Qf(n,i)?Jf(e,s,n,i):i}function Fw(n,t){for(const e of t){if(!e)continue;const s=e[n];if(typeof s<"u")return s}}function T_(n){let t=n._keys;return t||(t=n._keys=SO(n._scopes)),t}function SO(n){const t=new Set;for(const e of n)for(const s of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function Bw(n,t,e,s){const{iScale:i}=n,{key:r="r"}=this._parsing,o=new Array(s);let a,l,c,h;for(a=0,l=s;a<l;++a)c=a+e,h=t[c],o[a]={r:i.parse(oi(h,r),c)};return o}const AO=Number.EPSILON||1e-14,Pr=(n,t)=>t<n.length&&!n[t].skip&&n[t],Uw=n=>n==="x"?"y":"x";function CO(n,t,e,s){const i=n.skip?t:n,r=t,o=e.skip?t:e,a=nd(r,i),l=nd(o,r);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=s*c,f=s*h;return{previous:{x:r.x-d*(o.x-i.x),y:r.y-d*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function PO(n,t,e){const s=n.length;let i,r,o,a,l,c=Pr(n,0);for(let h=0;h<s-1;++h)if(l=c,c=Pr(n,h+1),!(!l||!c)){if(Fo(t[h],0,AO)){e[h]=e[h+1]=0;continue}i=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=i*o*t[h],e[h+1]=r*o*t[h])}}function RO(n,t,e="x"){const s=Uw(e),i=n.length;let r,o,a,l=Pr(n,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Pr(n,c+1),!a)continue;const h=a[e],d=a[s];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${s}`]=d-r*t[c]),l&&(r=(l[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${s}`]=d+r*t[c])}}function kO(n,t="x"){const e=Uw(t),s=n.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=Pr(n,0);for(o=0;o<s;++o)if(a=l,l=c,c=Pr(n,o+1),!!l){if(c){const h=c[t]-l[t];i[o]=h!==0?(c[e]-l[e])/h:0}r[o]=a?c?jn(i[o-1])!==jn(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}PO(n,i,r),RO(n,r,t)}function al(n,t,e){return Math.max(Math.min(n,e),t)}function DO(n,t){let e,s,i,r,o,a=hs(n[0],t);for(e=0,s=n.length;e<s;++e)o=r,r=a,a=e<s-1&&hs(n[e+1],t),r&&(i=n[e],o&&(i.cp1x=al(i.cp1x,t.left,t.right),i.cp1y=al(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=al(i.cp2x,t.left,t.right),i.cp2y=al(i.cp2y,t.top,t.bottom)))}function MO(n,t,e,s,i){let r,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")kO(n,i);else{let c=s?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=CO(c,a,n[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&DO(n,e)}function Zf(){return typeof window<"u"&&typeof document<"u"}function tp(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function mc(n,t,e){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=n,s}const hu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function OO(n,t){return hu(n).getPropertyValue(t)}const LO=["top","right","bottom","left"];function Oi(n,t,e){const s={};e=e?"-"+e:"";for(let i=0;i<4;i++){const r=LO[i];s[r]=parseFloat(n[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const VO=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function NO(n,t){const e=n.touches,s=e&&e.length?e[0]:n,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(VO(i,r,n.target))a=i,l=r;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ii(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:s}=t,i=hu(e),r=i.boxSizing==="border-box",o=Oi(i,"padding"),a=Oi(i,"border","width"),{x:l,y:c,box:h}=NO(n,e),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:_}=t;return r&&(g-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/g*e.width/s),y:Math.round((c-f)/_*e.height/s)}}function FO(n,t,e){let s,i;if(t===void 0||e===void 0){const r=n&&tp(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=hu(r),l=Oi(a,"border","width"),c=Oi(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,s=mc(a.maxWidth,r,"clientWidth"),i=mc(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||pc,maxHeight:i||pc}}const $s=n=>Math.round(n*10)/10;function BO(n,t,e,s){const i=hu(n),r=Oi(i,"margin"),o=mc(i.maxWidth,n,"clientWidth")||pc,a=mc(i.maxHeight,n,"clientHeight")||pc,l=FO(n,t,e);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=Oi(i,"border","width"),g=Oi(i,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-r.width),h=Math.max(0,s?c/s:h-r.height),c=$s(Math.min(c,o,l.maxWidth)),h=$s(Math.min(h,a,l.maxHeight)),c&&!h&&(h=$s(c/2)),(t!==void 0||e!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=$s(Math.floor(h*s))),{width:c,height:h}}function E_(n,t,e){const s=t||1,i=$s(n.height*s),r=$s(n.width*s);n.height=$s(n.height),n.width=$s(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(n.currentDevicePixelRatio=s,o.height=i,o.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const UO=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Zf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function I_(n,t){const e=OO(n,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Si(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function $O(n,t,e,s){return{x:n.x+e*(t.x-n.x),y:s==="middle"?e<.5?n.y:t.y:s==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function zO(n,t,e,s){const i={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=Si(n,i,e),a=Si(i,r,e),l=Si(r,t,e),c=Si(o,a,e),h=Si(a,l,e);return Si(c,h,e)}const jO=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},HO=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function yr(n,t,e){return n?jO(t,e):HO()}function $w(n,t){let e,s;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=s)}function zw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function jw(n){return n==="angle"?{between:oa,compare:W2,normalize:Oe}:{between:cs,compare:(t,e)=>t-e,normalize:t=>t}}function S_({start:n,end:t,count:e,loop:s,style:i}){return{start:n%e,end:t%e,loop:s&&(t-n+1)%e===0,style:i}}function WO(n,t,e){const{property:s,start:i,end:r}=e,{between:o,normalize:a}=jw(s),l=t.length;let{start:c,end:h,loop:d}=n,f,g;if(d){for(c+=l,h+=l,f=0,g=l;f<g&&o(a(t[c%l][s]),i,r);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:n.style}}function Hw(n,t,e){if(!e)return[n];const{property:s,start:i,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=jw(s),{start:h,end:d,loop:f,style:g}=WO(n,t,e),_=[];let b=!1,v=null,A,C,M;const k=()=>l(i,M,A)&&a(i,M)!==0,D=()=>a(r,A)===0||l(r,M,A),N=()=>b||k(),w=()=>!b||D();for(let y=h,x=h;y<=d;++y)C=t[y%o],!C.skip&&(A=c(C[s]),A!==M&&(b=l(A,i,r),v===null&&N()&&(v=a(A,i)===0?y:x),v!==null&&w()&&(_.push(S_({start:v,end:y,loop:f,count:o,style:g})),v=null),x=y,M=A));return v!==null&&_.push(S_({start:v,end:d,loop:f,count:o,style:g})),_}function Ww(n,t){const e=[],s=n.segments;for(let i=0;i<s.length;i++){const r=Hw(s[i],n.points,t);r.length&&e.push(...r)}return e}function qO(n,t,e,s){let i=0,r=t-1;if(e&&!s)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(r+=i);r>i&&n[r%t].skip;)r--;return r%=t,{start:i,end:r}}function GO(n,t,e,s){const i=n.length,r=[];let o=t,a=n[t],l;for(l=t+1;l<=e;++l){const c=n[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%i,end:(l-1)%i,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function KO(n,t){const e=n.points,s=n.options.spanGaps,i=e.length;if(!i)return[];const r=!!n._loop,{start:o,end:a}=qO(e,i,r,s);if(s===!0)return A_(n,[{start:o,end:a,loop:r}],e,t);const l=a<o?a+i:a,c=!!n._fullLoop&&o===0&&a===i-1;return A_(n,GO(e,o,l,c),e,t)}function A_(n,t,e,s){return!s||!s.setContext||!e?t:YO(n,t,e,s)}function YO(n,t,e,s){const i=n._chart.getContext(),r=C_(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[];let h=r,d=t[0].start,f=d;function g(_,b,v,A){const C=a?-1:1;if(_!==b){for(_+=l;e[_%l].skip;)_-=C;for(;e[b%l].skip;)b+=C;_%l!==b%l&&(c.push({start:_%l,end:b%l,loop:v,style:A}),h=A,d=b%l)}}for(const _ of t){d=a?d:_.start;let b=e[d%l],v;for(f=d+1;f<=_.end;f++){const A=e[f%l];v=C_(s.setContext(hi(i,{type:"segment",p0:b,p1:A,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),XO(v,h)&&g(d,f-1,_.loop,h),b=A,h=v}d<f-1&&g(d,f-1,_.loop,h)}return c}function C_(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function XO(n,t){if(!t)return!1;const e=[],s=function(i,r){return Kf(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(t,s)}function ll(n,t,e){return n.options.clip?n[e]:t[e]}function QO(n,t){const{xScale:e,yScale:s}=n;return e&&s?{left:ll(e,t,"left"),right:ll(e,t,"right"),top:ll(s,t,"top"),bottom:ll(s,t,"bottom")}:t}function qw(n,t){const e=t._clip;if(e.disabled)return!1;const s=QO(t,n.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:s.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class JO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,i){const r=e.listeners[i],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Cw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var es=new JO;const P_="transparent",ZO={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const s=b_(n||P_),i=s.valid&&b_(t||P_);return i&&i.valid?i.mix(s,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class tL{constructor(t,e,s,i){const r=e[s];i=yo([t.to,i,r,t.from]);const o=yo([t.from,r,i]);this._active=!0,this._fn=t.fn||ZO[t.type||typeof o],this._easing=Bo[t.easing]||Bo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=yo([t.to,e,i,t.from]),this._from=yo([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||e<s),!this._active){this._target[i]=a,this._notify(!0);return}if(e<0){this._target[i]=r;return}l=e/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][e]()}}class Gw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Dt(t))return;const e=Object.keys(te.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Dt(r))return;const o={};for(const a of e)o[a]=r[a];(Zt(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){const s=e.options,i=nL(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&eL(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,e));continue}const h=e[c];let d=r[c];const f=s.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}r[c]=d=new tL(f,t,c,h),i.push(d)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return es.add(this._chart,s),!0}}function eL(n,t){const e=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function nL(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function R_(n,t){const e=n&&n.options||{},s=e.reverse,i=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function sL(n,t,e){if(e===!1)return!1;const s=R_(n,e),i=R_(t,e);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function iL(n){let t,e,s,i;return Dt(n)?(t=n.top,e=n.right,s=n.bottom,i=n.left):t=e=s=i=n,{top:t,right:e,bottom:s,left:i,disabled:n===!1}}function Kw(n,t){const e=[],s=n._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)e.push(s[i].index);return e}function k_(n,t,e,s={}){const i=n.keys,r=s.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===e){if(h=!0,s.all)continue;break}c=n.values[l],re(c)&&(r||t===0||jn(t)===jn(c))&&(t+=c)}return!h&&!s.all?0:t}function rL(n,t){const{iScale:e,vScale:s}=t,i=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[r]:n[h]};return a}function sh(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function oL(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function aL(n){const{min:t,max:e,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function lL(n,t,e){const s=n[t]||(n[t]={});return s[e]||(s[e]={})}function D_(n,t,e,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(e&&r>0||!e&&r<0)return i.index}return null}function M_(n,t){const{chart:e,_cachedMeta:s}=n,i=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,h=oL(r,o,s),d=t.length;let f;for(let g=0;g<d;++g){const _=t[g],{[l]:b,[c]:v}=_,A=_._stacks||(_._stacks={});f=A[c]=lL(i,h,b),f[a]=v,f._top=D_(f,o,!0,s.type),f._bottom=D_(f,o,!1,s.type);const C=f._visualValues||(f._visualValues={});C[a]=v}}function ih(n,t){const e=n.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function cL(n,t){return hi(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function uL(n,t,e){return hi(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ro(n,t){const e=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){t=t||n._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}const rh=n=>n==="reset"||n==="none",O_=(n,t)=>t?n:Object.assign({},n),hL=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Kw(e,!0),values:null};class di{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=sh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ro(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),i=(d,f,g,_)=>d==="x"?f:d==="r"?_:g,r=e.xAxisID=wt(s.xAxisID,ih(t,"x")),o=e.yAxisID=wt(s.yAxisID,ih(t,"y")),a=e.rAxisID=wt(s.rAxisID,ih(t,"r")),l=e.indexAxis,c=e.iAxisID=i(l,r,o,a),h=e.vAxisID=i(l,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&m_(this._data,this),t._stacked&&ro(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(Dt(e)){const i=this._cachedMeta;this._data=rL(e,i)}else if(s!==e){if(s){m_(s,this);const i=this._cachedMeta;ro(i),i._parsed=[]}e&&Object.isExtensible(e)&&Y2(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=sh(e.vScale,e),e.stack!==s.stack&&(i=!0,ro(e),e.stack=s.stack),this._resyncElements(t),(i||r!==e._stacked)&&(M_(this,e._parsed),e._stacked=sh(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=t===0&&e===i.length?!0:s._sorted,c=t>0&&s._parsed[t-1],h,d,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{Zt(i[t])?f=this.parseArrayData(s,i,t,e):Dt(i[t])?f=this.parseObjectData(s,i,t,e):f=this.parsePrimitiveData(s,i,t,e);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<e;++h)s._parsed[h+t]=d=f[h],l&&(g()&&(l=!1),c=d);s._sorted=l}o&&M_(this,f)}parsePrimitiveData(t,e,s,i){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,d=new Array(i);let f,g,_;for(f=0,g=i;f<g;++f)_=f+s,d[f]={[a]:h||r.parse(c[_],_),[l]:o.parse(e[_],_)};return d}parseArrayData(t,e,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+s,d=e[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,e,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+s,g=e[f],c[h]={x:r.parse(oi(g,a),f),y:o.parse(oi(g,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const i=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:Kw(i,!0),values:e._stacks[t.axis]._visualValues};return k_(a,o,r.index,{mode:s})}updateRangeFromParsed(t,e,s,i){const r=s[e.axis];let o=r===null?NaN:r;const a=i&&s._stacks[e.axis];i&&a&&(i.values=a,o=k_(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),l=hL(e,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=aL(a);let f,g;function _(){g=i[f];const b=g[a.axis];return!re(g[t.axis])||h>b||d<b}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(c,t,g,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(c,t,g,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],re(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=iL(wt(this.options.clip,sL(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,i=s.data||[],r=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(s.dataset&&s.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=uL(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=cL(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const i=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],l=this.enableOptionSharing&&ra(s);if(a)return O_(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys(te.elements[t]),_=()=>this.getContext(s,i,e),b=c.resolveNamedOptions(f,g,_,d);return b.$shared&&(b.$shared=l,r[o]=Object.freeze(O_(b,l))),b}_resolveAnimations(t,e,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,s,e))}const c=new Gw(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||rh(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,s),{sharedOptions:r,includeOptions:o}}updateElement(t,e,s,i){rh(i)?Object.assign(t,s):this._resolveAnimations(e,i).update(t,s)}updateSharedOptions(t,e,s){t&&!rh(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,s=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),s&&this.updateElements(r,t,e,"reset")}updateElements(t,e,s,i){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,e);s._stacked&&ro(s,i)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,i]=t;this[e](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function dL(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=e.length;i<r;i++)s=s.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=Aw(s.sort((i,r)=>i-r))}return n._cache.$bar}function fL(n){const t=n.iScale,e=dL(t,n.type);let s=t._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(ra(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=e.length;i<r;++i)o=t.getPixelForValue(e[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),l();return s}function pL(n,t,e,s){const i=e.barThickness;let r,o;return Ct(i)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[n]-r/2}}function gL(n,t,e,s){const i=t.pixels,r=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:e.barPercentage,start:c}}function mL(n,t,e,s){const i=e.parse(n[0],s),r=e.parse(n[1],s),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function Yw(n,t,e,s){return Zt(n)?mL(n,t,e,s):t[e.axis]=e.parse(n,s),t}function L_(n,t,e,s){const i=n.iScale,r=n.vScale,o=i.getLabels(),a=i===r,l=[];let c,h,d,f;for(c=e,h=e+s;c<h;++c)f=t[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(Yw(f,d,r,c));return l}function oh(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function _L(n,t,e){return n!==0?jn(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function yL(n){let t,e,s,i,r;return n.horizontal?(t=n.base>n.x,e="left",s="right"):(t=n.base<n.y,e="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:e,end:s,reverse:t,top:i,bottom:r}}function bL(n,t,e,s){let i=t.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=yL(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===s?i=c:(e._bottom||0)===s?i=h:(r[V_(h,o,a,l)]=!0,i=c)),r[V_(i,o,a,l)]=!0,n.borderSkipped=r}function V_(n,t,e,s){return s?(n=vL(n,t,e),n=N_(n,e,t)):n=N_(n,t,e),n}function vL(n,t,e){return n===t?e:n===e?t:n}function N_(n,t,e){return n==="start"?t:n==="end"?e:n}function wL(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class xL extends di{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,s,i){return L_(t,e,s,i)}parseArrayData(t,e,s,i){return L_(t,e,s,i)}parseObjectData(t,e,s,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,g,_,b;for(f=s,g=s+i;f<g;++f)b=e[f],_={},_[r.axis]=r.parse(oi(b,c),f),d.push(Yw(oi(b,h),_,o,f));return d}updateRangeFromParsed(t,e,s,i){super.updateRangeFromParsed(t,e,s,i);const r=s._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=oh(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(e,i);for(let g=e;g<e+s;g++){const _=this.getParsed(g),b=r||Ct(_[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),v=this._calculateBarIndexPixels(g,h),A=(_._stacks||{})[a.axis],C={horizontal:c,base:b.base,enableBorderRadius:!A||oh(_._custom)||o===A._top||o===A._bottom,x:c?b.head:v.center,y:c?v.center:b.head,height:c?v.size:Math.abs(b.size),width:c?Math.abs(b.size):v.size};f&&(C.options=d||this.resolveDataElementOptions(g,t[g].active?"active":i));const M=C.options||t[g].options;bL(C,M,A,o),wL(C,M,h.ratio),this.updateElement(t[g],g,C,i)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[s.axis],c=h=>{const d=h._parsed.find(g=>g[s.axis]===l),f=d&&d[h.vScale.axis];if(Ct(f)||isNaN(f))return!0};for(const h of i)if(!(e!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[wt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const i=this._getStacks(t,s),r=e!==void 0?i.indexOf(e):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||fL(e),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=oh(c);let d=l[e.axis],f=0,g=s?this.applyStack(e,l,s):d,_,b;g!==d&&(f=g-d,g=d),h&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&jn(d)!==jn(c.barEnd)&&(f=0),f+=d);const v=!Ct(r)&&!h?r:f;let A=e.getPixelForValue(v);if(this.chart.getDataVisibility(t)?_=e.getPixelForValue(f+g):_=A,b=_-A,Math.abs(b)<o){b=_L(b,e,a)*o,d===a&&(A-=b/2);const C=e.getPixelForDecimal(0),M=e.getPixelForDecimal(1),k=Math.min(C,M),D=Math.max(C,M);A=Math.max(Math.min(A,D),k),_=A+b,s&&!h&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(_)-e.getValueForPixel(A))}if(A===e.getPixelForValue(a)){const C=jn(b)*e.getLineWidthForValue(a)/2;A+=C,b-=C}return{size:b,base:A,head:_,center:_+b/2}}_calculateBarIndexPixels(t,e){const s=e.scale,i=this.options,r=i.skipNull,o=wt(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(e.grouped){const h=r?this._getStackCount(t):e.stackCount,d=i.barThickness==="flex"?gL(t,e,i,h*c):pL(t,e,i,h*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(wt(f,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+g;a=d.start+d.chunk*_+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[e.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}class TL extends di{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,i){const r=super.parsePrimitiveData(t,e,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,e,s,i){const r=super.parseArrayData(t,e,s,i);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=wt(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,e,s,i){const r=super.parseObjectData(t,e,s,i);for(let o=0;o<r.length;o++){const a=e[s+o];r[o]._custom=wt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:s[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,i),h=o.axis,d=a.axis;for(let f=e;f<e+s;f++){const g=t[f],_=!r&&this.getParsed(f),b={},v=b[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(_[h]),A=b[d]=r?a.getBasePixel():a.getPixelForValue(_[d]);b.skip=isNaN(v)||isNaN(A),c&&(b.options=l||this.resolveDataElementOptions(f,g.active?"active":i),r&&(b.options.radius=0)),this.updateElement(g,f,b,i)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return e!=="active"&&(i.radius=0),i.radius+=wt(s&&s._custom,r),i}}function EL(n,t,e){let s=1,i=1,r=0,o=0;if(t<Jt){const a=n,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(M,k,D)=>oa(M,a,l,!0)?1:Math.max(k,k*e,D,D*e),_=(M,k,D)=>oa(M,a,l,!0)?-1:Math.min(k,k*e,D,D*e),b=g(0,c,d),v=g(le,h,f),A=_(Vt,c,d),C=_(Vt+le,h,f);s=(b-A)/2,i=(v-C)/2,r=-(b+A)/2,o=-(v+C)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class ep extends di{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,c)=>{const d=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=l=>+s[l];if(Dt(s[t])){const{key:l="value"}=this._parsing;r=c=>+oi(s[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return xn(this.options.rotation-90)}_getCircumference(){return xn(this.options.circumference)}_getRotationExtents(){let t=Jt,e=-Jt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(O2(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:_,offsetY:b}=EL(d,h,l),v=(s.width-o)/f,A=(s.height-o)/g,C=Math.max(Math.min(v,A)/2,0),M=xw(this.options.radius,C),k=Math.max(M*l,0),D=(M-k)/this._getVisibleDatasetWeightTotal();this.offsetX=_*M,this.offsetY=b*M,i.total=this.calculateTotal(),this.outerRadius=M-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Jt)}updateElements(t,e,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,g=f?0:this.innerRadius,_=f?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(e,i);let A=this._getRotation(),C;for(C=0;C<e;++C)A+=this._circumference(C,r);for(C=e;C<e+s;++C){const M=this._circumference(C,r),k=t[C],D={x:h+this.offsetX,y:d+this.offsetY,startAngle:A,endAngle:A+M,circumference:M,outerRadius:_,innerRadius:g};v&&(D.options=b||this.resolveDataElementOptions(C,k.active?"active":i)),A+=M,this.updateElement(k,C,D,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,i;for(i=0;i<e.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Jt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Pa(e._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const s=this.chart;let i,r,o,a,l;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(wt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class IL extends di{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:l}=Rw(e,i,o);this._drawStart=a,this._drawCount=l,kw(e)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,e,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,i),f=o.axis,g=a.axis,{spanGaps:_,segment:b}=this.options,v=Ar(_)?_:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||r||i==="none",C=e+s,M=t.length;let k=e>0&&this.getParsed(e-1);for(let D=0;D<M;++D){const N=t[D],w=A?N:{};if(D<e||D>=C){w.skip=!0;continue}const y=this.getParsed(D),x=Ct(y[g]),E=w[f]=o.getPixelForValue(y[f],D),I=w[g]=r||x?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,y,l):y[g],D);w.skip=isNaN(E)||isNaN(I)||x,w.stop=D>0&&Math.abs(y[f]-k[f])>v,b&&(w.parsed=y,w.raw=c.data[D]),d&&(w.options=h||this.resolveDataElementOptions(D,N.active?"active":i)),A||this.updateElement(N,D,w,i),k=y}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class Xw extends di{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return e.labels.map((r,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Pa(e._parsed[t].r,s.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,s,i){return Bw.bind(this)(t,e,s,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,s,i){const r=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Vt;let g=f,_;const b=360/this.countVisibleElements();for(_=0;_<e;++_)g+=this._computeAngle(_,i,b);for(_=e;_<e+s;_++){const v=t[_];let A=g,C=g+this._computeAngle(_,i,b),M=o.getDataVisibility(_)?c.getDistanceFromCenterForValue(this.getParsed(_).r):0;g=C,r&&(l.animateScale&&(M=0),l.animateRotate&&(A=C=f));const k={x:h,y:d,innerRadius:0,outerRadius:M,startAngle:A,endAngle:C,options:this.resolveDataElementOptions(_,v.active?"active":i)};this.updateElement(v,_,k,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?xn(this.resolveDataElementOptions(t,e).angle||s):0}}class SL extends ep{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class AL extends di{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,i){return Bw.bind(this)(t,e,s,i)}update(t){const e=this._cachedMeta,s=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(s.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=e;a<e+s;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:h.x,f=o?r.yCenter:h.y,g={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,g,i)}}}class CL extends di{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=Rw(e,s,i);if(this._drawStart=r,this._drawCount=o,kw(e)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(h),f=this.includeOptions(i,d),g=o.axis,_=a.axis,{spanGaps:b,segment:v}=this.options,A=Ar(b)?b:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||r||i==="none";let M=e>0&&this.getParsed(e-1);for(let k=e;k<e+s;++k){const D=t[k],N=this.getParsed(k),w=C?D:{},y=Ct(N[_]),x=w[g]=o.getPixelForValue(N[g],k),E=w[_]=r||y?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[_],k);w.skip=isNaN(x)||isNaN(E)||y,w.stop=k>0&&Math.abs(N[g]-M[g])>A,v&&(w.parsed=N,w.raw=c.data[k]),f&&(w.options=d||this.resolveDataElementOptions(k,D.active?"active":i)),C||this.updateElement(D,k,w,i),M=N}this.updateSharedOptions(d,i,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const s=t.dataset,i=s.options&&s.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}var PL=Object.freeze({__proto__:null,BarController:xL,BubbleController:TL,DoughnutController:ep,LineController:IL,PieController:SL,PolarAreaController:Xw,RadarController:AL,ScatterController:CL});function wi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class np{static override(t){Object.assign(np.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return wi()}parse(){return wi()}format(){return wi()}add(){return wi()}diff(){return wi()}startOf(){return wi()}endOf(){return wi()}}var RL={_date:np};function kL(n,t,e,s){const{controller:i,data:r,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?G2:us;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=c(r,t,e-d),g=c(r,t,e+d);return{lo:f.lo,hi:g.hi}}}}else{const h=c(r,t,e);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=n,g=f.slice(0,h.lo+1).reverse().findIndex(b=>!Ct(b[d.axis]));h.lo-=Math.max(0,g);const _=f.slice(h.hi).findIndex(b=>!Ct(b[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:r.length-1}}function du(n,t,e,s,i){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:d,hi:f}=kL(r[a],t,o,i);for(let g=d;g<=f;++g){const _=h[g];_.skip||s(_,c,g)}}}function DL(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=e?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ah(n,t,e,s,i){const r=[];return!i&&!n.isPointInArea(t)||du(n,e,t,function(a,l,c){!i&&!hs(a,n.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function ML(n,t,e,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:d}=Iw(o,{x:t.x,y:t.y});oa(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return du(n,e,t,r),i}function OL(n,t,e,s,i,r){let o=[];const a=DL(e);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(t.x,t.y,i);if(s&&!g)return;const _=h.getCenterPoint(i);if(!(!!r||n.isPointInArea(_))&&!g)return;const v=a(t,_);v<l?(o=[{element:h,datasetIndex:d,index:f}],l=v):v===l&&o.push({element:h,datasetIndex:d,index:f})}return du(n,e,t,c),o}function lh(n,t,e,s,i,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!s?ML(n,t,e,i):OL(n,t,e,s,i,r)}function F_(n,t,e,s,i){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return du(n,e,t,(l,c,h)=>{l[o]&&l[o](t[e],i)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,i))}),s&&!a?[]:r}var LL={modes:{index(n,t,e,s){const i=Ii(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?ah(n,i,r,s,o):lh(n,i,r,!1,s,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(n,t,e,s){const i=Ii(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?ah(n,i,r,s,o):lh(n,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,t,e,s){const i=Ii(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return ah(n,i,r,s,o)},nearest(n,t,e,s){const i=Ii(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return lh(n,i,r,e.intersect,s,o)},x(n,t,e,s){const i=Ii(t,n);return F_(n,i,"x",e.intersect,s)},y(n,t,e,s){const i=Ii(t,n);return F_(n,i,"y",e.intersect,s)}}};const Qw=["left","top","right","bottom"];function oo(n,t){return n.filter(e=>e.pos===t)}function B_(n,t){return n.filter(e=>Qw.indexOf(e.pos)===-1&&e.box.axis===t)}function ao(n,t){return n.sort((e,s)=>{const i=t?s:e,r=t?e:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function VL(n){const t=[];let e,s,i,r,o,a;for(e=0,s=(n||[]).length;e<s;++e)i=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:e,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function NL(n){const t={};for(const e of n){const{stack:s,pos:i,stackWeight:r}=e;if(!s||!Qw.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function FL(n,t){const e=NL(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=i):(a.width=s,a.height=h?h*i:l&&t.availableHeight)}return e}function BL(n){const t=VL(n),e=ao(t.filter(c=>c.box.fullSize),!0),s=ao(oo(t,"left"),!0),i=ao(oo(t,"right")),r=ao(oo(t,"top"),!0),o=ao(oo(t,"bottom")),a=B_(t,"x"),l=B_(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:oo(t,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function U_(n,t,e,s){return Math.max(n[e],t[e])+Math.max(n[s],t[s])}function Jw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function UL(n,t,e,s){const{pos:i,box:r}=e,o=n.maxPadding;if(!Dt(i)){e.size&&(n[i]-=e.size);const d=s[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?r.height:r.width),e.size=d.size/d.count,n[i]+=e.size}r.getPadding&&Jw(o,r.getPadding());const a=Math.max(0,t.outerWidth-U_(o,n,"left","right")),l=Math.max(0,t.outerHeight-U_(o,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function $L(n){const t=n.maxPadding;function e(s){const i=Math.max(t[s]-n[s],0);return n[s]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function zL(n,t){const e=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(n?["left","right"]:["top","bottom"])}function bo(n,t,e,s){const i=[];let r,o,a,l,c,h;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||t.w,a.height||t.h,zL(a.horizontal,t));const{same:d,other:f}=UL(t,e,a,s);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&bo(i,t,e,s)||h}function cl(n,t,e,s,i){n.top=e,n.left=t,n.right=t+s,n.bottom=e+i,n.width=s,n.height=i}function $_(n,t,e,s){const i=e.padding;let{x:r,y:o}=t;for(const a of n){const l=a.box,c=s[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;ra(c.start)&&(o=c.start),l.fullSize?cl(l,i.left,o,e.outerWidth-i.right-i.left,f):cl(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*h,f=c.size||l.width;ra(c.start)&&(r=c.start),l.fullSize?cl(l,r,i.top,f,e.outerHeight-i.bottom-i.top):cl(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var Be={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,s){if(!n)return;const i=ze(n.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(e-i.height,0),a=BL(n.boxes),l=a.vertical,c=a.horizontal;zt(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);Jw(f,ze(s));const g=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),_=FL(l.concat(c),d);bo(a.fullSize,g,d,_),bo(l,g,d,_),bo(c,g,d,_)&&bo(l,g,d,_),$L(g),$_(a.leftAndTop,g,d,_),g.x+=g.w,g.y+=g.h,$_(a.rightAndBottom,g,d,_),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},zt(a.chartArea,b=>{const v=b.box;Object.assign(v,n.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Zw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,i){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):s)}}isAttached(t){return!0}updateConfig(t){}}class jL extends Zw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ol="$chartjs",HL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},z_=n=>n===null||n==="";function WL(n,t){const e=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[Ol]={initial:{height:s,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",z_(i)){const r=I_(n,"width");r!==void 0&&(n.width=r)}if(z_(s))if(n.style.height==="")n.height=n.width/(t||2);else{const r=I_(n,"height");r!==void 0&&(n.height=r)}return n}const tx=UO?{passive:!0}:!1;function qL(n,t,e){n&&n.addEventListener(t,e,tx)}function GL(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,tx)}function KL(n,t){const e=HL[n.type]||n.type,{x:s,y:i}=Ii(n,t);return{type:e,chart:t,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function _c(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function YL(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||_c(a.addedNodes,s),o=o&&!_c(a.removedNodes,s);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function XL(n,t,e){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||_c(a.removedNodes,s),o=o&&!_c(a.addedNodes,s);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const la=new Map;let j_=0;function ex(){const n=window.devicePixelRatio;n!==j_&&(j_=n,la.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function QL(n,t){la.size||window.addEventListener("resize",ex),la.set(n,t)}function JL(n){la.delete(n),la.size||window.removeEventListener("resize",ex)}function ZL(n,t,e){const s=n.canvas,i=s&&tp(s);if(!i)return;const r=Pw((a,l)=>{const c=i.clientWidth;e(a,l),c<i.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(i),QL(n,r),o}function ch(n,t,e){e&&e.disconnect(),t==="resize"&&JL(n)}function tV(n,t,e){const s=n.canvas,i=Pw(r=>{n.ctx!==null&&e(KL(r,n))},n);return qL(s,t,i),i}class eV extends Zw{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(WL(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[Ol])return!1;const s=e[Ol].initial;["height","width"].forEach(r=>{const o=s[r];Ct(o)?e.removeAttribute(r):e.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{e.style[r]=i[r]}),e.width=e.width,delete e[Ol],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),o={attach:YL,detach:XL,resize:ZL}[e]||tV;i[e]=o(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),i=s[e];if(!i)return;({attach:ch,detach:ch,resize:ch}[e]||GL)(t,e,i),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,i){return BO(t,e,s,i)}isAttached(t){const e=t&&tp(t);return!!(e&&e.isConnected)}}function nV(n){return!Zf()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?jL:eV}let Es=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Ar(this.x)&&Ar(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function sV(n,t){const e=n.options.ticks,s=iV(n),i=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?oV(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return aV(t,c,r,o/i),c;const h=rV(r,t,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(ul(t,c,h,Ct(g)?0:a-g,a),d=0,f=o-1;d<f;d++)ul(t,c,h,r[d],r[d+1]);return ul(t,c,h,l,Ct(g)?t.length:l+g),c}return ul(t,c,h),c}function iV(n){const t=n.options.offset,e=n._tickSize(),s=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(s,i))}function rV(n,t,e){const s=lV(n),i=t.length/e;if(!s)return Math.max(i,1);const r=z2(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function oV(n){const t=[];let e,s;for(e=0,s=n.length;e<s;e++)n[e].major&&t.push(e);return t}function aV(n,t,e,s){let i=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===r&&(t.push(n[o]),i++,r=e[i*s])}function ul(n,t,e,s,i){const r=wt(s,0),o=Math.min(wt(i,n.length),n.length);let a=0,l,c,h;for(e=Math.ceil(e),i&&(l=i-s,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(n[c]),a++,h=Math.round(r+a*e))}function lV(n){const t=n.length;let e,s;if(t<2)return!1;for(s=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==s)return!1;return s}const cV=n=>n==="left"?"right":n==="right"?"left":n,H_=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,W_=(n,t)=>Math.min(t||n,n);function q_(n,t){const e=[],s=n.length/t,i=n.length;let r=0;for(;r<i;r+=s)e.push(n[Math.floor(r)]);return e}function uV(n,t,e){const s=n.ticks.length,i=Math.min(t,s-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),c;if(!(e&&(s===1?c=Math.max(l-r,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<r-a||l>o+a)))return l}function hV(n,t){zt(n,e=>{const s=e.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[s[r]];s.splice(0,i)}})}function lo(n){return n.drawTicks?n.tickLength:0}function G_(n,t){if(!n.display)return 0;const e=pe(n.font,t),s=ze(n.padding);return(Zt(n.text)?n.text.length:1)*e.lineHeight+s.height}function dV(n,t){return hi(n,{scale:t,type:"scale"})}function fV(n,t,e){return hi(n,{tick:e,index:t,type:"tick"})}function pV(n,t,e){let s=Gf(n);return(e&&t!=="right"||!e&&t==="right")&&(s=cV(s)),s}function gV(n,t,e,s){const{top:i,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let d=0,f,g,_;const b=o-i,v=a-r;if(n.isHorizontal()){if(g=De(s,r,a),Dt(e)){const A=Object.keys(e)[0],C=e[A];_=h[A].getPixelForValue(C)+b-t}else e==="center"?_=(c.bottom+c.top)/2+b-t:_=H_(n,e,t);f=a-r}else{if(Dt(e)){const A=Object.keys(e)[0],C=e[A];g=h[A].getPixelForValue(C)-v+t}else e==="center"?g=(c.left+c.right)/2-v+t:g=H_(n,e,t);_=De(s,o,i),d=e==="left"?-le:le}return{titleX:g,titleY:_,maxWidth:f,rotation:d}}class Gi extends Es{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:i}=this;return t=nn(t,Number.POSITIVE_INFINITY),e=nn(e,Number.NEGATIVE_INFINITY),s=nn(s,Number.POSITIVE_INFINITY),i=nn(i,Number.NEGATIVE_INFINITY),{min:nn(t,s),max:nn(e,i),minDefined:re(t),maxDefined:re(e)}}getMinMax(t){let{min:e,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:e,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=i&&e>s?e:s,{min:nn(e,nn(s,e)),max:nn(s,nn(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Kt(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_O(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?q_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Kt(this.options.afterUpdate,[this])}beforeSetDimensions(){Kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Kt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Kt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Kt(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=W_(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!e.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=_e(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:g/(s-1),d+6>a&&(a=g/(s-(t.offset?.5:1)),l=this.maxHeight-lo(t.grid)-e.padding-G_(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=Wf(Math.min(Math.asin(_e((h.highest.height+6)/a,-1,1)),Math.asin(_e(l/c,-1,1))-Math.asin(_e(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Kt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=G_(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=lo(r)+l):(t.height=this.maxHeight,t.width=lo(r)+l),s.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=s.padding*2,_=xn(this.labelRotation),b=Math.cos(_),v=Math.sin(_);if(a){const A=s.mirror?0:v*d.width+b*f.height;t.height=Math.min(this.maxHeight,t.height+A+g)}else{const A=s.mirror?0:b*d.width+v*f.height;t.width=Math.min(this.maxWidth,t.width+A+g)}this._calculatePadding(c,h,v,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=i*t.width,g=s*e.height):(f=s*t.height,g=i*e.width):r==="start"?g=e.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,g=e.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=e.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Kt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)Ct(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=q_(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/W_(e,s));let c=0,h=0,d,f,g,_,b,v,A,C,M,k,D;for(d=0;d<e;d+=l){if(_=t[d].label,b=this._resolveTickFontOptions(d),i.font=v=b.string,A=r[v]=r[v]||{data:{},gc:[]},C=b.lineHeight,M=k=0,!Ct(_)&&!Zt(_))M=gc(i,A.data,A.gc,M,_),k=C;else if(Zt(_))for(f=0,g=_.length;f<g;++f)D=_[f],!Ct(D)&&!Zt(D)&&(M=gc(i,A.data,A.gc,M,D),k+=C);o.push(M),a.push(k),c=Math.max(M,c),h=Math.max(k,h)}hV(r,e);const N=o.indexOf(c),w=a.indexOf(h),y=x=>({width:o[x]||0,height:a[x]||0});return{first:y(0),last:y(e-1),widest:y(N),highest:y(w),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return q2(this._alignToPixels?vi(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=fV(this.getContext(),t,s))}return this.$context||(this.$context=dV(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=xn(this.labelRotation),s=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=lo(r),g=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,v=b/2,A=function(dt){return vi(s,dt,b)};let C,M,k,D,N,w,y,x,E,I,P,S;if(o==="top")C=A(this.bottom),w=this.bottom-f,x=C-v,I=A(t.top)+v,S=t.bottom;else if(o==="bottom")C=A(this.top),I=t.top,S=A(t.bottom)-v,w=C+v,x=this.top+f;else if(o==="left")C=A(this.right),N=this.right-f,y=C-v,E=A(t.left)+v,P=t.right;else if(o==="right")C=A(this.left),E=t.left,P=A(t.right)-v,N=C+v,y=this.left+f;else if(e==="x"){if(o==="center")C=A((t.top+t.bottom)/2+.5);else if(Dt(o)){const dt=Object.keys(o)[0],ot=o[dt];C=A(this.chart.scales[dt].getPixelForValue(ot))}I=t.top,S=t.bottom,w=C+v,x=w+f}else if(e==="y"){if(o==="center")C=A((t.left+t.right)/2);else if(Dt(o)){const dt=Object.keys(o)[0],ot=o[dt];C=A(this.chart.scales[dt].getPixelForValue(ot))}N=C-v,y=N-f,E=t.left,P=t.right}const rt=wt(i.ticks.maxTicksLimit,d),it=Math.max(1,Math.ceil(d/rt));for(M=0;M<d;M+=it){const dt=this.getContext(M),ot=r.setContext(dt),H=a.setContext(dt),J=ot.lineWidth,Y=ot.color,ht=H.dash||[],St=H.dashOffset,yt=ot.tickWidth,Nt=ot.tickColor,be=ot.tickBorderDash||[],oe=ot.tickBorderDashOffset;k=uV(this,M,l),k!==void 0&&(D=vi(s,k,J),c?N=y=E=P=D:w=x=I=S=D,g.push({tx1:N,ty1:w,tx2:y,ty2:x,x1:E,y1:I,x2:P,y2:S,width:J,color:Y,borderDash:ht,borderDashOffset:St,tickWidth:yt,tickColor:Nt,tickBorderDash:be,tickBorderDashOffset:oe}))}return this._ticksLength=d,this._borderValue=C,g}_computeLabelItems(t){const e=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=r,f=lo(s.grid),g=f+h,_=d?-h:g,b=-xn(this.labelRotation),v=[];let A,C,M,k,D,N,w,y,x,E,I,P,S="middle";if(i==="top")N=this.bottom-_,w=this._getXAxisLabelAlignment();else if(i==="bottom")N=this.top+_,w=this._getXAxisLabelAlignment();else if(i==="left"){const it=this._getYAxisLabelAlignment(f);w=it.textAlign,D=it.x}else if(i==="right"){const it=this._getYAxisLabelAlignment(f);w=it.textAlign,D=it.x}else if(e==="x"){if(i==="center")N=(t.top+t.bottom)/2+g;else if(Dt(i)){const it=Object.keys(i)[0],dt=i[it];N=this.chart.scales[it].getPixelForValue(dt)+g}w=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")D=(t.left+t.right)/2-g;else if(Dt(i)){const it=Object.keys(i)[0],dt=i[it];D=this.chart.scales[it].getPixelForValue(dt)}w=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?S="top":l==="end"&&(S="bottom"));const rt=this._getLabelSizes();for(A=0,C=a.length;A<C;++A){M=a[A],k=M.label;const it=r.setContext(this.getContext(A));y=this.getPixelForTick(A)+r.labelOffset,x=this._resolveTickFontOptions(A),E=x.lineHeight,I=Zt(k)?k.length:1;const dt=I/2,ot=it.color,H=it.textStrokeColor,J=it.textStrokeWidth;let Y=w;o?(D=y,w==="inner"&&(A===C-1?Y=this.options.reverse?"left":"right":A===0?Y=this.options.reverse?"right":"left":Y="center"),i==="top"?c==="near"||b!==0?P=-I*E+E/2:c==="center"?P=-rt.highest.height/2-dt*E+E:P=-rt.highest.height+E/2:c==="near"||b!==0?P=E/2:c==="center"?P=rt.highest.height/2-dt*E:P=rt.highest.height-I*E,d&&(P*=-1),b!==0&&!it.showLabelBackdrop&&(D+=E/2*Math.sin(b))):(N=y,P=(1-I)*E/2);let ht;if(it.showLabelBackdrop){const St=ze(it.backdropPadding),yt=rt.heights[A],Nt=rt.widths[A];let be=P-St.top,oe=0-St.left;switch(S){case"middle":be-=yt/2;break;case"bottom":be-=yt;break}switch(w){case"center":oe-=Nt/2;break;case"right":oe-=Nt;break;case"inner":A===C-1?oe-=Nt:A>0&&(oe-=Nt/2);break}ht={left:oe,top:be,width:Nt+St.width,height:yt+St.height,color:it.backdropColor}}v.push({label:k,font:x,textOffset:P,options:{rotation:b,color:ot,strokeColor:H,strokeWidth:J,textAlign:Y,textBaseline:S,translation:[D,N],backdrop:ht}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-xn(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return e==="left"?i?(h=this.right+r,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?i?(h=this.left+r,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const l=i[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=vi(t,this.left,o)-o/2,h=vi(t,this.right,a)+a/2,d=f=l):(d=vi(t,this.top,o)-o/2,f=vi(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,d),e.lineTo(h,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&cu(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;zi(s,c,0,h,l,a)}i&&uu(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:i}}=this;if(!s.display)return;const r=pe(s.font),o=ze(s.padding),a=s.align;let l=r.lineHeight/2;e==="bottom"||e==="center"||Dt(e)?(l+=o.bottom,Zt(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=gV(this,l,e,a);zi(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:pV(a,e,i),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=wt(t.grid&&t.grid.z,-1),i=wt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Gi.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return pe(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class hl{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;yV(e)&&(s=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,mV(t,o,s),this.override&&te.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,i=this.scope;s in e&&delete e[s],i&&s in te[i]&&(delete te[i][s],this.override&&delete $i[s])}}function mV(n,t,e){const s=ia(Object.create(null),[e?te.get(e):{},te.get(t),n.defaults]);te.set(t,s),n.defaultRoutes&&_V(t,n.defaultRoutes),n.descriptors&&te.describe(t,n.descriptors)}function _V(n,t){Object.keys(t).forEach(e=>{const s=e.split("."),i=s.pop(),r=[n].concat(s).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");te.route(r,i,l,a)})}function yV(n){return"id"in n&&"defaults"in n}class bV{constructor(){this.controllers=new hl(di,"datasets",!0),this.elements=new hl(Es,"elements"),this.plugins=new hl(Object,"plugins"),this.scales=new hl(Gi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):zt(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){const i=Hf(t);Kt(s["before"+i],[],s),e[t](s),Kt(s["after"+i],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var Rn=new bV;class vV{constructor(){this._init=void 0}notify(t,e,s,i){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],l=[e,i,r.options];if(Kt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,i=wt(s.options&&s.options.plugins,{}),r=wV(s);return i===!1&&!e?[]:TV(t,r,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(e,s),t,"stop"),this._notify(i(s,e),t,"start")}}function wV(n){const t={},e=[],s=Object.keys(Rn.plugins.items);for(let r=0;r<s.length;r++)e.push(Rn.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function xV(n,t){return!t&&n===!1?null:n===!0?{}:n}function TV(n,{plugins:t,localIds:e},s,i){const r=[],o=n.getContext();for(const a of t){const l=a.id,c=xV(s[l],i);c!==null&&r.push({plugin:a,options:EV(n.config,{plugin:a,local:e[l]},c,o)})}return r}function EV(n,{plugin:t,local:e},s,i){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rd(n,t){const e=te.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function IV(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function SV(n,t){return n===t?"_index_":"_value_"}function K_(n){if(n==="x"||n==="y"||n==="r")return n}function AV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function od(n,...t){if(K_(n))return n;for(const e of t){const s=e.axis||AV(e.position)||n.length>1&&K_(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Y_(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function CV(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(e.length)return Y_(n,"x",e[0])||Y_(n,"y",e[0])}return{}}function PV(n,t){const e=$i[n.type]||{scales:{}},s=t.scales||{},i=rd(n.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Dt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=od(o,a,CV(o,n),te.scales[a.type]),c=SV(l,i),h=e.scales||{};r[o]=No(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||rd(a,t),h=($i[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=IV(d,l),g=o[f+"AxisID"]||f;r[g]=r[g]||Object.create(null),No(r[g],[{axis:f},s[g],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];No(a,[te.scales[a.type],te.scale])}),r}function nx(n){const t=n.options||(n.options={});t.plugins=wt(t.plugins,{}),t.scales=PV(n,t)}function sx(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function RV(n){return n=n||{},n.data=sx(n.data),nx(n),n}const X_=new Map,ix=new Set;function dl(n,t){let e=X_.get(n);return e||(e=t(),X_.set(n,e),ix.add(e)),e}const co=(n,t,e)=>{const s=oi(t,e);s!==void 0&&n.add(s)};class kV{constructor(t){this._config=RV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=sx(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),nx(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return dl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return dl(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return dl(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return dl(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let i=s.get(t);return(!i||e)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,e,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(d=>co(l,t,d))),h.forEach(d=>co(l,i,d)),h.forEach(d=>co(l,$i[r]||{},d)),h.forEach(d=>co(l,te,d)),h.forEach(d=>co(l,sd,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ix.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,$i[e]||{},te.datasets[e]||{},{type:e},te,sd]}resolveNamedOptions(t,e,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Q_(this._resolverCache,t,i);let l=o;if(MV(o,e)){r.$shared=!1,s=ai(s)?s():s;const c=this.createResolver(t,s,a);l=Cr(o,s,c)}for(const c of e)r[c]=l[c];return r}createResolver(t,e,s=[""],i){const{resolver:r}=Q_(this._resolverCache,t,s);return Dt(e)?Cr(r,e,void 0,i):r}}function Q_(n,t,e){let s=n.get(t);s||(s=new Map,n.set(t,s));const i=e.join();let r=s.get(i);return r||(r={resolver:Xf(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const DV=n=>Dt(n)&&Object.getOwnPropertyNames(n).some(t=>ai(n[t]));function MV(n,t){const{isScriptable:e,isIndexable:s}=Lw(n);for(const i of t){const r=e(i),o=s(i),a=(o||r)&&n[i];if(r&&(ai(a)||DV(a))||o&&Zt(a))return!0}return!1}var OV="4.5.1";const LV=["top","bottom","left","right","chartArea"];function J_(n,t){return n==="top"||n==="bottom"||LV.indexOf(n)===-1&&t==="x"}function Z_(n,t){return function(e,s){return e[n]===s[n]?e[t]-s[t]:e[n]-s[n]}}function ty(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Kt(e&&e.onComplete,[n],t)}function VV(n){const t=n.chart,e=t.options.animation;Kt(e&&e.onProgress,[n],t)}function rx(n){return Zf()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Ll={},ey=n=>{const t=rx(n);return Object.values(Ll).filter(e=>e.canvas===t).pop()};function NV(n,t,e){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=t){const o=n[i];delete n[i],(e>0||r>t)&&(n[r+e]=o)}}}function FV(n,t,e,s){return!e||n.type==="mouseout"?null:s?t:n}class sp{static defaults=te;static instances=Ll;static overrides=$i;static registry=Rn;static version=OV;static getChart=ey;static register(...t){Rn.add(...t),ny()}static unregister(...t){Rn.remove(...t),ny()}constructor(t,e){const s=this.config=new kV(e),i=rx(t),r=ey(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||nV(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=M2(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=X2(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ll[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}es.listen(this,"complete",ty),es.listen(this,"progress",VV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:i,_aspectRatio:r}=this;return Ct(t)?e&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Rn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():E_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return w_(this.canvas,this.ctx),this}stop(){return es.stop(this),this}resize(t,e){es.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,E_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Kt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};zt(e,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],l=od(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),zt(r,o=>{const a=o.options,l=a.id,c=od(l,a),h=wt(a.type,o.dtype);(a.position===void 0||J_(a.position,c)!==J_(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in s&&s[l].type===h)d=s[l];else{const f=Rn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),zt(i,(o,a)=>{o||delete s[a]}),zt(s,o=>{Be.configure(this,o,o.options),Be.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>e){for(let i=e;i<s;++i)this._destroyDatasetMeta(i);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Z_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,i)=>{e.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=e.length;s<i;s++){const r=e[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||rd(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Rn.getController(a),{datasetElementType:c,dataElementType:h}=te.datasets[a];Object.assign(l,{dataElementType:Rn.getElement(h),datasetElementType:c&&Rn.getElement(c)}),o.controller=new l(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){zt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||zt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Z_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){zt(this.scales,t=>{Be.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!d_(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of e){const o=s==="_removeElements"?-r:r;NV(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<e;r++)if(!d_(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Be.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],zt(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,ai(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(es.has(this)?this.attached&&!es.running(this)&&es.start(this):(this.draw(),ty({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let i,r;for(i=0,r=e.length;i<r;++i){const o=e[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},i=qw(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&cu(e,i),t.controller.draw(),i&&uu(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return hs(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,i){const r=LL.modes[e];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=hi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);ra(e)?(r.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),es.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),w_(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ll[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};zt(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){zt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},zt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const i=s?"set":"remove";let r,o,a,l;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!dc(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const i=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(e,t),a=s?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,s,o),l=B2(t),c=FV(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Kt(r.onHover,[t,a,this],this),l&&Kt(r.onClick,[t,a,this],this));const h=!dc(a,i);return(h||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=c,h}_getActiveElements(t,e,s,i){if(t.type==="mouseout")return[];if(!s)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function ny(){return zt(sp.instances,n=>n._plugins.invalidate())}function BV(n,t,e){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,Oe(s-e));if(n.beginPath(),n.arc(i,r,o-c/2,s+d/2,e-d/2),a>0){const f=Math.min(c/a,Oe(s-e));n.arc(i,r,a+c/2,e-f/2,s+f/2,!0)}else{const f=Math.min(c/2,o*Oe(s-e));if(h==="round")n.arc(i,r,f,e-Vt/2,s+Vt/2,!0);else if(h==="bevel"){const g=2*f*f,_=-g*Math.cos(e+Vt/2)+i,b=-g*Math.sin(e+Vt/2)+r,v=g*Math.cos(s+Vt/2)+i,A=g*Math.sin(s+Vt/2)+r;n.lineTo(_,b),n.lineTo(v,A)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function UV(n,t,e){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;n.beginPath(),n.arc(r,o,a,s-c,e+c),l>i?(c=i/l,n.arc(r,o,l,e+c,s-c,!0)):n.arc(r,o,i,e+le,s-le),n.closePath(),n.clip()}function $V(n){return Yf(n,["outerStart","outerEnd","innerStart","innerEnd"])}function zV(n,t,e,s){const i=$V(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=l=>{const c=(e-Math.min(r,l))*s/2;return _e(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:_e(i.innerStart,0,o),innerEnd:_e(i.innerEnd,0,o)}}function nr(n,t,e,s){return{x:e+n*Math.cos(t),y:s+n*Math.sin(t)}}function yc(n,t,e,s,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+s+e-c,0),f=h>0?h+s+e+c:0;let g=0;const _=i-l;if(s){const it=h>0?h-s:0,dt=d>0?d-s:0,ot=(it+dt)/2,H=ot!==0?_*ot/(ot+s):_;g=(_-H)/2}const b=Math.max(.001,_*d-e/Vt)/d,v=(_-b)/2,A=l+v+g,C=i-v-g,{outerStart:M,outerEnd:k,innerStart:D,innerEnd:N}=zV(t,f,d,C-A),w=d-M,y=d-k,x=A+M/w,E=C-k/y,I=f+D,P=f+N,S=A+D/I,rt=C-N/P;if(n.beginPath(),r){const it=(x+E)/2;if(n.arc(o,a,d,x,it),n.arc(o,a,d,it,E),k>0){const J=nr(y,E,o,a);n.arc(J.x,J.y,k,E,C+le)}const dt=nr(P,C,o,a);if(n.lineTo(dt.x,dt.y),N>0){const J=nr(P,rt,o,a);n.arc(J.x,J.y,N,C+le,rt+Math.PI)}const ot=(C-N/f+(A+D/f))/2;if(n.arc(o,a,f,C-N/f,ot,!0),n.arc(o,a,f,ot,A+D/f,!0),D>0){const J=nr(I,S,o,a);n.arc(J.x,J.y,D,S+Math.PI,A-le)}const H=nr(w,A,o,a);if(n.lineTo(H.x,H.y),M>0){const J=nr(w,x,o,a);n.arc(J.x,J.y,M,A-le,x)}}else{n.moveTo(o,a);const it=Math.cos(x)*d+o,dt=Math.sin(x)*d+a;n.lineTo(it,dt);const ot=Math.cos(E)*d+o,H=Math.sin(E)*d+a;n.lineTo(ot,H)}n.closePath()}function jV(n,t,e,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let l=t.endAngle;if(r){yc(n,t,e,s,l,i);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%Jt||Jt))}return yc(n,t,e,s,l,i),n.fill(),l}function HV(n,t,e,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f,borderRadius:g}=l,_=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=f,_?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let b=t.endAngle;if(r){yc(n,t,e,s,b,i);for(let v=0;v<r;++v)n.stroke();isNaN(a)||(b=o+(a%Jt||Jt))}_&&UV(n,t,b),l.selfJoin&&b-o>=Vt&&g===0&&h!=="miter"&&BV(n,t,b),r||(yc(n,t,e,s,b,i),n.stroke())}class WV extends Es{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=Iw(i,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=wt(d,l-a),_=oa(r,a,l)&&a!==l,b=g>=Jt||_,v=cs(o,c+f,h+f);return b&&v}getCenterPoint(t){const{x:e,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(i+r)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:s}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>Jt?Math.floor(s/Jt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(Vt,s||0)),c=i*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,jV(t,this,c,r,o),HV(t,this,c,r,o),t.restore()}}function ox(n,t,e=t){n.lineCap=wt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(wt(e.borderDash,t.borderDash)),n.lineDashOffset=wt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=wt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=wt(e.borderWidth,t.borderWidth),n.strokeStyle=wt(e.borderColor,t.borderColor)}function qV(n,t,e){n.lineTo(e.x,e.y)}function GV(n){return n.stepped?lO:n.tension||n.cubicInterpolationMode==="monotone"?cO:qV}function ax(n,t,e={}){const s=n.length,{start:i=0,end:r=s-1}=e,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(r,a),h=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function KV(n,t,e,s){const{points:i,options:r}=t,{count:o,start:a,loop:l,ilen:c}=ax(i,e,s),h=GV(r);let{move:d=!0,reverse:f}=s||{},g,_,b;for(g=0;g<=c;++g)_=i[(a+(f?c-g:g))%o],!_.skip&&(d?(n.moveTo(_.x,_.y),d=!1):h(n,b,_,f,r.stepped),b=_);return l&&(_=i[(a+(f?c:0))%o],h(n,b,_,f,r.stepped)),!!l}function YV(n,t,e,s){const i=t.points,{count:r,start:o,ilen:a}=ax(i,e,s),{move:l=!0,reverse:c}=s||{};let h=0,d=0,f,g,_,b,v,A;const C=k=>(o+(c?a-k:k))%r,M=()=>{b!==v&&(n.lineTo(h,v),n.lineTo(h,b),n.lineTo(h,A))};for(l&&(g=i[C(0)],n.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=i[C(f)],g.skip)continue;const k=g.x,D=g.y,N=k|0;N===_?(D<b?b=D:D>v&&(v=D),h=(d*h+k)/++d):(M(),n.lineTo(k,D),_=N,d=0,b=v=D),A=D}M()}function ad(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?YV:KV}function XV(n){return n.stepped?$O:n.tension||n.cubicInterpolationMode==="monotone"?zO:Si}function QV(n,t,e,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,s)&&i.closePath()),ox(n,t.options),n.stroke(i)}function JV(n,t,e,s){const{segments:i,options:r}=t,o=ad(t);for(const a of i)ox(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+s-1})&&n.closePath(),n.stroke()}const ZV=typeof Path2D=="function";function tN(n,t,e,s){ZV&&!t.options.segment?QV(n,t,e,s):JV(n,t,e,s)}class fu extends Es{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;MO(this._points,s,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=KO(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,i=t[e],r=this.points,o=Ww(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],l=XV(s);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],g=r[d],_=r[f];if(g===_){a.push(g);continue}const b=Math.abs((i-g[e])/(_[e]-g[e])),v=l(g,_,b,s.stepped);v[e]=t[e],a.push(v)}return a.length===1?a[0]:a}pathSegment(t,e,s){return ad(this)(t,this,e,s)}path(t,e,s){const i=this.segments,r=ad(this);let o=this._loop;e=e||0,s=s||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+s-1});return!!o}draw(t,e,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),tN(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function sy(n,t,e,s){const i=n.options,{[e]:r}=n.getProps([e],s);return Math.abs(t-r)<i.radius+i.hitRadius}class eN extends Es{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,s){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return sy(this,t,"x",e)}inYRange(t,e){return sy(this,t,"y",e)}getCenterPoint(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const s=e&&t.borderWidth||0;return(e+s)*2}draw(t,e){const s=this.options;this.skip||s.radius<.1||!hs(this,e,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,id(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function lx(n,t){const{x:e,y:s,base:i,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,h,d;return n.horizontal?(d=o/2,a=Math.min(e,i),l=Math.max(e,i),c=s-d,h=s+d):(d=r/2,a=e-d,l=e+d,c=Math.min(s,i),h=Math.max(s,i)),{left:a,top:c,right:l,bottom:h}}function zs(n,t,e,s){return n?0:_e(t,e,s)}function nN(n,t,e){const s=n.options.borderWidth,i=n.borderSkipped,r=Ow(s);return{t:zs(i.top,r.top,0,e),r:zs(i.right,r.right,0,t),b:zs(i.bottom,r.bottom,0,e),l:zs(i.left,r.left,0,t)}}function sN(n,t,e){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=Mi(i),o=Math.min(t,e),a=n.borderSkipped,l=s||Dt(i);return{topLeft:zs(!l||a.top||a.left,r.topLeft,0,o),topRight:zs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:zs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:zs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function iN(n){const t=lx(n),e=t.right-t.left,s=t.bottom-t.top,i=nN(n,e/2,s/2),r=sN(n,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function uh(n,t,e,s){const i=t===null,r=e===null,a=n&&!(i&&r)&&lx(n,s);return a&&(i||cs(t,a.left,a.right))&&(r||cs(e,a.top,a.bottom))}function rN(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function oN(n,t){n.rect(t.x,t.y,t.w,t.h)}function hh(n,t,e={}){const s=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-s,o=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+o,radius:n.radius}}class aN extends Es{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=iN(this),a=rN(o.radius)?aa:oN;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,hh(o,e,r)),t.clip(),a(t,hh(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,hh(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,s){return uh(this,t,e,s)}inXRange(t,e){return uh(this,t,null,e)}inYRange(t,e){return uh(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var lN=Object.freeze({__proto__:null,ArcElement:WV,BarElement:aN,LineElement:fu,PointElement:eN});const ld=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],iy=ld.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function cx(n){return ld[n%ld.length]}function ux(n){return iy[n%iy.length]}function cN(n,t){return n.borderColor=cx(t),n.backgroundColor=ux(t),++t}function uN(n,t){return n.backgroundColor=n.data.map(()=>cx(t++)),t}function hN(n,t){return n.backgroundColor=n.data.map(()=>ux(t++)),t}function dN(n){let t=0;return(e,s)=>{const i=n.getDatasetMeta(s).controller;i instanceof ep?t=uN(e,t):i instanceof Xw?t=hN(e,t):i&&(t=cN(e,t))}}function ry(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function fN(n){return n&&(n.borderColor||n.backgroundColor)}function pN(){return te.borderColor!=="rgba(0,0,0,0.1)"||te.backgroundColor!=="rgba(0,0,0,0.1)"}var gN={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:s},options:i}=n.config,{elements:r}=i,o=ry(s)||fN(i)||r&&ry(r)||pN();if(!e.forceOverride&&o)return;const a=dN(n);s.forEach(a)}};function mN(n,t,e,s,i){const r=i.samples||s;if(r>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(r-2);let l=0;const c=t+e-1;let h=t,d,f,g,_,b;for(o[l++]=n[h],d=0;d<r-2;d++){let v=0,A=0,C;const M=Math.floor((d+1)*a)+1+t,k=Math.min(Math.floor((d+2)*a)+1,e)+t,D=k-M;for(C=M;C<k;C++)v+=n[C].x,A+=n[C].y;v/=D,A/=D;const N=Math.floor(d*a)+1+t,w=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:y,y:x}=n[h];for(g=_=-1,C=N;C<w;C++)_=.5*Math.abs((y-v)*(n[C].y-x)-(y-n[C].x)*(A-x)),_>g&&(g=_,f=n[C],b=C);o[l++]=f,h=b}return o[l++]=n[c],o}function _N(n,t,e,s){let i=0,r=0,o,a,l,c,h,d,f,g,_,b;const v=[],A=t+e-1,C=n[t].x,k=n[A].x-C;for(o=t;o<t+e;++o){a=n[o],l=(a.x-C)/k*s,c=a.y;const D=l|0;if(D===h)c<_?(_=c,d=o):c>b&&(b=c,f=o),i=(r*i+a.x)/++r;else{const N=o-1;if(!Ct(d)&&!Ct(f)){const w=Math.min(d,f),y=Math.max(d,f);w!==g&&w!==N&&v.push({...n[w],x:i}),y!==g&&y!==N&&v.push({...n[y],x:i})}o>0&&N!==g&&v.push(n[N]),v.push(a),h=D,r=0,_=b=c,d=f=g=o}}return v}function hx(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function oy(n){n.data.datasets.forEach(t=>{hx(t)})}function yN(n,t){const e=t.length;let s=0,i;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(s=_e(us(t,r.axis,o).lo,0,e-1)),c?i=_e(us(t,r.axis,a).hi+1,s,e)-s:i=e-s,{start:s,count:i}}var bN={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){oy(n);return}const s=n.width;n.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,l=n.getDatasetMeta(r),c=o||i.data;if(yo([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:d,count:f}=yN(l,c);const g=e.threshold||4*s;if(f<=g){hx(i);return}Ct(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let _;switch(e.algorithm){case"lttb":_=mN(c,d,f,s,e);break;case"min-max":_=_N(c,d,f,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=_})},destroy(n){oy(n)}};function vN(n,t,e){const s=n.segments,i=n.points,r=t.points,o=[];for(const a of s){let{start:l,end:c}=a;c=pu(l,c,i);const h=cd(e,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:i[l],end:i[c]});continue}const d=Ww(t,h);for(const f of d){const g=cd(e,r[f.start],r[f.end],f.loop),_=Hw(a,i,g);for(const b of _)o.push({source:b,target:f,start:{[e]:ay(h,g,"start",Math.max)},end:{[e]:ay(h,g,"end",Math.min)}})}}return o}function cd(n,t,e,s){if(s)return;let i=t[n],r=e[n];return n==="angle"&&(i=Oe(i),r=Oe(r)),{property:n,start:i,end:r}}function wN(n,t){const{x:e=null,y:s=null}=n||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=pu(o,a,i);const l=i[o],c=i[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:c.x,y:s})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function pu(n,t,e){for(;t>n;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function ay(n,t,e,s){return n&&t?s(n[e],t[e]):n?n[e]:t?t[e]:0}function dx(n,t){let e=[],s=!1;return Zt(n)?(s=!0,e=n):e=wN(n,t),e.length?new fu({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function ly(n){return n&&n.fill!==!1}function xN(n,t,e){let i=n[t].fill;const r=[t];let o;if(!e)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!re(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function TN(n,t,e){const s=AN(n);if(Dt(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return re(i)&&Math.floor(i)===i?EN(s[0],t,i,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function EN(n,t,e,s){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function IN(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Dt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function SN(n,t,e){let s;return n==="start"?s=e:n==="end"?s=t.options.reverse?t.min:t.max:Dt(n)?s=n.value:s=t.getBaseValue(),s}function AN(n){const t=n.options,e=t.fill;let s=wt(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function CN(n){const{scale:t,index:e,line:s}=n,i=[],r=s.segments,o=s.points,a=PN(t,e);a.push(dx({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const c=r[l];for(let h=c.start;h<=c.end;h++)RN(i,o[h],a)}return new fu({points:i,options:{}})}function PN(n,t){const e=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function RN(n,t,e){const s=[];for(let i=0;i<e.length;i++){const r=e[i],{first:o,last:a,point:l}=kN(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(n.push(l),!a)break}}n.push(...s)}function kN(n,t,e){const s=n.interpolate(t,e);if(!s)return{};const i=s[e],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const h=r[c],d=o[h.start][e],f=o[h.end][e];if(cs(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:s}}class fx{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:Jt},t.arc(i,r,o,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function DN(n){const{chart:t,fill:e,line:s}=n;if(re(e))return MN(t,e);if(e==="stack")return CN(n);if(e==="shape")return!0;const i=ON(n);return i instanceof fx?i:dx(i,s)}function MN(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function ON(n){return(n.scale||{}).getPointPositionForValue?VN(n):LN(n)}function LN(n){const{scale:t={},fill:e}=n,s=IN(e,t);if(re(s)){const i=t.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function VN(n){const{scale:t,fill:e}=n,s=t.options,i=t.getLabels().length,r=s.reverse?t.max:t.min,o=SN(e,t,r),a=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,r);return new fx({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function dh(n,t,e){const s=DN(t),{chart:i,index:r,line:o,scale:a,axis:l}=t,c=o.options,h=c.fill,d=c.backgroundColor,{above:f=d,below:g=d}=h||{},_=i.getDatasetMeta(r),b=qw(i,_);s&&o.points.length&&(cu(n,e),NN(n,{line:o,target:s,above:f,below:g,area:e,scale:a,axis:l,clip:b}),uu(n))}function NN(n,t){const{line:e,target:s,above:i,below:r,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;n.save();let h=r;r!==i&&(c==="x"?(cy(n,s,o.top),fh(n,{line:e,target:s,color:i,scale:a,property:c,clip:l}),n.restore(),n.save(),cy(n,s,o.bottom)):c==="y"&&(uy(n,s,o.left),fh(n,{line:e,target:s,color:r,scale:a,property:c,clip:l}),n.restore(),n.save(),uy(n,s,o.right),h=i)),fh(n,{line:e,target:s,color:h,scale:a,property:c,clip:l}),n.restore()}function cy(n,t,e){const{segments:s,points:i}=t;let r=!0,o=!1;n.beginPath();for(const a of s){const{start:l,end:c}=a,h=i[l],d=i[pu(l,c,i)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(h.x,e),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function uy(n,t,e){const{segments:s,points:i}=t;let r=!0,o=!1;n.beginPath();for(const a of s){const{start:l,end:c}=a,h=i[l],d=i[pu(l,c,i)];r?(n.moveTo(h.x,h.y),r=!1):(n.lineTo(e,h.y),n.lineTo(h.x,h.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function fh(n,t){const{line:e,target:s,property:i,color:r,scale:o,clip:a}=t,l=vN(e,s,i);for(const{source:c,target:h,start:d,end:f}of l){const{style:{backgroundColor:g=r}={}}=c,_=s!==!0;n.save(),n.fillStyle=g,FN(n,o,a,_&&cd(i,d,f)),n.beginPath();const b=!!e.pathSegment(n,c);let v;if(_){b?n.closePath():hy(n,s,f,i);const A=!!s.pathSegment(n,h,{move:b,reverse:!0});v=b&&A,v||hy(n,s,d,i)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function FN(n,t,e,s){const i=t.chart.chartArea,{property:r,start:o,end:a}=s||{};if(r==="x"||r==="y"){let l,c,h,d;r==="x"?(l=o,c=i.top,h=a,d=i.bottom):(l=i.left,c=o,h=i.right,d=a),n.beginPath(),e&&(l=Math.max(l,e.left),h=Math.min(h,e.right),c=Math.max(c,e.top),d=Math.min(d,e.bottom)),n.rect(l,c,h-l,d-c),n.clip()}}function hy(n,t,e,s){const i=t.interpolate(e,s);i&&n.lineTo(i.x,i.y)}var BN={id:"filler",afterDatasetsUpdate(n,t,e){const s=(n.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<s;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof fu&&(l={visible:n.isDatasetVisible(o),index:o,fill:TN(a,o,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<s;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=xN(i,o,e.propagate))},beforeDraw(n,t,e){const s=e.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&dh(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;ly(r)&&dh(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const s=t.meta.$filler;!ly(s)||e.drawTime!=="beforeDatasetDraw"||dh(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const dy=(n,t)=>{let{boxHeight:e=t,boxWidth:s=t}=n;return n.usePointStyle&&(e=Math.min(e,t),s=n.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},UN=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class fy extends Es{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Kt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=pe(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=dy(s,r);let c,h;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((_,b)=>{const v=s+e/2+r.measureText(_.text).width;(b===0||c[c.length-1]+v+2*a>o)&&(d+=h,c[c.length-(b>0?0:1)]=0,g+=h,f++),l[b]={left:0,top:g,row:f,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(t,e,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let d=a,f=0,g=0,_=0,b=0;return this.legendItems.forEach((v,A)=>{const{itemWidth:C,itemHeight:M}=$N(s,e,r,v,i);A>0&&g+M+2*a>h&&(d+=f+a,c.push({width:f,height:g}),_+=f+a,b++,f=g=0),l[A]={left:_,top:g,col:b,width:C,height:M},f=Math.max(f,C),g+=M+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:i},rtl:r}}=this,o=yr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=De(s,this.left+i,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=De(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=De(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=De(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;cu(t,this),this._draw(),uu(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=te.color,l=yr(t.rtl,this.left,this.width),c=pe(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:_,boxHeight:b,itemHeight:v}=dy(o,d),A=function(N,w,y){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;i.save();const x=wt(y.lineWidth,1);if(i.fillStyle=wt(y.fillStyle,a),i.lineCap=wt(y.lineCap,"butt"),i.lineDashOffset=wt(y.lineDashOffset,0),i.lineJoin=wt(y.lineJoin,"miter"),i.lineWidth=x,i.strokeStyle=wt(y.strokeStyle,a),i.setLineDash(wt(y.lineDash,[])),o.usePointStyle){const E={radius:b*Math.SQRT2/2,pointStyle:y.pointStyle,rotation:y.rotation,borderWidth:x},I=l.xPlus(N,_/2),P=w+f;Mw(i,E,I,P,o.pointStyleWidth&&_)}else{const E=w+Math.max((d-b)/2,0),I=l.leftForLtr(N,_),P=Mi(y.borderRadius);i.beginPath(),Object.values(P).some(S=>S!==0)?aa(i,{x:I,y:E,w:_,h:b,radius:P}):i.rect(I,E,_,b),i.fill(),x!==0&&i.stroke()}i.restore()},C=function(N,w,y){zi(i,y.text,N,w+v/2,c,{strikethrough:y.hidden,textAlign:l.textAlign(y.textAlign)})},M=this.isHorizontal(),k=this._computeTitleHeight();M?g={x:De(r,this.left+h,this.right-s[0]),y:this.top+h+k,line:0}:g={x:this.left+h,y:De(r,this.top+k+h,this.bottom-e[0].height),line:0},$w(this.ctx,t.textDirection);const D=v+h;this.legendItems.forEach((N,w)=>{i.strokeStyle=N.fontColor,i.fillStyle=N.fontColor;const y=i.measureText(N.text).width,x=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),E=_+f+y;let I=g.x,P=g.y;l.setWidth(this.width),M?w>0&&I+E+h>this.right&&(P=g.y+=D,g.line++,I=g.x=De(r,this.left+h,this.right-s[g.line])):w>0&&P+D>this.bottom&&(I=g.x=I+e[g.line].width+h,g.line++,P=g.y=De(r,this.top+k+h,this.bottom-e[g.line].height));const S=l.x(I);if(A(S,P,N),I=Q2(x,I+_+f,M?I+E:this.right,t.rtl),C(l.x(I),P,N),M)g.x+=E+h;else if(typeof N.text!="string"){const rt=c.lineHeight;g.y+=px(N,rt)+h}else g.y+=D}),zw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=pe(e.font),i=ze(e.padding);if(!e.display)return;const r=yr(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=s.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=De(t.align,d,this.right-f);else{const _=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);h=c+De(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}const g=De(a,d,d+f);o.textAlign=r.textAlign(Gf(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,zi(o,e.text,g,h,s)}_computeTitleHeight(){const t=this.options.title,e=pe(t.font),s=ze(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,i,r;if(cs(t,this.left,this.right)&&cs(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],cs(t,i.left,i.left+i.width)&&cs(e,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!HN(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=UN(i,s);i&&!r&&Kt(e.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Kt(e.onHover,[t,s,this],this)}else s&&Kt(e.onClick,[t,s,this],this)}}function $N(n,t,e,s,i){const r=zN(s,n,t,e),o=jN(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function zN(n,t,e,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(i).width}function jN(n,t,e){let s=n;return typeof t.text!="string"&&(s=px(t,e)),s}function px(n,t){const e=n.text?n.text.length:0;return t*e}function HN(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var WN={id:"legend",_element:fy,start(n,t,e){const s=n.legend=new fy({ctx:n.ctx,options:e,chart:n});Be.configure(n,s,e),Be.addBox(n,s)},stop(n){Be.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const s=n.legend;Be.configure(n,s,e),s.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const s=t.datasetIndex,i=e.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=ze(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class ip extends Es{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=Zt(s.text)?s.text.length:1;this._padding=ze(s.padding);const r=i*pe(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=De(a,s,r),d=e+t,c=r-s):(o.position==="left"?(h=s+t,d=De(a,i,e),l=Vt*-.5):(h=r-t,d=De(a,e,i),l=Vt*.5),c=i-e),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=pe(e.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);zi(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:Gf(e.align),textBaseline:"middle",translation:[o,a]})}}function qN(n,t){const e=new ip({ctx:n.ctx,options:t,chart:n});Be.configure(n,e,t),Be.addBox(n,e),n.titleBlock=e}var GN={id:"title",_element:ip,start(n,t,e){qN(n,e)},stop(n){const t=n.titleBlock;Be.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const s=n.titleBlock;Be.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fl=new WeakMap;var KN={id:"subtitle",start(n,t,e){const s=new ip({ctx:n.ctx,options:e,chart:n});Be.configure(n,s,e),Be.addBox(n,s),fl.set(n,s)},stop(n){Be.removeBox(n,fl.get(n)),fl.delete(n)},beforeUpdate(n,t,e){const s=fl.get(n);Be.configure(n,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vo={average(n){if(!n.length)return!1;let t,e,s=new Set,i=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=nd(t,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function Cn(n,t){return t&&(Zt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ns(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function YN(n,t){const{element:e,datasetIndex:s,index:i}=t,r=n.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:n,label:o,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:e}}function py(n,t){const e=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:o,boxHeight:a}=t,l=pe(t.bodyFont),c=pe(t.titleFont),h=pe(t.footerFont),d=r.length,f=i.length,g=s.length,_=ze(t.padding);let b=_.height,v=0,A=s.reduce((k,D)=>k+D.before.length+D.lines.length+D.after.length,0);if(A+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),A){const k=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=g*k+(A-g)*l.lineHeight+(A-1)*t.bodySpacing}f&&(b+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let C=0;const M=function(k){v=Math.max(v,e.measureText(k).width+C)};return e.save(),e.font=c.string,zt(n.title,M),e.font=l.string,zt(n.beforeBody.concat(n.afterBody),M),C=t.displayColors?o+2+t.boxPadding:0,zt(s,k=>{zt(k.before,M),zt(k.lines,M),zt(k.after,M)}),C=0,e.font=h.string,zt(n.footer,M),e.restore(),v+=_.width,{width:v,height:b}}function XN(n,t){const{y:e,height:s}=t;return e<s/2?"top":e>n.height-s/2?"bottom":"center"}function QN(n,t,e,s){const{x:i,width:r}=s,o=e.caretSize+e.caretPadding;if(n==="left"&&i+r+o>t.width||n==="right"&&i-r-o<0)return!0}function JN(n,t,e,s){const{x:i,width:r}=e,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),QN(c,n,t,e)&&(c="center"),c}function gy(n,t,e){const s=e.yAlign||t.yAlign||XN(n,e);return{xAlign:e.xAlign||t.xAlign||JN(n,t,e,s),yAlign:s}}function ZN(n,t){let{x:e,width:s}=n;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function tF(n,t,e){let{y:s,height:i}=n;return t==="top"?s+=e:t==="bottom"?s-=i+e:s-=i/2,s}function my(n,t,e,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=i+r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Mi(o);let _=ZN(t,a);const b=tF(t,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,f)+i:a==="right"&&(_+=Math.max(d,g)+i),{x:_e(_,0,s.width-t.width),y:_e(b,0,s.height-t.height)}}function pl(n,t,e){const s=ze(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-s.right:n.x+s.left}function _y(n){return Cn([],ns(n))}function eF(n,t,e){return hi(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function yy(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const gx={beforeTitle:ts,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:ts,beforeBody:ts,beforeLabel:ts,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Ct(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ts,afterBody:ts,beforeFooter:ts,footer:ts,afterFooter:ts};function Ke(n,t,e,s){const i=n[t].call(e,s);return typeof i>"u"?gx[t].call(e,s):i}class by extends Es{static positioners=vo;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&e.options.animation&&s.animations,r=new Gw(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=eF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,i=Ke(s,"beforeTitle",this,t),r=Ke(s,"title",this,t),o=Ke(s,"afterTitle",this,t);let a=[];return a=Cn(a,ns(i)),a=Cn(a,ns(r)),a=Cn(a,ns(o)),a}getBeforeBody(t,e){return _y(Ke(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,i=[];return zt(t,r=>{const o={before:[],lines:[],after:[]},a=yy(s,r);Cn(o.before,ns(Ke(a,"beforeLabel",this,r))),Cn(o.lines,Ke(a,"label",this,r)),Cn(o.after,ns(Ke(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,e){return _y(Ke(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,i=Ke(s,"beforeFooter",this,t),r=Ke(s,"footer",this,t),o=Ke(s,"afterFooter",this,t);let a=[];return a=Cn(a,ns(i)),a=Cn(a,ns(r)),a=Cn(a,ns(o)),a}_createItems(t){const e=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(YN(this.chart,e[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,s))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,s))),zt(a,h=>{const d=yy(t.callbacks,h);i.push(Ke(d,"labelColor",this,h)),r.push(Ke(d,"labelPointStyle",this,h)),o.push(Ke(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=vo[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=py(this,s),c=Object.assign({},a,l),h=gy(this.chart,s,c),d=my(s,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,i){const r=this.getCaretPosition(t,s,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Mi(a),{x:f,y:g}=t,{width:_,height:b}=e;let v,A,C,M,k,D;return r==="center"?(k=g+b/2,i==="left"?(v=f,A=v-o,M=k+o,D=k-o):(v=f+_,A=v+o,M=k-o,D=k+o),C=v):(i==="left"?A=f+Math.max(l,h)+o:i==="right"?A=f+_-Math.max(c,d)-o:A=this.caretX,r==="top"?(M=g,k=M-o,v=A-o,C=A+o):(M=g+b,k=M+o,v=A+o,C=A-o),D=M),{x1:v,x2:A,x3:C,y1:M,y2:k,y3:D}}drawTitle(t,e,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=yr(s.rtl,this.x,this.width);for(t.x=pl(this,s.titleAlign,s),e.textAlign=c.textAlign(s.titleAlign),e.textBaseline="middle",o=pe(s.titleFont),a=s.titleSpacing,e.fillStyle=s.titleColor,e.font=o.string,l=0;l<r;++l)e.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,e,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,h=pe(r.bodyFont),d=pl(this,"left",r),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,_=e.y+g;if(r.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(f,c)+c/2,A=_+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,id(t,b,v,A),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,id(t,b,v,A)}else{t.lineWidth=Dt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(f,c),v=i.leftForLtr(i.xPlus(f,1),c-2),A=Mi(o.borderRadius);Object.values(A).some(C=>C!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,aa(t,{x:b,y:_,w:c,h:l,radius:A}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),aa(t,{x:v,y:_+1,w:c-2,h:l-2,radius:A}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(b,_,c,l),t.strokeRect(b,_,c,l),t.fillStyle=o.backgroundColor,t.fillRect(v,_+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=s,d=pe(s.bodyFont);let f=d.lineHeight,g=0;const _=yr(s.rtl,this.x,this.width),b=function(y){e.fillText(y,_.x(t.x+g),t.y+f/2),t.y+=f+r},v=_.textAlign(o);let A,C,M,k,D,N,w;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=pl(this,v,s),e.fillStyle=s.bodyColor,zt(this.beforeBody,b),g=a&&v!=="right"?o==="center"?c/2+h:c+2+h:0,k=0,N=i.length;k<N;++k){for(A=i[k],C=this.labelTextColors[k],e.fillStyle=C,zt(A.before,b),M=A.lines,a&&M.length&&(this._drawColorBox(e,t,k,_,s),f=Math.max(d.lineHeight,l)),D=0,w=M.length;D<w;++D)b(M[D]),f=d.lineHeight;zt(A.after,b)}g=0,f=d.lineHeight,zt(this.afterBody,b),t.y-=r}drawFooter(t,e,s){const i=this.footer,r=i.length;let o,a;if(r){const l=yr(s.rtl,this.x,this.width);for(t.x=pl(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=l.textAlign(s.footerAlign),e.textBaseline="middle",o=pe(s.footerFont),e.fillStyle=s.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,e,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=s,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:_}=Mi(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+d,l),o==="top"&&this.drawCaret(t,e,s,i),e.lineTo(a+c-f,l),e.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,e,s,i),e.lineTo(a+c,l+h-_),e.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(t,e,s,i),e.lineTo(a+g,l+h),e.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&r==="left"&&this.drawCaret(t,e,s,i),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=vo[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=py(this,t),l=Object.assign({},o,this._size),c=gy(e,t,l),h=my(t,l,c,e);(i._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ze(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,e),$w(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),zw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!dc(s,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,s),a=this._positionChanged(o,t),l=e||!dc(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:s,caretY:i,options:r}=this,o=vo[r.position].call(this,t,e);return o!==!1&&(s!==o.x||i!==o.y)}}var nF={id:"tooltip",_element:by,positioners:vo,afterInit(n,t,e){e&&(n.tooltip=new by({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},sF=Object.freeze({__proto__:null,Colors:gN,Decimation:bN,Filler:BN,Legend:WN,SubTitle:KN,Title:GN,Tooltip:nF});const iF=(n,t,e,s)=>(typeof t=="string"?(e=n.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function rF(n,t,e,s){const i=n.indexOf(t);if(i===-1)return iF(n,t,e,s);const r=n.lastIndexOf(t);return i!==r?e:i}const oF=(n,t)=>n===null?null:_e(Math.round(n),0,t);function vy(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class aF extends Gi{static id="category";static defaults={ticks:{callback:vy}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:i,label:r}of e)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ct(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:rF(s,t,wt(e,t),this._addedLabels),oF(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=e;o++)i.push({value:o});return i}getLabelForValue(t){return vy.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function lF(n,t){const e=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=n,g=r||1,_=h-1,{min:b,max:v}=t,A=!Ct(o),C=!Ct(a),M=!Ct(c),k=(v-b)/(d+1);let D=p_((v-b)/_/g)*g,N,w,y,x;if(D<1e-14&&!A&&!C)return[{value:b},{value:v}];x=Math.ceil(v/D)-Math.floor(b/D),x>_&&(D=p_(x*D/_/g)*g),Ct(l)||(N=Math.pow(10,l),D=Math.ceil(D*N)/N),i==="ticks"?(w=Math.floor(b/D)*D,y=Math.ceil(v/D)*D):(w=b,y=v),A&&C&&r&&H2((a-o)/r,D/1e3)?(x=Math.round(Math.min((a-o)/D,h)),D=(a-o)/x,w=o,y=a):M?(w=A?o:w,y=C?a:y,x=c-1,D=(y-w)/x):(x=(y-w)/D,Fo(x,Math.round(x),D/1e3)?x=Math.round(x):x=Math.ceil(x));const E=Math.max(g_(D),g_(w));N=Math.pow(10,Ct(l)?E:l),w=Math.round(w*N)/N,y=Math.round(y*N)/N;let I=0;for(A&&(f&&w!==o?(e.push({value:o}),w<o&&I++,Fo(Math.round((w+I*D)*N)/N,o,wy(o,k,n))&&I++):w<o&&I++);I<x;++I){const P=Math.round((w+I*D)*N)/N;if(C&&P>a)break;e.push({value:P})}return C&&f&&y!==a?e.length&&Fo(e[e.length-1].value,a,wy(a,k,n))?e[e.length-1].value=a:e.push({value:a}):(!C||y===a)&&e.push({value:y}),e}function wy(n,t,{horizontal:e,minRotation:s}){const i=xn(s),r=(e?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class bc extends Gi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ct(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=e?i:l,a=l=>r=s?r:l;if(t){const l=jn(i),c=jn(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(i-l)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=lF(i,r);return t.bounds==="ticks"&&Ew(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-e)/Math.max(t.length-1,1)/2;e-=i,s+=i}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return Pa(t,this.chart.options.locale,this.options.ticks.format)}}class cF extends bc{static id="linear";static defaults={ticks:{callback:lu.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=re(t)?t:0,this.max=re(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=xn(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ca=n=>Math.floor(Us(n)),xi=(n,t)=>Math.pow(10,ca(n)+t);function xy(n){return n/Math.pow(10,ca(n))===1}function Ty(n,t,e){const s=Math.pow(10,e),i=Math.floor(n/s);return Math.ceil(t/s)-i}function uF(n,t){const e=t-n;let s=ca(e);for(;Ty(n,t,s)>10;)s++;for(;Ty(n,t,s)<10;)s--;return Math.min(s,ca(n))}function hF(n,{min:t,max:e}){t=nn(n.min,t);const s=[],i=ca(t);let r=uF(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,r)),f=nn(n.min,Math.round((l+h+d*Math.pow(10,r))*o)/o);for(;f<e;)s.push({value:f,major:xy(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+h+d*Math.pow(10,r))*o)/o;const g=nn(n.max,f);return s.push({value:g,major:xy(g),significand:d}),s}class dF extends Gi{static id="logarithmic";static defaults={ticks:{callback:lu.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=bc.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return re(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=re(t)?Math.max(0,t):null,this.max=re(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!re(this._userMin)&&(this.min=t===xi(this.min,0)?xi(this.min,-1):xi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=e?i:a;s===i&&(s<=0?(r(1),o(10)):(r(xi(s,-1)),o(xi(i,1)))),s<=0&&r(xi(i,-1)),i<=0&&o(xi(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=hF(e,this);return t.bounds==="ticks"&&Ew(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Pa(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Us(t),this._valueRange=Us(this.max)-Us(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Us(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ud(n){const t=n.ticks;if(t.display&&n.display){const e=ze(t.backdropPadding);return wt(t.font&&t.font.size,te.font.size)+e.height}return 0}function fF(n,t,e){return e=Zt(e)?e:[e],{w:aO(n,t.string,e),h:e.length*t.lineHeight}}function Ey(n,t,e,s,i){return n===s||n===i?{start:t-e/2,end:t+e/2}:n<s||n>i?{start:t-e,end:t}:{start:t,end:t+e}}function pF(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),s=[],i=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Vt/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));i[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+i[l],a),d=pe(c.font),f=fF(n.ctx,d,n._pointLabels[l]);s[l]=f;const g=Oe(n.getIndexAngle(l)+a),_=Math.round(Wf(g)),b=Ey(_,h.x,f.w,0,180),v=Ey(_,h.y,f.h,90,270);gF(e,t,g,b,v)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=yF(n,s,i)}function gF(n,t,e,s,i){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,n.l=Math.min(n.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,n.t=Math.min(n.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function mF(n,t,e){const s=n.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=e,l=n.getPointPosition(t,s+i+o,r),c=Math.round(Wf(Oe(l.angle+le))),h=wF(l.y,a.h,c),d=bF(c),f=vF(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:f,top:h,right:f+a.w,bottom:h+a.h}}function _F(n,t){if(!t)return!0;const{left:e,top:s,right:i,bottom:r}=n;return!(hs({x:e,y:s},t)||hs({x:e,y:r},t)||hs({x:i,y:s},t)||hs({x:i,y:r},t))}function yF(n,t,e){const s=[],i=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:ud(r)/2,additionalAngle:o?Vt/i:0};let c;for(let h=0;h<i;h++){l.padding=e[h],l.size=t[h];const d=mF(n,h,l);s.push(d),a==="auto"&&(d.visible=_F(d,c),d.visible&&(c=d))}return s}function bF(n){return n===0||n===180?"center":n<180?"left":"right"}function vF(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function wF(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function xF(n,t,e){const{left:s,top:i,right:r,bottom:o}=e,{backdropColor:a}=t;if(!Ct(a)){const l=Mi(t.borderRadius),c=ze(t.backdropPadding);n.fillStyle=a;const h=s-c.left,d=i-c.top,f=r-s+c.width,g=o-i+c.height;Object.values(l).some(_=>_!==0)?(n.beginPath(),aa(n,{x:h,y:d,w:f,h:g,radius:l}),n.fill()):n.fillRect(h,d,f,g)}}function TF(n,t){const{ctx:e,options:{pointLabels:s}}=n;for(let i=t-1;i>=0;i--){const r=n._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(n.getPointLabelContext(i));xF(e,o,r);const a=pe(o.font),{x:l,y:c,textAlign:h}=r;zi(e,n._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function mx(n,t,e,s){const{ctx:i}=n;if(e)i.arc(n.xCenter,n.yCenter,t,0,Jt);else{let r=n.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=n.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function EF(n,t,e,s,i){const r=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),mx(n,e,o,s),r.closePath(),r.stroke(),r.restore())}function IF(n,t,e){return hi(n,{label:e,index:t,type:"pointLabel"})}class SF extends bc{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:lu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ze(ud(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=re(t)&&!isNaN(t)?t:0,this.max=re(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ud(this.options))}generateTickLabels(t){bc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const i=Kt(this.options.pointLabels.callback,[e,s],this);return i||i===0?i:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?pF(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,i))}getIndexAngle(t){const e=Jt/(this._pointLabels.length||1),s=this.options.startAngle||0;return Oe(t*e+xn(s))}getDistanceFromCenterForValue(t){if(Ct(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ct(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return IF(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const i=this.getIndexAngle(t)-le+s;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),mx(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:i,border:r}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&TF(this,o),i.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const f=this.getContext(d),g=i.setContext(f),_=r.setContext(f);EF(this,g,l,o,_)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const h=s.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=h;!f||!d||(t.lineWidth=f,t.strokeStyle=d,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=s.setContext(this.getContext(l)),h=pe(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=ze(c.backdropPadding);t.fillRect(-o/2-d.left,-r-h.size/2-d.top,o+d.width,h.size+d.height)}zi(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}const gu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Je=Object.keys(gu);function Iy(n,t){return n-t}function Sy(n,t){if(Ct(t))return null;const e=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),re(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ar(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,i)),+o)}function Ay(n,t,e,s){const i=Je.length;for(let r=Je.indexOf(n);r<i-1;++r){const o=gu[Je[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return Je[r]}return Je[i-1]}function AF(n,t,e,s,i){for(let r=Je.length-1;r>=Je.indexOf(e);r--){const o=Je[r];if(gu[o].common&&n._adapter.diff(i,s,o)>=t-1)return o}return Je[e?Je.indexOf(e):0]}function CF(n){for(let t=Je.indexOf(n)+1,e=Je.length;t<e;++t)if(gu[Je[t]].common)return Je[t]}function Cy(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:s,hi:i}=qf(e,t),r=e[s]>=t?e[s]:e[i];n[r]=!0}}function PF(n,t,e,s){const i=n._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=e[a],l>=0&&(t[l].major=!0);return t}function Py(n,t,e){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!e?s:PF(n,s,i,e)}class hd extends Gi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),i=this._adapter=new RL._date(t.adapters.date);i.init(e),No(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Sy(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=re(i)&&!isNaN(i)?i:+e.startOf(Date.now(),s),r=re(r)&&!isNaN(r)?r:+e.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=K2(i,r,o);return this._unit=e.unit||(s.autoSkip?Ay(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):AF(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:CF(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),Py(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=_e(e,0,o),s=_e(s,0,o),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Ay(r.minUnit,e,s,this._getLabelCapacity(e)),a=wt(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Ar(l)||l===!0,h={};let d=e,f,g;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(s,e,o)>1e5*a)throw new Error(e+" and "+s+" are too far apart with stepSize of "+a+" "+o);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<s;f=+t.add(f,a,o),g++)Cy(h,f,_);return(f===s||i.bounds==="ticks"||g===1)&&Cy(h,f,_),Object.keys(h).sort(Iy).map(b=>+b)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,o=e||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,s,i){const r=this.options,o=r.ticks.callback;if(o)return Kt(o,[t,e,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=s[e],g=c&&d&&f&&f.major;return this._adapter.format(t,i||(g?d:h))}generateTickLabels(t){let e,s,i;for(e=0,s=t.length;e<s;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,i=xn(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,i=s[e.unit]||s.millisecond,r=this._tickFormatFunction(t,0,Py(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,s=i.length;e<s;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const i=this.getLabels();for(e=0,s=i.length;e<s;++e)t.push(Sy(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Aw(t.sort(Iy))}}function gl(n,t,e){let s=0,i=n.length-1,r,o,a,l;e?(t>=n[s].pos&&t<=n[i].pos&&({lo:s,hi:i}=us(n,"pos",t)),{pos:r,time:a}=n[s],{pos:o,time:l}=n[i]):(t>=n[s].time&&t<=n[i].time&&({lo:s,hi:i}=us(n,"time",t)),{time:r,pos:a}=n[s],{time:o,pos:l}=n[i]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class RF extends hd{static id="timeseries";static defaults=hd.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=gl(e,this.min),this._tableRange=gl(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,i=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=s&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(gl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return gl(this._table,s*this._tableRange+this._minPos,!0)}}var kF=Object.freeze({__proto__:null,CategoryScale:aF,LinearScale:cF,LogarithmicScale:dF,RadialLinearScale:SF,TimeScale:hd,TimeSeriesScale:RF});const DF=[PL,lN,sF,kF];sp.register(...DF);var MF="firebase",OF="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(MF,OF,"app");Et.addAdapter(sp);const LF={apiKey:"AIzaSyARajg1PBZ0n8gyWrrpWynr8298-pmm0l4",authDomain:"arcane-scholars-legacy.firebaseapp.com",projectId:"arcane-scholars-legacy",storageBucket:"arcane-scholars-legacy.firebasestorage.app",messagingSenderId:"976593685731",appId:"1:976593685731:web:bfa95e8221f0b76f27c9d6",measurementId:"G-W3VDVWF7LF"},wo=typeof __firebase_config<"u"&&Object.keys(JSON.parse(__firebase_config)).length>0?JSON.parse(__firebase_config):LF;const Ry=typeof __initial_auth_token<"u"?__initial_auth_token:null;let ph,vc,_x;console.log("main.js: Starting Firebase initialization process...");console.log("main.js: Using firebaseConfig:",wo);if(wo&&Object.keys(wo).length>0&&wo.apiKey!=="YOUR_FIREBASE_API_KEY")try{ph=$b(wo),vc=Hi(ph),_x=Br(ph),console.log("Firebase initialized successfully.")}catch(n){console.error("Failed to initialize Firebase:",n)}else console.warn("Firebase configuration is missing or placeholder. Firebase will not be fully initialized."),console.warn('Please replace "YOUR_FIREBASE_API_KEY", "YOUR_PROJECT_ID", etc., with your actual Firebase project credentials for local development.');async function VF(){if(!vc){console.warn("Firebase Auth not initialized, skipping authentication.");return}try{Ry&&(await VA(vc,Ry),console.log("Signed in with custom token."))}catch(n){console.error("Firebase authentication error:",n)}}const mu=dI(fM);mu.use(Et);mu.config.globalProperties.$auth=vc;mu.config.globalProperties.$db=_x;VF().then(()=>{mu.mount("#app")});
